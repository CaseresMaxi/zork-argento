(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function zT(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Xm={exports:{}},pu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function v1(){if(SE)return pu;SE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,o,l){var c=null;if(l!==void 0&&(c=""+l),o.key!==void 0&&(c=""+o.key),"key"in o){l={};for(var d in o)d!=="key"&&(l[d]=o[d])}else l=o;return o=l.ref,{$$typeof:r,type:i,key:c,ref:o!==void 0?o:null,props:l}}return pu.Fragment=e,pu.jsx=t,pu.jsxs=t,pu}var AE;function E1(){return AE||(AE=1,Xm.exports=v1()),Xm.exports}var L=E1(),Wm={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function T1(){if(bE)return Ue;bE=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,H={};function U(M,oe,de){this.props=M,this.context=oe,this.refs=H,this.updater=de||V}U.prototype.isReactComponent={},U.prototype.setState=function(M,oe){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,oe,"setState")},U.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function Q(){}Q.prototype=U.prototype;function F(M,oe,de){this.props=M,this.context=oe,this.refs=H,this.updater=de||V}var re=F.prototype=new Q;re.constructor=F,z(re,U.prototype),re.isPureReactComponent=!0;var _e=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},Se=Object.prototype.hasOwnProperty;function k(M,oe,de,ue,Ie,Le){return de=Le.ref,{$$typeof:r,type:M,key:oe,ref:de!==void 0?de:null,props:Le}}function I(M,oe){return k(M.type,oe,void 0,void 0,void 0,M.props)}function w(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function O(M){var oe={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(de){return oe[de]})}var x=/\/+/g;function D(M,oe){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):oe.toString(36)}function R(){}function Re(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(R,R):(M.status="pending",M.then(function(oe){M.status==="pending"&&(M.status="fulfilled",M.value=oe)},function(oe){M.status==="pending"&&(M.status="rejected",M.reason=oe)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Ae(M,oe,de,ue,Ie){var Le=typeof M;(Le==="undefined"||Le==="boolean")&&(M=null);var Ve=!1;if(M===null)Ve=!0;else switch(Le){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(M.$$typeof){case r:case e:Ve=!0;break;case _:return Ve=M._init,Ae(Ve(M._payload),oe,de,ue,Ie)}}if(Ve)return Ie=Ie(M),Ve=ue===""?"."+D(M,0):ue,_e(Ie)?(de="",Ve!=null&&(de=Ve.replace(x,"$&/")+"/"),Ae(Ie,oe,de,"",function(En){return En})):Ie!=null&&(w(Ie)&&(Ie=I(Ie,de+(Ie.key==null||M&&M.key===Ie.key?"":(""+Ie.key).replace(x,"$&/")+"/")+Ve)),oe.push(Ie)),1;Ve=0;var Et=ue===""?".":ue+":";if(_e(M))for(var nt=0;nt<M.length;nt++)ue=M[nt],Le=Et+D(ue,nt),Ve+=Ae(ue,oe,de,Le,Ie);else if(nt=A(M),typeof nt=="function")for(M=nt.call(M),nt=0;!(ue=M.next()).done;)ue=ue.value,Le=Et+D(ue,nt++),Ve+=Ae(ue,oe,de,Le,Ie);else if(Le==="object"){if(typeof M.then=="function")return Ae(Re(M),oe,de,ue,Ie);throw oe=String(M),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function $(M,oe,de){if(M==null)return M;var ue=[],Ie=0;return Ae(M,ue,"","",function(Le){return oe.call(de,Le,Ie++)}),ue}function le(M){if(M._status===-1){var oe=M._result;oe=oe(),oe.then(function(de){(M._status===0||M._status===-1)&&(M._status=1,M._result=de)},function(de){(M._status===0||M._status===-1)&&(M._status=2,M._result=de)}),M._status===-1&&(M._status=0,M._result=oe)}if(M._status===1)return M._result.default;throw M._result}var Te=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Fe(){}return Ue.Children={map:$,forEach:function(M,oe,de){$(M,function(){oe.apply(this,arguments)},de)},count:function(M){var oe=0;return $(M,function(){oe++}),oe},toArray:function(M){return $(M,function(oe){return oe})||[]},only:function(M){if(!w(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Ue.Component=U,Ue.Fragment=t,Ue.Profiler=o,Ue.PureComponent=F,Ue.StrictMode=i,Ue.Suspense=p,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(M){return ae.H.useMemoCache(M)}},Ue.cache=function(M){return function(){return M.apply(null,arguments)}},Ue.cloneElement=function(M,oe,de){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ue=z({},M.props),Ie=M.key,Le=void 0;if(oe!=null)for(Ve in oe.ref!==void 0&&(Le=void 0),oe.key!==void 0&&(Ie=""+oe.key),oe)!Se.call(oe,Ve)||Ve==="key"||Ve==="__self"||Ve==="__source"||Ve==="ref"&&oe.ref===void 0||(ue[Ve]=oe[Ve]);var Ve=arguments.length-2;if(Ve===1)ue.children=de;else if(1<Ve){for(var Et=Array(Ve),nt=0;nt<Ve;nt++)Et[nt]=arguments[nt+2];ue.children=Et}return k(M.type,Ie,void 0,void 0,Le,ue)},Ue.createContext=function(M){return M={$$typeof:c,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},Ue.createElement=function(M,oe,de){var ue,Ie={},Le=null;if(oe!=null)for(ue in oe.key!==void 0&&(Le=""+oe.key),oe)Se.call(oe,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Ie[ue]=oe[ue]);var Ve=arguments.length-2;if(Ve===1)Ie.children=de;else if(1<Ve){for(var Et=Array(Ve),nt=0;nt<Ve;nt++)Et[nt]=arguments[nt+2];Ie.children=Et}if(M&&M.defaultProps)for(ue in Ve=M.defaultProps,Ve)Ie[ue]===void 0&&(Ie[ue]=Ve[ue]);return k(M,Le,void 0,void 0,null,Ie)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(M){return{$$typeof:d,render:M}},Ue.isValidElement=w,Ue.lazy=function(M){return{$$typeof:_,_payload:{_status:-1,_result:M},_init:le}},Ue.memo=function(M,oe){return{$$typeof:g,type:M,compare:oe===void 0?null:oe}},Ue.startTransition=function(M){var oe=ae.T,de={};ae.T=de;try{var ue=M(),Ie=ae.S;Ie!==null&&Ie(de,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Fe,Te)}catch(Le){Te(Le)}finally{ae.T=oe}},Ue.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Ue.use=function(M){return ae.H.use(M)},Ue.useActionState=function(M,oe,de){return ae.H.useActionState(M,oe,de)},Ue.useCallback=function(M,oe){return ae.H.useCallback(M,oe)},Ue.useContext=function(M){return ae.H.useContext(M)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(M,oe){return ae.H.useDeferredValue(M,oe)},Ue.useEffect=function(M,oe,de){var ue=ae.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(M,oe)},Ue.useId=function(){return ae.H.useId()},Ue.useImperativeHandle=function(M,oe,de){return ae.H.useImperativeHandle(M,oe,de)},Ue.useInsertionEffect=function(M,oe){return ae.H.useInsertionEffect(M,oe)},Ue.useLayoutEffect=function(M,oe){return ae.H.useLayoutEffect(M,oe)},Ue.useMemo=function(M,oe){return ae.H.useMemo(M,oe)},Ue.useOptimistic=function(M,oe){return ae.H.useOptimistic(M,oe)},Ue.useReducer=function(M,oe,de){return ae.H.useReducer(M,oe,de)},Ue.useRef=function(M){return ae.H.useRef(M)},Ue.useState=function(M){return ae.H.useState(M)},Ue.useSyncExternalStore=function(M,oe,de){return ae.H.useSyncExternalStore(M,oe,de)},Ue.useTransition=function(){return ae.H.useTransition()},Ue.version="19.1.1",Ue}var wE;function Wp(){return wE||(wE=1,Wm.exports=T1()),Wm.exports}var Z=Wp();const rn=zT(Z);var Zm={exports:{}},gu={},Jm={exports:{}},ep={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RE;function S1(){return RE||(RE=1,(function(r){function e($,le){var Te=$.length;$.push(le);e:for(;0<Te;){var Fe=Te-1>>>1,M=$[Fe];if(0<o(M,le))$[Fe]=le,$[Te]=M,Te=Fe;else break e}}function t($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var le=$[0],Te=$.pop();if(Te!==le){$[0]=Te;e:for(var Fe=0,M=$.length,oe=M>>>1;Fe<oe;){var de=2*(Fe+1)-1,ue=$[de],Ie=de+1,Le=$[Ie];if(0>o(ue,Te))Ie<M&&0>o(Le,ue)?($[Fe]=Le,$[Ie]=Te,Fe=Ie):($[Fe]=ue,$[de]=Te,Fe=de);else if(Ie<M&&0>o(Le,Te))$[Fe]=Le,$[Ie]=Te,Fe=Ie;else break e}}return le}function o($,le){var Te=$.sortIndex-le.sortIndex;return Te!==0?Te:$.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var p=[],g=[],_=1,T=null,A=3,V=!1,z=!1,H=!1,U=!1,Q=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function _e($){for(var le=t(g);le!==null;){if(le.callback===null)i(g);else if(le.startTime<=$)i(g),le.sortIndex=le.expirationTime,e(p,le);else break;le=t(g)}}function ae($){if(H=!1,_e($),!z)if(t(p)!==null)z=!0,Se||(Se=!0,D());else{var le=t(g);le!==null&&Ae(ae,le.startTime-$)}}var Se=!1,k=-1,I=5,w=-1;function O(){return U?!0:!(r.unstable_now()-w<I)}function x(){if(U=!1,Se){var $=r.unstable_now();w=$;var le=!0;try{e:{z=!1,H&&(H=!1,F(k),k=-1),V=!0;var Te=A;try{t:{for(_e($),T=t(p);T!==null&&!(T.expirationTime>$&&O());){var Fe=T.callback;if(typeof Fe=="function"){T.callback=null,A=T.priorityLevel;var M=Fe(T.expirationTime<=$);if($=r.unstable_now(),typeof M=="function"){T.callback=M,_e($),le=!0;break t}T===t(p)&&i(p),_e($)}else i(p);T=t(p)}if(T!==null)le=!0;else{var oe=t(g);oe!==null&&Ae(ae,oe.startTime-$),le=!1}}break e}finally{T=null,A=Te,V=!1}le=void 0}}finally{le?D():Se=!1}}}var D;if(typeof re=="function")D=function(){re(x)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Re=R.port2;R.port1.onmessage=x,D=function(){Re.postMessage(null)}}else D=function(){Q(x,0)};function Ae($,le){k=Q(function(){$(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return A},r.unstable_next=function($){switch(A){case 1:case 2:case 3:var le=3;break;default:le=A}var Te=A;A=le;try{return $()}finally{A=Te}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Te=A;A=$;try{return le()}finally{A=Te}},r.unstable_scheduleCallback=function($,le,Te){var Fe=r.unstable_now();switch(typeof Te=="object"&&Te!==null?(Te=Te.delay,Te=typeof Te=="number"&&0<Te?Fe+Te:Fe):Te=Fe,$){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Te+M,$={id:_++,callback:le,priorityLevel:$,startTime:Te,expirationTime:M,sortIndex:-1},Te>Fe?($.sortIndex=Te,e(g,$),t(p)===null&&$===t(g)&&(H?(F(k),k=-1):H=!0,Ae(ae,Te-Fe))):($.sortIndex=M,e(p,$),z||V||(z=!0,Se||(Se=!0,D()))),$},r.unstable_shouldYield=O,r.unstable_wrapCallback=function($){var le=A;return function(){var Te=A;A=le;try{return $.apply(this,arguments)}finally{A=Te}}}})(ep)),ep}var IE;function A1(){return IE||(IE=1,Jm.exports=S1()),Jm.exports}var tp={exports:{}},un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function b1(){if(CE)return un;CE=1;var r=Wp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(p,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:g,implementation:_}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,un.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(p,g,null,_)},un.flushSync=function(p){var g=c.T,_=i.p;try{if(c.T=null,i.p=2,p)return p()}finally{c.T=g,i.p=_,i.d.f()}},un.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},un.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},un.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,V=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:A,fetchPriority:V}):_==="script"&&i.d.X(p,{crossOrigin:T,integrity:A,fetchPriority:V,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},un.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},un.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=d(_,g.crossOrigin);i.d.L(p,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},un.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},un.requestFormReset=function(p){i.d.r(p)},un.unstable_batchedUpdates=function(p,g){return p(g)},un.useFormState=function(p,g,_){return c.H.useFormState(p,g,_)},un.useFormStatus=function(){return c.H.useHostTransitionStatus()},un.version="19.1.1",un}var xE;function w1(){if(xE)return tp.exports;xE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),tp.exports=b1(),tp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function R1(){if(DE)return gu;DE=1;var r=A1(),e=Wp(),t=w1();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,a=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(a=s.return),n=s.return;while(n)}return s.tag===3?a:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function p(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var a=n,u=s;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return d(f),n;if(m===u)return d(f),s;m=m.sibling}throw Error(i(188))}if(a.return!==u.return)a=f,u=m;else{for(var E=!1,S=f.child;S;){if(S===a){E=!0,a=f,u=m;break}if(S===u){E=!0,u=f,a=m;break}S=S.sibling}if(!E){for(S=m.child;S;){if(S===a){E=!0,a=m,u=f;break}if(S===u){E=!0,u=m,a=f;break}S=S.sibling}if(!E)throw Error(i(189))}}if(a.alternate!==u)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?n:s}function g(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=g(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),re=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function D(n){return n===null||typeof n!="object"?null:(n=x&&n[x]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function Re(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case z:return"Fragment";case U:return"Profiler";case H:return"StrictMode";case ae:return"Suspense";case Se:return"SuspenseList";case w:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case V:return"Portal";case re:return(n.displayName||"Context")+".Provider";case F:return(n._context.displayName||"Context")+".Consumer";case _e:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case k:return s=n.displayName||null,s!==null?s:Re(n.type)||"Memo";case I:s=n._payload,n=n._init;try{return Re(n(s))}catch{}}return null}var Ae=Array.isArray,$=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Te={pending:!1,data:null,method:null,action:null},Fe=[],M=-1;function oe(n){return{current:n}}function de(n){0>M||(n.current=Fe[M],Fe[M]=null,M--)}function ue(n,s){M++,Fe[M]=n.current,n.current=s}var Ie=oe(null),Le=oe(null),Ve=oe(null),Et=oe(null);function nt(n,s){switch(ue(Ve,s),ue(Le,n),ue(Ie,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?Xv(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=Xv(s),n=Wv(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}de(Ie),ue(Ie,n)}function En(){de(Ie),de(Le),de(Ve)}function zn(n){n.memoizedState!==null&&ue(Et,n);var s=Ie.current,a=Wv(s,n.type);s!==a&&(ue(Le,n),ue(Ie,a))}function nr(n){Le.current===n&&(de(Ie),de(Le)),Et.current===n&&(de(Et),cu._currentValue=Te)}var _r=Object.prototype.hasOwnProperty,Qr=r.unstable_scheduleCallback,vr=r.unstable_cancelCallback,qi=r.unstable_shouldYield,Pa=r.unstable_requestPaint,Tn=r.unstable_now,ac=r.unstable_getCurrentPriorityLevel,Hi=r.unstable_ImmediatePriority,N=r.unstable_UserBlockingPriority,K=r.unstable_NormalPriority,J=r.unstable_LowPriority,pe=r.unstable_IdlePriority,fe=r.log,ce=r.unstable_setDisableYieldValue,me=null,be=null;function je(n){if(typeof fe=="function"&&ce(n),be&&typeof be.setStrictMode=="function")try{be.setStrictMode(me,n)}catch{}}var rt=Math.clz32?Math.clz32:Xr,Yr=Math.log,Fn=Math.LN2;function Xr(n){return n>>>=0,n===0?32:31-(Yr(n)/Fn|0)|0}var rr=256,ir=4194304;function xn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Wr(n,s,a){var u=n.pendingLanes;if(u===0)return 0;var f=0,m=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var S=u&134217727;return S!==0?(u=S&~m,u!==0?f=xn(u):(E&=S,E!==0?f=xn(E):a||(a=S&~n,a!==0&&(f=xn(a))))):(S=u&~m,S!==0?f=xn(S):E!==0?f=xn(E):a||(a=u&~n,a!==0&&(f=xn(a)))),f===0?0:s!==0&&s!==f&&(s&m)===0&&(m=f&-f,a=s&-s,m>=a||m===32&&(a&4194048)!==0)?s:f}function Zr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Gi(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hl(){var n=rr;return rr<<=1,(rr&4194048)===0&&(rr=256),n}function fl(){var n=ir;return ir<<=1,(ir&62914560)===0&&(ir=4194304),n}function Jr(n){for(var s=[],a=0;31>a;a++)s.push(n);return s}function ei(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function dl(n,s,a,u,f,m){var E=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var S=n.entanglements,C=n.expirationTimes,G=n.hiddenUpdates;for(a=E&~a;0<a;){var ee=31-rt(a),ie=1<<ee;S[ee]=0,C[ee]=-1;var Y=G[ee];if(Y!==null)for(G[ee]=null,ee=0;ee<Y.length;ee++){var X=Y[ee];X!==null&&(X.lane&=-536870913)}a&=~ie}u!==0&&Er(n,u,0),m!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=m&~(E&~s))}function Er(n,s,a){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-rt(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|a&4194090}function ml(n,s){var a=n.entangledLanes|=s;for(n=n.entanglements;a;){var u=31-rt(a),f=1<<u;f&s|n[u]&s&&(n[u]|=s),a&=~f}}function $i(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function La(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function Ki(){var n=le.p;return n!==0?n:(n=window.event,n===void 0?32:gE(n.type))}function oc(n,s){var a=le.p;try{return le.p=n,s()}finally{le.p=a}}var pt=Math.random().toString(36).slice(2),Ut="__reactFiber$"+pt,Ct="__reactProps$"+pt,Bn="__reactContainer$"+pt,pl="__reactEvents$"+pt,Jf="__reactListeners$"+pt,Qi="__reactHandles$"+pt,lc="__reactResources$"+pt,qs="__reactMarker$"+pt;function Yi(n){delete n[Ut],delete n[Ct],delete n[pl],delete n[Jf],delete n[Qi]}function ti(n){var s=n[Ut];if(s)return s;for(var a=n.parentNode;a;){if(s=a[Bn]||a[Ut]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(n=tE(n);n!==null;){if(a=n[Ut])return a;n=tE(n)}return s}n=a,a=n.parentNode}return null}function Tr(n){if(n=n[Ut]||n[Bn]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function Sr(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function pn(n){var s=n[lc];return s||(s=n[lc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function At(n){n[qs]=!0}var gl=new Set,Ua={};function sr(n,s){ni(n,s),ni(n+"Capture",s)}function ni(n,s){for(Ua[n]=s,n=0;n<s.length;n++)gl.add(s[n])}var uc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cc={},Hs={};function hc(n){return _r.call(Hs,n)?!0:_r.call(cc,n)?!1:uc.test(n)?Hs[n]=!0:(cc[n]=!0,!1)}function Xi(n,s,a){if(hc(s))if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+a)}}function Ar(n,s,a){if(a===null)n.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+a)}}function Zt(n,s,a,u){if(u===null)n.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(s,a,""+u)}}var Gs,fc;function ri(n){if(Gs===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Gs=s&&s[1]||"",fc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gs+n+fc}var ja=!1;function za(n,s){if(!n||ja)return"";ja=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var Y=X}Reflect.construct(n,[],ie)}else{try{ie.call()}catch(X){Y=X}n.call(ie.prototype)}}else{try{throw Error()}catch(X){Y=X}(ie=n())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&Y&&typeof X.stack=="string")return[X.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=u.DetermineComponentFrameRoot(),E=m[0],S=m[1];if(E&&S){var C=E.split(`
`),G=S.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===G.length)for(u=C.length-1,f=G.length-1;1<=u&&0<=f&&C[u]!==G[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==G[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==G[f]){var ee=`
`+C[u].replace(" at new "," at ");return n.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",n.displayName)),ee}while(1<=u&&0<=f);break}}}finally{ja=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?ri(a):""}function yl(n){switch(n.tag){case 26:case 27:case 5:return ri(n.type);case 16:return ri("Lazy");case 13:return ri("Suspense");case 19:return ri("SuspenseList");case 0:case 15:return za(n.type,!1);case 11:return za(n.type.render,!1);case 1:return za(n.type,!0);case 31:return ri("Activity");default:return""}}function Fa(n){try{var s="";do s+=yl(n),n=n.return;while(n);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function gn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function _l(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function ed(n){var s=_l(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,m=a.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,m.call(this,E)}}),Object.defineProperty(n,s,{enumerable:a.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Ba(n){n._valueTracker||(n._valueTracker=ed(n))}function vl(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return n&&(u=_l(n)?n.checked?"true":"false":n.value),n=u,n!==a?(s.setValue(n),!0):!1}function $s(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var td=/[\n"\\]/g;function xt(n){return n.replace(td,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Dn(n,s,a,u,f,m,E,S){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+gn(s)):n.value!==""+gn(s)&&(n.value=""+gn(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Wi(n,E,gn(s)):a!=null?Wi(n,E,gn(a)):u!=null&&n.removeAttribute("value"),f==null&&m!=null&&(n.defaultChecked=!!m),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+gn(S):n.removeAttribute("name")}function Ks(n,s,a,u,f,m,E,S){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(n.type=m),s!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||s!=null))return;a=a!=null?""+gn(a):"",s=s!=null?""+gn(s):a,S||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=S?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Wi(n,s,a){s==="number"&&$s(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function ii(n,s,a,u){if(n=n.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=s.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&u&&(n[a].defaultSelected=!0)}else{for(a=""+gn(a),s=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function at(n,s,a){if(s!=null&&(s=""+gn(s),s!==n.value&&(n.value=s),a==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=a!=null?""+gn(a):""}function Qs(n,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(i(92));if(Ae(u)){if(1<u.length)throw Error(i(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=gn(s),n.defaultValue=a,u=n.textContent,u===a&&u!==""&&u!==null&&(n.value=u)}function qn(n,s){if(s){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=s;return}}n.textContent=s}var Ys=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dc(n,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,a):typeof a!="number"||a===0||Ys.has(s)?s==="float"?n.cssFloat=a:n[s]=(""+a).trim():n[s]=a+"px"}function El(n,s,a){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&a[f]!==u&&dc(n,f,u)}else for(var m in s)s.hasOwnProperty(m)&&dc(n,m,s[m])}function Tl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qa(n){return rd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var si=null;function Hn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ai=null,oi=null;function Sl(n){var s=Tr(n);if(s&&(n=s.stateNode)){var a=n[Ct]||null;e:switch(n=s.stateNode,s.type){case"input":if(Dn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+xt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==n&&u.form===n.form){var f=u[Ct]||null;if(!f)throw Error(i(90));Dn(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===n.form&&vl(u)}break e;case"textarea":at(n,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ii(n,!!a.multiple,s,!1)}}}var br=!1;function mc(n,s,a){if(br)return n(s,a);br=!0;try{var u=n(s);return u}finally{if(br=!1,(ai!==null||oi!==null)&&(oh(),ai&&(s=ai,n=oi,oi=ai=null,Sl(s),n)))for(s=0;s<n.length;s++)Sl(n[s])}}function Xs(n,s){var a=n.stateNode;if(a===null)return null;var u=a[Ct]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(i(231,s,typeof a));return a}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gn=!1;if(ar)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){Gn=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{Gn=!1}var wr=null,Zi=null,li=null;function Al(){if(li)return li;var n,s=Zi,a=s.length,u,f="value"in wr?wr.value:wr.textContent,m=f.length;for(n=0;n<a&&s[n]===f[n];n++);var E=a-n;for(u=1;u<=E&&s[a-u]===f[m-u];u++);return li=f.slice(n,1<u?1-u:void 0)}function Rr(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ir(){return!0}function bl(){return!1}function Ht(n){function s(a,u,f,m,E){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=m,this.target=E,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(a=n[S],this[S]=a?a(m):m[S]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ir:bl,this.isPropagationStopped=bl,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ir)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ir)},persist:function(){},isPersistent:Ir}),s}var et={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=Ht(et),Zs=_({},et,{view:0,detail:0}),pc=Ht(Zs),Ga,$a,Cr,Js=_({},Zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:na,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Cr&&(Cr&&n.type==="mousemove"?(Ga=n.screenX-Cr.screenX,$a=n.screenY-Cr.screenY):$a=Ga=0,Cr=n),Ga)},movementY:function(n){return"movementY"in n?n.movementY:$a}}),$n=Ht(Js),gc=_({},Js,{dataTransfer:0}),id=Ht(gc),ea=_({},Zs,{relatedTarget:0}),Ka=Ht(ea),wl=_({},et,{animationName:0,elapsedTime:0,pseudoElement:0}),Qa=Ht(wl),yc=_({},et,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Ya=Ht(yc),sd=_({},et,{data:0}),Rl=Ht(sd),ta={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_c={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Il(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=vc[n])?!!s[n]:!1}function na(){return Il}var Ec=_({},Zs,{key:function(n){if(n.key){var s=ta[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Rr(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?_c[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:na,charCode:function(n){return n.type==="keypress"?Rr(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Rr(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Xa=Ht(Ec),Tc=_({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cl=Ht(Tc),ui=_({},Zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:na}),Sc=Ht(ui),Ac=_({},et,{propertyName:0,elapsedTime:0,pseudoElement:0}),bc=Ht(Ac),wc=_({},Js,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Wa=Ht(wc),yn=_({},et,{newState:0,oldState:0}),Rc=Ht(yn),Ic=[9,13,27,32],xr=ar&&"CompositionEvent"in window,h=null;ar&&"documentMode"in document&&(h=document.documentMode);var y=ar&&"TextEvent"in window&&!h,v=ar&&(!xr||h&&8<h&&11>=h),b=" ",B=!1;function W(n,s){switch(n){case"keyup":return Ic.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Qe=!1;function jt(n,s){switch(n){case"compositionend":return he(s);case"keypress":return s.which!==32?null:(B=!0,b);case"textInput":return n=s.data,n===b&&B?null:n;default:return null}}function Ye(n,s){if(Qe)return n==="compositionend"||!xr&&W(n,s)?(n=Al(),li=Zi=wr=null,Qe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return v&&s.locale!=="ko"?null:s.data;default:return null}}var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zt(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!Gt[n.type]:s==="textarea"}function ci(n,s,a,u){ai?oi?oi.push(u):oi=[u]:ai=u,s=dh(s,"onChange"),0<s.length&&(a=new Ha("onChange","change",null,a,u),n.push({event:a,listeners:s}))}var Jt=null,Dr=null;function xl(n){Gv(n,0)}function Cc(n){var s=Sr(n);if(vl(s))return n}function fy(n,s){if(n==="change")return s}var dy=!1;if(ar){var ad;if(ar){var od="oninput"in document;if(!od){var my=document.createElement("div");my.setAttribute("oninput","return;"),od=typeof my.oninput=="function"}ad=od}else ad=!1;dy=ad&&(!document.documentMode||9<document.documentMode)}function py(){Jt&&(Jt.detachEvent("onpropertychange",gy),Dr=Jt=null)}function gy(n){if(n.propertyName==="value"&&Cc(Dr)){var s=[];ci(s,Dr,n,Hn(n)),mc(xl,s)}}function Yb(n,s,a){n==="focusin"?(py(),Jt=s,Dr=a,Jt.attachEvent("onpropertychange",gy)):n==="focusout"&&py()}function Xb(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Cc(Dr)}function Wb(n,s){if(n==="click")return Cc(s)}function Zb(n,s){if(n==="input"||n==="change")return Cc(s)}function Jb(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Nn=typeof Object.is=="function"?Object.is:Jb;function Dl(n,s){if(Nn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var a=Object.keys(n),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!_r.call(s,f)||!Nn(n[f],s[f]))return!1}return!0}function yy(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function _y(n,s){var a=yy(n);n=0;for(var u;a;){if(a.nodeType===3){if(u=n+a.textContent.length,n<=s&&u>=s)return{node:a,offset:s-n};n=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=yy(a)}}function vy(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?vy(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Ey(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=$s(n.document);s instanceof n.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)n=s.contentWindow;else break;s=$s(n.document)}return s}function ld(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var ew=ar&&"documentMode"in document&&11>=document.documentMode,Za=null,ud=null,Nl=null,cd=!1;function Ty(n,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;cd||Za==null||Za!==$s(u)||(u=Za,"selectionStart"in u&&ld(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Nl&&Dl(Nl,u)||(Nl=u,u=dh(ud,"onSelect"),0<u.length&&(s=new Ha("onSelect","select",null,s,a),n.push({event:s,listeners:u}),s.target=Za)))}function ra(n,s){var a={};return a[n.toLowerCase()]=s.toLowerCase(),a["Webkit"+n]="webkit"+s,a["Moz"+n]="moz"+s,a}var Ja={animationend:ra("Animation","AnimationEnd"),animationiteration:ra("Animation","AnimationIteration"),animationstart:ra("Animation","AnimationStart"),transitionrun:ra("Transition","TransitionRun"),transitionstart:ra("Transition","TransitionStart"),transitioncancel:ra("Transition","TransitionCancel"),transitionend:ra("Transition","TransitionEnd")},hd={},Sy={};ar&&(Sy=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function ia(n){if(hd[n])return hd[n];if(!Ja[n])return n;var s=Ja[n],a;for(a in s)if(s.hasOwnProperty(a)&&a in Sy)return hd[n]=s[a];return n}var Ay=ia("animationend"),by=ia("animationiteration"),wy=ia("animationstart"),tw=ia("transitionrun"),nw=ia("transitionstart"),rw=ia("transitioncancel"),Ry=ia("transitionend"),Iy=new Map,fd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fd.push("scrollEnd");function or(n,s){Iy.set(n,s),sr(s,[n])}var Cy=new WeakMap;function Kn(n,s){if(typeof n=="object"&&n!==null){var a=Cy.get(n);return a!==void 0?a:(s={value:n,source:s,stack:Fa(s)},Cy.set(n,s),s)}return{value:n,source:s,stack:Fa(s)}}var Qn=[],eo=0,dd=0;function xc(){for(var n=eo,s=dd=eo=0;s<n;){var a=Qn[s];Qn[s++]=null;var u=Qn[s];Qn[s++]=null;var f=Qn[s];Qn[s++]=null;var m=Qn[s];if(Qn[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}m!==0&&xy(a,f,m)}}function Dc(n,s,a,u){Qn[eo++]=n,Qn[eo++]=s,Qn[eo++]=a,Qn[eo++]=u,dd|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function md(n,s,a,u){return Dc(n,s,a,u),Nc(n)}function to(n,s){return Dc(n,null,null,s),Nc(n)}function xy(n,s,a){n.lanes|=a;var u=n.alternate;u!==null&&(u.lanes|=a);for(var f=!1,m=n.return;m!==null;)m.childLanes|=a,u=m.alternate,u!==null&&(u.childLanes|=a),m.tag===22&&(n=m.stateNode,n===null||n._visibility&1||(f=!0)),n=m,m=m.return;return n.tag===3?(m=n.stateNode,f&&s!==null&&(f=31-rt(a),n=m.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=a|536870912),m):null}function Nc(n){if(50<nu)throw nu=0,Em=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var no={};function iw(n,s,a,u){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function On(n,s,a,u){return new iw(n,s,a,u)}function pd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hi(n,s){var a=n.alternate;return a===null?(a=On(n.tag,s,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=s,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,s=n.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Dy(n,s){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,s=a.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Oc(n,s,a,u,f,m){var E=0;if(u=n,typeof n=="function")pd(n)&&(E=1);else if(typeof n=="string")E=a1(n,a,Ie.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case w:return n=On(31,a,s,f),n.elementType=w,n.lanes=m,n;case z:return sa(a.children,f,m,s);case H:E=8,f|=24;break;case U:return n=On(12,a,s,f|2),n.elementType=U,n.lanes=m,n;case ae:return n=On(13,a,s,f),n.elementType=ae,n.lanes=m,n;case Se:return n=On(19,a,s,f),n.elementType=Se,n.lanes=m,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:case re:E=10;break e;case F:E=9;break e;case _e:E=11;break e;case k:E=14;break e;case I:E=16,u=null;break e}E=29,a=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=On(E,a,s,f),s.elementType=n,s.type=u,s.lanes=m,s}function sa(n,s,a,u){return n=On(7,n,u,s),n.lanes=a,n}function gd(n,s,a){return n=On(6,n,null,s),n.lanes=a,n}function yd(n,s,a){return s=On(4,n.children!==null?n.children:[],n.key,s),s.lanes=a,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var ro=[],io=0,Vc=null,Mc=0,Yn=[],Xn=0,aa=null,fi=1,di="";function oa(n,s){ro[io++]=Mc,ro[io++]=Vc,Vc=n,Mc=s}function Ny(n,s,a){Yn[Xn++]=fi,Yn[Xn++]=di,Yn[Xn++]=aa,aa=n;var u=fi;n=di;var f=32-rt(u)-1;u&=~(1<<f),a+=1;var m=32-rt(s)+f;if(30<m){var E=f-f%5;m=(u&(1<<E)-1).toString(32),u>>=E,f-=E,fi=1<<32-rt(s)+f|a<<f|u,di=m+n}else fi=1<<m|a<<f|u,di=n}function _d(n){n.return!==null&&(oa(n,1),Ny(n,1,0))}function vd(n){for(;n===Vc;)Vc=ro[--io],ro[io]=null,Mc=ro[--io],ro[io]=null;for(;n===aa;)aa=Yn[--Xn],Yn[Xn]=null,di=Yn[--Xn],Yn[Xn]=null,fi=Yn[--Xn],Yn[Xn]=null}var _n=null,Tt=null,Je=!1,la=null,Nr=!1,Ed=Error(i(519));function ua(n){var s=Error(i(418,""));throw Ml(Kn(s,n)),Ed}function Oy(n){var s=n.stateNode,a=n.type,u=n.memoizedProps;switch(s[Ut]=n,s[Ct]=u,a){case"dialog":He("cancel",s),He("close",s);break;case"iframe":case"object":case"embed":He("load",s);break;case"video":case"audio":for(a=0;a<iu.length;a++)He(iu[a],s);break;case"source":He("error",s);break;case"img":case"image":case"link":He("error",s),He("load",s);break;case"details":He("toggle",s);break;case"input":He("invalid",s),Ks(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Ba(s);break;case"select":He("invalid",s);break;case"textarea":He("invalid",s),Qs(s,u.value,u.defaultValue,u.children),Ba(s)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||Yv(s.textContent,a)?(u.popover!=null&&(He("beforetoggle",s),He("toggle",s)),u.onScroll!=null&&He("scroll",s),u.onScrollEnd!=null&&He("scrollend",s),u.onClick!=null&&(s.onclick=mh),s=!0):s=!1,s||ua(n)}function Vy(n){for(_n=n.return;_n;)switch(_n.tag){case 5:case 13:Nr=!1;return;case 27:case 3:Nr=!0;return;default:_n=_n.return}}function Ol(n){if(n!==_n)return!1;if(!Je)return Vy(n),Je=!0,!1;var s=n.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Pm(n.type,n.memoizedProps)),a=!a),a&&Tt&&ua(n),Vy(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(s===0){Tt=ur(n.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;n=n.nextSibling}Tt=null}}else s===27?(s=Tt,ms(n.type)?(n=zm,zm=null,Tt=n):Tt=s):Tt=_n?ur(n.stateNode.nextSibling):null;return!0}function Vl(){Tt=_n=null,Je=!1}function My(){var n=la;return n!==null&&(bn===null?bn=n:bn.push.apply(bn,n),la=null),n}function Ml(n){la===null?la=[n]:la.push(n)}var Td=oe(null),ca=null,mi=null;function Ji(n,s,a){ue(Td,s._currentValue),s._currentValue=a}function pi(n){n._currentValue=Td.current,de(Td)}function Sd(n,s,a){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===a)break;n=n.return}}function Ad(n,s,a,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var m=f.dependencies;if(m!==null){var E=f.child;m=m.firstContext;e:for(;m!==null;){var S=m;m=f;for(var C=0;C<s.length;C++)if(S.context===s[C]){m.lanes|=a,S=m.alternate,S!==null&&(S.lanes|=a),Sd(m.return,a,n),u||(E=null);break e}m=S.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=a,m=E.alternate,m!==null&&(m.lanes|=a),Sd(E,a,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function kl(n,s,a,u){n=null;for(var f=s,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var S=f.type;Nn(f.pendingProps.value,E.value)||(n!==null?n.push(S):n=[S])}}else if(f===Et.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(cu):n=[cu])}f=f.return}n!==null&&Ad(s,n,a,u),s.flags|=262144}function kc(n){for(n=n.firstContext;n!==null;){if(!Nn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ha(n){ca=n,mi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ln(n){return ky(ca,n)}function Pc(n,s){return ca===null&&ha(n),ky(n,s)}function ky(n,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},mi===null){if(n===null)throw Error(i(308));mi=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else mi=mi.next=s;return a}var sw=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(a,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(a){return a()})}},aw=r.unstable_scheduleCallback,ow=r.unstable_NormalPriority,Ft={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bd(){return{controller:new sw,data:new Map,refCount:0}}function Pl(n){n.refCount--,n.refCount===0&&aw(ow,function(){n.controller.abort()})}var Ll=null,wd=0,so=0,ao=null;function lw(n,s){if(Ll===null){var a=Ll=[];wd=0,so=Im(),ao={status:"pending",value:void 0,then:function(u){a.push(u)}}}return wd++,s.then(Py,Py),s}function Py(){if(--wd===0&&Ll!==null){ao!==null&&(ao.status="fulfilled");var n=Ll;Ll=null,so=0,ao=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function uw(n,s){var a=[],u={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),u}var Ly=$.S;$.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&lw(n,s),Ly!==null&&Ly(n,s)};var fa=oe(null);function Rd(){var n=fa.current;return n!==null?n:ft.pooledCache}function Lc(n,s){s===null?ue(fa,fa.current):ue(fa,s.pool)}function Uy(){var n=Rd();return n===null?null:{parent:Ft._currentValue,pool:n}}var Ul=Error(i(460)),jy=Error(i(474)),Uc=Error(i(542)),Id={then:function(){}};function zy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function jc(){}function Fy(n,s,a){switch(a=n[a],a===void 0?n.push(s):a!==s&&(s.then(jc,jc),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,qy(n),n;default:if(typeof s.status=="string")s.then(jc,jc);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,qy(n),n}throw jl=s,Ul}}var jl=null;function By(){if(jl===null)throw Error(i(459));var n=jl;return jl=null,n}function qy(n){if(n===Ul||n===Uc)throw Error(i(483))}var es=!1;function Cd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function ts(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ns(n,s,a){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(it&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=Nc(n),xy(n,null,a),s}return Dc(n,u,s,a),Nc(n)}function zl(n,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,ml(n,a)}}function Dd(n,s){var a=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var E={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=E:m=m.next=E,a=a.next}while(a!==null);m===null?f=m=s:m=m.next=s}else f=m=s;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:u.shared,callbacks:u.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=s:n.next=s,a.lastBaseUpdate=s}var Nd=!1;function Fl(){if(Nd){var n=ao;if(n!==null)throw n}}function Bl(n,s,a,u){Nd=!1;var f=n.updateQueue;es=!1;var m=f.firstBaseUpdate,E=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var C=S,G=C.next;C.next=null,E===null?m=G:E.next=G,E=C;var ee=n.alternate;ee!==null&&(ee=ee.updateQueue,S=ee.lastBaseUpdate,S!==E&&(S===null?ee.firstBaseUpdate=G:S.next=G,ee.lastBaseUpdate=C))}if(m!==null){var ie=f.baseState;E=0,ee=G=C=null,S=m;do{var Y=S.lane&-536870913,X=Y!==S.lane;if(X?(Xe&Y)===Y:(u&Y)===Y){Y!==0&&Y===so&&(Nd=!0),ee!==null&&(ee=ee.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Me=n,xe=S;Y=s;var ut=a;switch(xe.tag){case 1:if(Me=xe.payload,typeof Me=="function"){ie=Me.call(ut,ie,Y);break e}ie=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=xe.payload,Y=typeof Me=="function"?Me.call(ut,ie,Y):Me,Y==null)break e;ie=_({},ie,Y);break e;case 2:es=!0}}Y=S.callback,Y!==null&&(n.flags|=64,X&&(n.flags|=8192),X=f.callbacks,X===null?f.callbacks=[Y]:X.push(Y))}else X={lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ee===null?(G=ee=X,C=ie):ee=ee.next=X,E|=Y;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;X=S,S=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);ee===null&&(C=ie),f.baseState=C,f.firstBaseUpdate=G,f.lastBaseUpdate=ee,m===null&&(f.shared.lanes=0),cs|=E,n.lanes=E,n.memoizedState=ie}}function Hy(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function Gy(n,s){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Hy(a[n],s)}var oo=oe(null),zc=oe(0);function $y(n,s){n=Si,ue(zc,n),ue(oo,s),Si=n|s.baseLanes}function Od(){ue(zc,Si),ue(oo,oo.current)}function Vd(){Si=zc.current,de(oo),de(zc)}var rs=0,ze=null,ot=null,Dt=null,Fc=!1,lo=!1,da=!1,Bc=0,ql=0,uo=null,cw=0;function bt(){throw Error(i(321))}function Md(n,s){if(s===null)return!1;for(var a=0;a<s.length&&a<n.length;a++)if(!Nn(n[a],s[a]))return!1;return!0}function kd(n,s,a,u,f,m){return rs=m,ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,$.H=n===null||n.memoizedState===null?x_:D_,da=!1,m=a(u,f),da=!1,lo&&(m=Qy(s,a,u,f)),Ky(n),m}function Ky(n){$.H=Qc;var s=ot!==null&&ot.next!==null;if(rs=0,Dt=ot=ze=null,Fc=!1,ql=0,uo=null,s)throw Error(i(300));n===null||$t||(n=n.dependencies,n!==null&&kc(n)&&($t=!0))}function Qy(n,s,a,u){ze=n;var f=0;do{if(lo&&(uo=null),ql=0,lo=!1,25<=f)throw Error(i(301));if(f+=1,Dt=ot=null,n.updateQueue!=null){var m=n.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}$.H=yw,m=s(a,u)}while(lo);return m}function hw(){var n=$.H,s=n.useState()[0];return s=typeof s.then=="function"?Hl(s):s,n=n.useState()[0],(ot!==null?ot.memoizedState:null)!==n&&(ze.flags|=1024),s}function Pd(){var n=Bc!==0;return Bc=0,n}function Ld(n,s,a){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~a}function Ud(n){if(Fc){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Fc=!1}rs=0,Dt=ot=ze=null,lo=!1,ql=Bc=0,uo=null}function Sn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ze.memoizedState=Dt=n:Dt=Dt.next=n,Dt}function Nt(){if(ot===null){var n=ze.alternate;n=n!==null?n.memoizedState:null}else n=ot.next;var s=Dt===null?ze.memoizedState:Dt.next;if(s!==null)Dt=s,ot=n;else{if(n===null)throw ze.alternate===null?Error(i(467)):Error(i(310));ot=n,n={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},Dt===null?ze.memoizedState=Dt=n:Dt=Dt.next=n}return Dt}function jd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(n){var s=ql;return ql+=1,uo===null&&(uo=[]),n=Fy(uo,n,s),s=ze,(Dt===null?s.memoizedState:Dt.next)===null&&(s=s.alternate,$.H=s===null||s.memoizedState===null?x_:D_),n}function qc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Hl(n);if(n.$$typeof===re)return ln(n)}throw Error(i(438,String(n)))}function zd(n){var s=null,a=ze.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=ze.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=jd(),ze.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(n),u=0;u<n;u++)a[u]=O;return s.index++,a}function gi(n,s){return typeof s=="function"?s(n):s}function Hc(n){var s=Nt();return Fd(s,ot,n)}function Fd(n,s,a){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=a;var f=n.baseQueue,m=u.pending;if(m!==null){if(f!==null){var E=f.next;f.next=m.next,m.next=E}s.baseQueue=f=m,u.pending=null}if(m=n.baseState,f===null)n.memoizedState=m;else{s=f.next;var S=E=null,C=null,G=s,ee=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(Xe&ie)===ie:(rs&ie)===ie){var Y=G.revertLane;if(Y===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===so&&(ee=!0);else if((rs&Y)===Y){G=G.next,Y===so&&(ee=!0);continue}else ie={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},C===null?(S=C=ie,E=m):C=C.next=ie,ze.lanes|=Y,cs|=Y;ie=G.action,da&&a(m,ie),m=G.hasEagerState?G.eagerState:a(m,ie)}else Y={lane:ie,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},C===null?(S=C=Y,E=m):C=C.next=Y,ze.lanes|=ie,cs|=ie;G=G.next}while(G!==null&&G!==s);if(C===null?E=m:C.next=S,!Nn(m,n.memoizedState)&&($t=!0,ee&&(a=ao,a!==null)))throw a;n.memoizedState=m,n.baseState=E,n.baseQueue=C,u.lastRenderedState=m}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function Bd(n){var s=Nt(),a=s.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=n;var u=a.dispatch,f=a.pending,m=s.memoizedState;if(f!==null){a.pending=null;var E=f=f.next;do m=n(m,E.action),E=E.next;while(E!==f);Nn(m,s.memoizedState)||($t=!0),s.memoizedState=m,s.baseQueue===null&&(s.baseState=m),a.lastRenderedState=m}return[m,u]}function Yy(n,s,a){var u=ze,f=Nt(),m=Je;if(m){if(a===void 0)throw Error(i(407));a=a()}else a=s();var E=!Nn((ot||f).memoizedState,a);E&&(f.memoizedState=a,$t=!0),f=f.queue;var S=Zy.bind(null,u,f,n);if(Gl(2048,8,S,[n]),f.getSnapshot!==s||E||Dt!==null&&Dt.memoizedState.tag&1){if(u.flags|=2048,co(9,Gc(),Wy.bind(null,u,f,a,s),null),ft===null)throw Error(i(349));m||(rs&124)!==0||Xy(u,s,a)}return a}function Xy(n,s,a){n.flags|=16384,n={getSnapshot:s,value:a},s=ze.updateQueue,s===null?(s=jd(),ze.updateQueue=s,s.stores=[n]):(a=s.stores,a===null?s.stores=[n]:a.push(n))}function Wy(n,s,a,u){s.value=a,s.getSnapshot=u,Jy(s)&&e_(n)}function Zy(n,s,a){return a(function(){Jy(s)&&e_(n)})}function Jy(n){var s=n.getSnapshot;n=n.value;try{var a=s();return!Nn(n,a)}catch{return!0}}function e_(n){var s=to(n,2);s!==null&&Ln(s,n,2)}function qd(n){var s=Sn();if(typeof n=="function"){var a=n;if(n=a(),da){je(!0);try{a()}finally{je(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:n},s}function t_(n,s,a,u){return n.baseState=a,Fd(n,ot,typeof u=="function"?u:gi)}function fw(n,s,a,u,f){if(Kc(n))throw Error(i(485));if(n=s.action,n!==null){var m={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){m.listeners.push(E)}};$.T!==null?a(!0):m.isTransition=!1,u(m),a=s.pending,a===null?(m.next=s.pending=m,n_(s,m)):(m.next=a.next,s.pending=a.next=m)}}function n_(n,s){var a=s.action,u=s.payload,f=n.state;if(s.isTransition){var m=$.T,E={};$.T=E;try{var S=a(f,u),C=$.S;C!==null&&C(E,S),r_(n,s,S)}catch(G){Hd(n,s,G)}finally{$.T=m}}else try{m=a(f,u),r_(n,s,m)}catch(G){Hd(n,s,G)}}function r_(n,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){i_(n,s,u)},function(u){return Hd(n,s,u)}):i_(n,s,a)}function i_(n,s,a){s.status="fulfilled",s.value=a,s_(s),n.state=a,s=n.pending,s!==null&&(a=s.next,a===s?n.pending=null:(a=a.next,s.next=a,n_(n,a)))}function Hd(n,s,a){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,s_(s),s=s.next;while(s!==u)}n.action=null}function s_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function a_(n,s){return s}function o_(n,s){if(Je){var a=ft.formState;if(a!==null){e:{var u=ze;if(Je){if(Tt){t:{for(var f=Tt,m=Nr;f.nodeType!==8;){if(!m){f=null;break t}if(f=ur(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Tt=ur(f.nextSibling),u=f.data==="F!";break e}}ua(u)}u=!1}u&&(s=a[0])}}return a=Sn(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a_,lastRenderedState:s},a.queue=u,a=R_.bind(null,ze,u),u.dispatch=a,u=qd(!1),m=Yd.bind(null,ze,!1,u.queue),u=Sn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,a=fw.bind(null,ze,f,m,a),f.dispatch=a,u.memoizedState=n,[s,a,!1]}function l_(n){var s=Nt();return u_(s,ot,n)}function u_(n,s,a){if(s=Fd(n,s,a_)[0],n=Hc(gi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Hl(s)}catch(E){throw E===Ul?Uc:E}else u=s;s=Nt();var f=s.queue,m=f.dispatch;return a!==s.memoizedState&&(ze.flags|=2048,co(9,Gc(),dw.bind(null,f,a),null)),[u,m,n]}function dw(n,s){n.action=s}function c_(n){var s=Nt(),a=ot;if(a!==null)return u_(s,a,n);Nt(),s=s.memoizedState,a=Nt();var u=a.queue.dispatch;return a.memoizedState=n,[s,u,!1]}function co(n,s,a,u){return n={tag:n,create:a,deps:u,inst:s,next:null},s=ze.updateQueue,s===null&&(s=jd(),ze.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=n.next=n:(u=a.next,a.next=n,n.next=u,s.lastEffect=n),n}function Gc(){return{destroy:void 0,resource:void 0}}function h_(){return Nt().memoizedState}function $c(n,s,a,u){var f=Sn();u=u===void 0?null:u,ze.flags|=n,f.memoizedState=co(1|s,Gc(),a,u)}function Gl(n,s,a,u){var f=Nt();u=u===void 0?null:u;var m=f.memoizedState.inst;ot!==null&&u!==null&&Md(u,ot.memoizedState.deps)?f.memoizedState=co(s,m,a,u):(ze.flags|=n,f.memoizedState=co(1|s,m,a,u))}function f_(n,s){$c(8390656,8,n,s)}function d_(n,s){Gl(2048,8,n,s)}function m_(n,s){return Gl(4,2,n,s)}function p_(n,s){return Gl(4,4,n,s)}function g_(n,s){if(typeof s=="function"){n=n();var a=s(n);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function y_(n,s,a){a=a!=null?a.concat([n]):null,Gl(4,4,g_.bind(null,s,n),a)}function Gd(){}function __(n,s){var a=Nt();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&Md(s,u[1])?u[0]:(a.memoizedState=[n,s],n)}function v_(n,s){var a=Nt();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&Md(s,u[1]))return u[0];if(u=n(),da){je(!0);try{n()}finally{je(!1)}}return a.memoizedState=[u,s],u}function $d(n,s,a){return a===void 0||(rs&1073741824)!==0?n.memoizedState=s:(n.memoizedState=a,n=Sv(),ze.lanes|=n,cs|=n,a)}function E_(n,s,a,u){return Nn(a,s)?a:oo.current!==null?(n=$d(n,a,u),Nn(n,s)||($t=!0),n):(rs&42)===0?($t=!0,n.memoizedState=a):(n=Sv(),ze.lanes|=n,cs|=n,s)}function T_(n,s,a,u,f){var m=le.p;le.p=m!==0&&8>m?m:8;var E=$.T,S={};$.T=S,Yd(n,!1,s,a);try{var C=f(),G=$.S;if(G!==null&&G(S,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var ee=uw(C,u);$l(n,s,ee,Pn(n))}else $l(n,s,u,Pn(n))}catch(ie){$l(n,s,{then:function(){},status:"rejected",reason:ie},Pn())}finally{le.p=m,$.T=E}}function mw(){}function Kd(n,s,a,u){if(n.tag!==5)throw Error(i(476));var f=S_(n).queue;T_(n,f,s,Te,a===null?mw:function(){return A_(n),a(u)})}function S_(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:Te,baseState:Te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:Te},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:a},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function A_(n){var s=S_(n).next.queue;$l(n,s,{},Pn())}function Qd(){return ln(cu)}function b_(){return Nt().memoizedState}function w_(){return Nt().memoizedState}function pw(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var a=Pn();n=ts(a);var u=ns(s,n,a);u!==null&&(Ln(u,s,a),zl(u,s,a)),s={cache:bd()},n.payload=s;return}s=s.return}}function gw(n,s,a){var u=Pn();a={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Kc(n)?I_(s,a):(a=md(n,s,a,u),a!==null&&(Ln(a,n,u),C_(a,s,u)))}function R_(n,s,a){var u=Pn();$l(n,s,a,u)}function $l(n,s,a,u){var f={lane:u,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Kc(n))I_(s,f);else{var m=n.alternate;if(n.lanes===0&&(m===null||m.lanes===0)&&(m=s.lastRenderedReducer,m!==null))try{var E=s.lastRenderedState,S=m(E,a);if(f.hasEagerState=!0,f.eagerState=S,Nn(S,E))return Dc(n,s,f,0),ft===null&&xc(),!1}catch{}finally{}if(a=md(n,s,f,u),a!==null)return Ln(a,n,u),C_(a,s,u),!0}return!1}function Yd(n,s,a,u){if(u={lane:2,revertLane:Im(),action:u,hasEagerState:!1,eagerState:null,next:null},Kc(n)){if(s)throw Error(i(479))}else s=md(n,a,u,2),s!==null&&Ln(s,n,2)}function Kc(n){var s=n.alternate;return n===ze||s!==null&&s===ze}function I_(n,s){lo=Fc=!0;var a=n.pending;a===null?s.next=s:(s.next=a.next,a.next=s),n.pending=s}function C_(n,s,a){if((a&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,a|=u,s.lanes=a,ml(n,a)}}var Qc={readContext:ln,use:qc,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useLayoutEffect:bt,useInsertionEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useSyncExternalStore:bt,useId:bt,useHostTransitionStatus:bt,useFormState:bt,useActionState:bt,useOptimistic:bt,useMemoCache:bt,useCacheRefresh:bt},x_={readContext:ln,use:qc,useCallback:function(n,s){return Sn().memoizedState=[n,s===void 0?null:s],n},useContext:ln,useEffect:f_,useImperativeHandle:function(n,s,a){a=a!=null?a.concat([n]):null,$c(4194308,4,g_.bind(null,s,n),a)},useLayoutEffect:function(n,s){return $c(4194308,4,n,s)},useInsertionEffect:function(n,s){$c(4,2,n,s)},useMemo:function(n,s){var a=Sn();s=s===void 0?null:s;var u=n();if(da){je(!0);try{n()}finally{je(!1)}}return a.memoizedState=[u,s],u},useReducer:function(n,s,a){var u=Sn();if(a!==void 0){var f=a(s);if(da){je(!0);try{a(s)}finally{je(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=gw.bind(null,ze,n),[u.memoizedState,n]},useRef:function(n){var s=Sn();return n={current:n},s.memoizedState=n},useState:function(n){n=qd(n);var s=n.queue,a=R_.bind(null,ze,s);return s.dispatch=a,[n.memoizedState,a]},useDebugValue:Gd,useDeferredValue:function(n,s){var a=Sn();return $d(a,n,s)},useTransition:function(){var n=qd(!1);return n=T_.bind(null,ze,n.queue,!0,!1),Sn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,a){var u=ze,f=Sn();if(Je){if(a===void 0)throw Error(i(407));a=a()}else{if(a=s(),ft===null)throw Error(i(349));(Xe&124)!==0||Xy(u,s,a)}f.memoizedState=a;var m={value:a,getSnapshot:s};return f.queue=m,f_(Zy.bind(null,u,m,n),[n]),u.flags|=2048,co(9,Gc(),Wy.bind(null,u,m,a,s),null),a},useId:function(){var n=Sn(),s=ft.identifierPrefix;if(Je){var a=di,u=fi;a=(u&~(1<<32-rt(u)-1)).toString(32)+a,s=""+s+"R"+a,a=Bc++,0<a&&(s+="H"+a.toString(32)),s+=""}else a=cw++,s=""+s+"r"+a.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:Qd,useFormState:o_,useActionState:o_,useOptimistic:function(n){var s=Sn();s.memoizedState=s.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Yd.bind(null,ze,!0,a),a.dispatch=s,[n,s]},useMemoCache:zd,useCacheRefresh:function(){return Sn().memoizedState=pw.bind(null,ze)}},D_={readContext:ln,use:qc,useCallback:__,useContext:ln,useEffect:d_,useImperativeHandle:y_,useInsertionEffect:m_,useLayoutEffect:p_,useMemo:v_,useReducer:Hc,useRef:h_,useState:function(){return Hc(gi)},useDebugValue:Gd,useDeferredValue:function(n,s){var a=Nt();return E_(a,ot.memoizedState,n,s)},useTransition:function(){var n=Hc(gi)[0],s=Nt().memoizedState;return[typeof n=="boolean"?n:Hl(n),s]},useSyncExternalStore:Yy,useId:b_,useHostTransitionStatus:Qd,useFormState:l_,useActionState:l_,useOptimistic:function(n,s){var a=Nt();return t_(a,ot,n,s)},useMemoCache:zd,useCacheRefresh:w_},yw={readContext:ln,use:qc,useCallback:__,useContext:ln,useEffect:d_,useImperativeHandle:y_,useInsertionEffect:m_,useLayoutEffect:p_,useMemo:v_,useReducer:Bd,useRef:h_,useState:function(){return Bd(gi)},useDebugValue:Gd,useDeferredValue:function(n,s){var a=Nt();return ot===null?$d(a,n,s):E_(a,ot.memoizedState,n,s)},useTransition:function(){var n=Bd(gi)[0],s=Nt().memoizedState;return[typeof n=="boolean"?n:Hl(n),s]},useSyncExternalStore:Yy,useId:b_,useHostTransitionStatus:Qd,useFormState:c_,useActionState:c_,useOptimistic:function(n,s){var a=Nt();return ot!==null?t_(a,ot,n,s):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:zd,useCacheRefresh:w_},ho=null,Kl=0;function Yc(n){var s=Kl;return Kl+=1,ho===null&&(ho=[]),Fy(ho,n,s)}function Ql(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Xc(n,s){throw s.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function N_(n){var s=n._init;return s(n._payload)}function O_(n){function s(j,P){if(n){var q=j.deletions;q===null?(j.deletions=[P],j.flags|=16):q.push(P)}}function a(j,P){if(!n)return null;for(;P!==null;)s(j,P),P=P.sibling;return null}function u(j){for(var P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function f(j,P){return j=hi(j,P),j.index=0,j.sibling=null,j}function m(j,P,q){return j.index=q,n?(q=j.alternate,q!==null?(q=q.index,q<P?(j.flags|=67108866,P):q):(j.flags|=67108866,P)):(j.flags|=1048576,P)}function E(j){return n&&j.alternate===null&&(j.flags|=67108866),j}function S(j,P,q,ne){return P===null||P.tag!==6?(P=gd(q,j.mode,ne),P.return=j,P):(P=f(P,q),P.return=j,P)}function C(j,P,q,ne){var ve=q.type;return ve===z?ee(j,P,q.props.children,ne,q.key):P!==null&&(P.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===I&&N_(ve)===P.type)?(P=f(P,q.props),Ql(P,q),P.return=j,P):(P=Oc(q.type,q.key,q.props,null,j.mode,ne),Ql(P,q),P.return=j,P)}function G(j,P,q,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==q.containerInfo||P.stateNode.implementation!==q.implementation?(P=yd(q,j.mode,ne),P.return=j,P):(P=f(P,q.children||[]),P.return=j,P)}function ee(j,P,q,ne,ve){return P===null||P.tag!==7?(P=sa(q,j.mode,ne,ve),P.return=j,P):(P=f(P,q),P.return=j,P)}function ie(j,P,q){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=gd(""+P,j.mode,q),P.return=j,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case A:return q=Oc(P.type,P.key,P.props,null,j.mode,q),Ql(q,P),q.return=j,q;case V:return P=yd(P,j.mode,q),P.return=j,P;case I:var ne=P._init;return P=ne(P._payload),ie(j,P,q)}if(Ae(P)||D(P))return P=sa(P,j.mode,q,null),P.return=j,P;if(typeof P.then=="function")return ie(j,Yc(P),q);if(P.$$typeof===re)return ie(j,Pc(j,P),q);Xc(j,P)}return null}function Y(j,P,q,ne){var ve=P!==null?P.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ve!==null?null:S(j,P,""+q,ne);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===ve?C(j,P,q,ne):null;case V:return q.key===ve?G(j,P,q,ne):null;case I:return ve=q._init,q=ve(q._payload),Y(j,P,q,ne)}if(Ae(q)||D(q))return ve!==null?null:ee(j,P,q,ne,null);if(typeof q.then=="function")return Y(j,P,Yc(q),ne);if(q.$$typeof===re)return Y(j,P,Pc(j,q),ne);Xc(j,q)}return null}function X(j,P,q,ne,ve){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return j=j.get(q)||null,S(P,j,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case A:return j=j.get(ne.key===null?q:ne.key)||null,C(P,j,ne,ve);case V:return j=j.get(ne.key===null?q:ne.key)||null,G(P,j,ne,ve);case I:var Be=ne._init;return ne=Be(ne._payload),X(j,P,q,ne,ve)}if(Ae(ne)||D(ne))return j=j.get(q)||null,ee(P,j,ne,ve,null);if(typeof ne.then=="function")return X(j,P,q,Yc(ne),ve);if(ne.$$typeof===re)return X(j,P,q,Pc(P,ne),ve);Xc(P,ne)}return null}function Me(j,P,q,ne){for(var ve=null,Be=null,we=P,De=P=0,Qt=null;we!==null&&De<q.length;De++){we.index>De?(Qt=we,we=null):Qt=we.sibling;var Ze=Y(j,we,q[De],ne);if(Ze===null){we===null&&(we=Qt);break}n&&we&&Ze.alternate===null&&s(j,we),P=m(Ze,P,De),Be===null?ve=Ze:Be.sibling=Ze,Be=Ze,we=Qt}if(De===q.length)return a(j,we),Je&&oa(j,De),ve;if(we===null){for(;De<q.length;De++)we=ie(j,q[De],ne),we!==null&&(P=m(we,P,De),Be===null?ve=we:Be.sibling=we,Be=we);return Je&&oa(j,De),ve}for(we=u(we);De<q.length;De++)Qt=X(we,j,De,q[De],ne),Qt!==null&&(n&&Qt.alternate!==null&&we.delete(Qt.key===null?De:Qt.key),P=m(Qt,P,De),Be===null?ve=Qt:Be.sibling=Qt,Be=Qt);return n&&we.forEach(function(vs){return s(j,vs)}),Je&&oa(j,De),ve}function xe(j,P,q,ne){if(q==null)throw Error(i(151));for(var ve=null,Be=null,we=P,De=P=0,Qt=null,Ze=q.next();we!==null&&!Ze.done;De++,Ze=q.next()){we.index>De?(Qt=we,we=null):Qt=we.sibling;var vs=Y(j,we,Ze.value,ne);if(vs===null){we===null&&(we=Qt);break}n&&we&&vs.alternate===null&&s(j,we),P=m(vs,P,De),Be===null?ve=vs:Be.sibling=vs,Be=vs,we=Qt}if(Ze.done)return a(j,we),Je&&oa(j,De),ve;if(we===null){for(;!Ze.done;De++,Ze=q.next())Ze=ie(j,Ze.value,ne),Ze!==null&&(P=m(Ze,P,De),Be===null?ve=Ze:Be.sibling=Ze,Be=Ze);return Je&&oa(j,De),ve}for(we=u(we);!Ze.done;De++,Ze=q.next())Ze=X(we,j,De,Ze.value,ne),Ze!==null&&(n&&Ze.alternate!==null&&we.delete(Ze.key===null?De:Ze.key),P=m(Ze,P,De),Be===null?ve=Ze:Be.sibling=Ze,Be=Ze);return n&&we.forEach(function(_1){return s(j,_1)}),Je&&oa(j,De),ve}function ut(j,P,q,ne){if(typeof q=="object"&&q!==null&&q.type===z&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:e:{for(var ve=q.key;P!==null;){if(P.key===ve){if(ve=q.type,ve===z){if(P.tag===7){a(j,P.sibling),ne=f(P,q.props.children),ne.return=j,j=ne;break e}}else if(P.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===I&&N_(ve)===P.type){a(j,P.sibling),ne=f(P,q.props),Ql(ne,q),ne.return=j,j=ne;break e}a(j,P);break}else s(j,P);P=P.sibling}q.type===z?(ne=sa(q.props.children,j.mode,ne,q.key),ne.return=j,j=ne):(ne=Oc(q.type,q.key,q.props,null,j.mode,ne),Ql(ne,q),ne.return=j,j=ne)}return E(j);case V:e:{for(ve=q.key;P!==null;){if(P.key===ve)if(P.tag===4&&P.stateNode.containerInfo===q.containerInfo&&P.stateNode.implementation===q.implementation){a(j,P.sibling),ne=f(P,q.children||[]),ne.return=j,j=ne;break e}else{a(j,P);break}else s(j,P);P=P.sibling}ne=yd(q,j.mode,ne),ne.return=j,j=ne}return E(j);case I:return ve=q._init,q=ve(q._payload),ut(j,P,q,ne)}if(Ae(q))return Me(j,P,q,ne);if(D(q)){if(ve=D(q),typeof ve!="function")throw Error(i(150));return q=ve.call(q),xe(j,P,q,ne)}if(typeof q.then=="function")return ut(j,P,Yc(q),ne);if(q.$$typeof===re)return ut(j,P,Pc(j,q),ne);Xc(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,P!==null&&P.tag===6?(a(j,P.sibling),ne=f(P,q),ne.return=j,j=ne):(a(j,P),ne=gd(q,j.mode,ne),ne.return=j,j=ne),E(j)):a(j,P)}return function(j,P,q,ne){try{Kl=0;var ve=ut(j,P,q,ne);return ho=null,ve}catch(we){if(we===Ul||we===Uc)throw we;var Be=On(29,we,null,j.mode);return Be.lanes=ne,Be.return=j,Be}finally{}}}var fo=O_(!0),V_=O_(!1),Wn=oe(null),Or=null;function is(n){var s=n.alternate;ue(Bt,Bt.current&1),ue(Wn,n),Or===null&&(s===null||oo.current!==null||s.memoizedState!==null)&&(Or=n)}function M_(n){if(n.tag===22){if(ue(Bt,Bt.current),ue(Wn,n),Or===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(Or=n)}}else ss()}function ss(){ue(Bt,Bt.current),ue(Wn,Wn.current)}function yi(n){de(Wn),Or===n&&(Or=null),de(Bt)}var Bt=oe(0);function Wc(n){for(var s=n;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||jm(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Xd(n,s,a,u){s=n.memoizedState,a=a(u,s),a=a==null?s:_({},s,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Wd={enqueueSetState:function(n,s,a){n=n._reactInternals;var u=Pn(),f=ts(u);f.payload=s,a!=null&&(f.callback=a),s=ns(n,f,u),s!==null&&(Ln(s,n,u),zl(s,n,u))},enqueueReplaceState:function(n,s,a){n=n._reactInternals;var u=Pn(),f=ts(u);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=ns(n,f,u),s!==null&&(Ln(s,n,u),zl(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var a=Pn(),u=ts(a);u.tag=2,s!=null&&(u.callback=s),s=ns(n,u,a),s!==null&&(Ln(s,n,a),zl(s,n,a))}};function k_(n,s,a,u,f,m,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,m,E):s.prototype&&s.prototype.isPureReactComponent?!Dl(a,u)||!Dl(f,m):!0}function P_(n,s,a,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==n&&Wd.enqueueReplaceState(s,s.state,null)}function ma(n,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(n=n.defaultProps){a===s&&(a=_({},a));for(var f in n)a[f]===void 0&&(a[f]=n[f])}return a}var Zc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function L_(n){Zc(n)}function U_(n){console.error(n)}function j_(n){Zc(n)}function Jc(n,s){try{var a=n.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function z_(n,s,a){try{var u=n.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Zd(n,s,a){return a=ts(a),a.tag=3,a.payload={element:null},a.callback=function(){Jc(n,s)},a}function F_(n){return n=ts(n),n.tag=3,n}function B_(n,s,a,u){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=u.value;n.payload=function(){return f(m)},n.callback=function(){z_(s,a,u)}}var E=a.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){z_(s,a,u),typeof f!="function"&&(hs===null?hs=new Set([this]):hs.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function _w(n,s,a,u,f){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&kl(s,a,f,!0),a=Wn.current,a!==null){switch(a.tag){case 13:return Or===null?Sm():a.alternate===null&&St===0&&(St=3),a.flags&=-257,a.flags|=65536,a.lanes=f,u===Id?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),bm(n,u,f)),!1;case 22:return a.flags|=65536,u===Id?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),bm(n,u,f)),!1}throw Error(i(435,a.tag))}return bm(n,u,f),Sm(),!1}if(Je)return s=Wn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Ed&&(n=Error(i(422),{cause:u}),Ml(Kn(n,a)))):(u!==Ed&&(s=Error(i(423),{cause:u}),Ml(Kn(s,a))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Kn(u,a),f=Zd(n.stateNode,u,f),Dd(n,f),St!==4&&(St=2)),!1;var m=Error(i(520),{cause:u});if(m=Kn(m,a),tu===null?tu=[m]:tu.push(m),St!==4&&(St=2),s===null)return!0;u=Kn(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,n=f&-f,a.lanes|=n,n=Zd(a.stateNode,u,n),Dd(a,n),!1;case 1:if(s=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(hs===null||!hs.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=F_(f),B_(f,n,a,u),Dd(a,f),!1}a=a.return}while(a!==null);return!1}var q_=Error(i(461)),$t=!1;function en(n,s,a,u){s.child=n===null?V_(s,null,a,u):fo(s,n.child,a,u)}function H_(n,s,a,u,f){a=a.render;var m=s.ref;if("ref"in u){var E={};for(var S in u)S!=="ref"&&(E[S]=u[S])}else E=u;return ha(s),u=kd(n,s,a,E,m,f),S=Pd(),n!==null&&!$t?(Ld(n,s,f),_i(n,s,f)):(Je&&S&&_d(s),s.flags|=1,en(n,s,u,f),s.child)}function G_(n,s,a,u,f){if(n===null){var m=a.type;return typeof m=="function"&&!pd(m)&&m.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=m,$_(n,s,m,u,f)):(n=Oc(a.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(m=n.child,!am(n,f)){var E=m.memoizedProps;if(a=a.compare,a=a!==null?a:Dl,a(E,u)&&n.ref===s.ref)return _i(n,s,f)}return s.flags|=1,n=hi(m,u),n.ref=s.ref,n.return=s,s.child=n}function $_(n,s,a,u,f){if(n!==null){var m=n.memoizedProps;if(Dl(m,u)&&n.ref===s.ref)if($t=!1,s.pendingProps=u=m,am(n,f))(n.flags&131072)!==0&&($t=!0);else return s.lanes=n.lanes,_i(n,s,f)}return Jd(n,s,a,u,f)}function K_(n,s,a){var u=s.pendingProps,f=u.children,m=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=m!==null?m.baseLanes|a:a,n!==null){for(f=s.child=n.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;s.childLanes=m&~u}else s.childLanes=0,s.child=null;return Q_(n,s,u,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Lc(s,m!==null?m.cachePool:null),m!==null?$y(s,m):Od(),M_(s);else return s.lanes=s.childLanes=536870912,Q_(n,s,m!==null?m.baseLanes|a:a,a)}else m!==null?(Lc(s,m.cachePool),$y(s,m),ss(),s.memoizedState=null):(n!==null&&Lc(s,null),Od(),ss());return en(n,s,f,a),s.child}function Q_(n,s,a,u){var f=Rd();return f=f===null?null:{parent:Ft._currentValue,pool:f},s.memoizedState={baseLanes:a,cachePool:f},n!==null&&Lc(s,null),Od(),M_(s),n!==null&&kl(n,s,u,!0),null}function eh(n,s){var a=s.ref;if(a===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(n===null||n.ref!==a)&&(s.flags|=4194816)}}function Jd(n,s,a,u,f){return ha(s),a=kd(n,s,a,u,void 0,f),u=Pd(),n!==null&&!$t?(Ld(n,s,f),_i(n,s,f)):(Je&&u&&_d(s),s.flags|=1,en(n,s,a,f),s.child)}function Y_(n,s,a,u,f,m){return ha(s),s.updateQueue=null,a=Qy(s,u,a,f),Ky(n),u=Pd(),n!==null&&!$t?(Ld(n,s,m),_i(n,s,m)):(Je&&u&&_d(s),s.flags|=1,en(n,s,a,m),s.child)}function X_(n,s,a,u,f){if(ha(s),s.stateNode===null){var m=no,E=a.contextType;typeof E=="object"&&E!==null&&(m=ln(E)),m=new a(u,m),s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Wd,s.stateNode=m,m._reactInternals=s,m=s.stateNode,m.props=u,m.state=s.memoizedState,m.refs={},Cd(s),E=a.contextType,m.context=typeof E=="object"&&E!==null?ln(E):no,m.state=s.memoizedState,E=a.getDerivedStateFromProps,typeof E=="function"&&(Xd(s,a,E,u),m.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(E=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),E!==m.state&&Wd.enqueueReplaceState(m,m.state,null),Bl(s,u,m,f),Fl(),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){m=s.stateNode;var S=s.memoizedProps,C=ma(a,S);m.props=C;var G=m.context,ee=a.contextType;E=no,typeof ee=="object"&&ee!==null&&(E=ln(ee));var ie=a.getDerivedStateFromProps;ee=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,ee||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(S||G!==E)&&P_(s,m,u,E),es=!1;var Y=s.memoizedState;m.state=Y,Bl(s,u,m,f),Fl(),G=s.memoizedState,S||Y!==G||es?(typeof ie=="function"&&(Xd(s,a,ie,u),G=s.memoizedState),(C=es||k_(s,a,C,u,Y,G,E))?(ee||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(s.flags|=4194308)):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=G),m.props=u,m.state=G,m.context=E,u=C):(typeof m.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{m=s.stateNode,xd(n,s),E=s.memoizedProps,ee=ma(a,E),m.props=ee,ie=s.pendingProps,Y=m.context,G=a.contextType,C=no,typeof G=="object"&&G!==null&&(C=ln(G)),S=a.getDerivedStateFromProps,(G=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(E!==ie||Y!==C)&&P_(s,m,u,C),es=!1,Y=s.memoizedState,m.state=Y,Bl(s,u,m,f),Fl();var X=s.memoizedState;E!==ie||Y!==X||es||n!==null&&n.dependencies!==null&&kc(n.dependencies)?(typeof S=="function"&&(Xd(s,a,S,u),X=s.memoizedState),(ee=es||k_(s,a,ee,u,Y,X,C)||n!==null&&n.dependencies!==null&&kc(n.dependencies))?(G||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(u,X,C),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(u,X,C)),typeof m.componentDidUpdate=="function"&&(s.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=X),m.props=u,m.state=X,m.context=C,u=ee):(typeof m.componentDidUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Y===n.memoizedState||(s.flags|=1024),u=!1)}return m=u,eh(n,s),u=(s.flags&128)!==0,m||u?(m=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:m.render(),s.flags|=1,n!==null&&u?(s.child=fo(s,n.child,null,f),s.child=fo(s,null,a,f)):en(n,s,a,f),s.memoizedState=m.state,n=s.child):n=_i(n,s,f),n}function W_(n,s,a,u){return Vl(),s.flags|=256,en(n,s,a,u),s.child}var em={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tm(n){return{baseLanes:n,cachePool:Uy()}}function nm(n,s,a){return n=n!==null?n.childLanes&~a:0,s&&(n|=Zn),n}function Z_(n,s,a){var u=s.pendingProps,f=!1,m=(s.flags&128)!==0,E;if((E=m)||(E=n!==null&&n.memoizedState===null?!1:(Bt.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Je){if(f?is(s):ss(),Je){var S=Tt,C;if(C=S){e:{for(C=S,S=Nr;C.nodeType!==8;){if(!S){S=null;break e}if(C=ur(C.nextSibling),C===null){S=null;break e}}S=C}S!==null?(s.memoizedState={dehydrated:S,treeContext:aa!==null?{id:fi,overflow:di}:null,retryLane:536870912,hydrationErrors:null},C=On(18,null,null,0),C.stateNode=S,C.return=s,s.child=C,_n=s,Tt=null,C=!0):C=!1}C||ua(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return jm(S)?s.lanes=32:s.lanes=536870912,null;yi(s)}return S=u.children,u=u.fallback,f?(ss(),f=s.mode,S=th({mode:"hidden",children:S},f),u=sa(u,f,a,null),S.return=s,u.return=s,S.sibling=u,s.child=S,f=s.child,f.memoizedState=tm(a),f.childLanes=nm(n,E,a),s.memoizedState=em,u):(is(s),rm(s,S))}if(C=n.memoizedState,C!==null&&(S=C.dehydrated,S!==null)){if(m)s.flags&256?(is(s),s.flags&=-257,s=im(n,s,a)):s.memoizedState!==null?(ss(),s.child=n.child,s.flags|=128,s=null):(ss(),f=u.fallback,S=s.mode,u=th({mode:"visible",children:u.children},S),f=sa(f,S,a,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,fo(s,n.child,null,a),u=s.child,u.memoizedState=tm(a),u.childLanes=nm(n,E,a),s.memoizedState=em,s=f);else if(is(s),jm(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var G=E.dgst;E=G,u=Error(i(419)),u.stack="",u.digest=E,Ml({value:u,source:null,stack:null}),s=im(n,s,a)}else if($t||kl(n,s,a,!1),E=(a&n.childLanes)!==0,$t||E){if(E=ft,E!==null&&(u=a&-a,u=(u&42)!==0?1:$i(u),u=(u&(E.suspendedLanes|a))!==0?0:u,u!==0&&u!==C.retryLane))throw C.retryLane=u,to(n,u),Ln(E,n,u),q_;S.data==="$?"||Sm(),s=im(n,s,a)}else S.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=C.treeContext,Tt=ur(S.nextSibling),_n=s,Je=!0,la=null,Nr=!1,n!==null&&(Yn[Xn++]=fi,Yn[Xn++]=di,Yn[Xn++]=aa,fi=n.id,di=n.overflow,aa=s),s=rm(s,u.children),s.flags|=4096);return s}return f?(ss(),f=u.fallback,S=s.mode,C=n.child,G=C.sibling,u=hi(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,G!==null?f=hi(G,f):(f=sa(f,S,a,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,S=n.child.memoizedState,S===null?S=tm(a):(C=S.cachePool,C!==null?(G=Ft._currentValue,C=C.parent!==G?{parent:G,pool:G}:C):C=Uy(),S={baseLanes:S.baseLanes|a,cachePool:C}),f.memoizedState=S,f.childLanes=nm(n,E,a),s.memoizedState=em,u):(is(s),a=n.child,n=a.sibling,a=hi(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=a,s.memoizedState=null,a)}function rm(n,s){return s=th({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function th(n,s){return n=On(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function im(n,s,a){return fo(s,n.child,null,a),n=rm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function J_(n,s,a){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Sd(n.return,s,a)}function sm(n,s,a,u,f){var m=n.memoizedState;m===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f}:(m.isBackwards=s,m.rendering=null,m.renderingStartTime=0,m.last=u,m.tail=a,m.tailMode=f)}function ev(n,s,a){var u=s.pendingProps,f=u.revealOrder,m=u.tail;if(en(n,s,u.children,a),u=Bt.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&J_(n,a,s);else if(n.tag===19)J_(n,a,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(ue(Bt,u),f){case"forwards":for(a=s.child,f=null;a!==null;)n=a.alternate,n!==null&&Wc(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),sm(s,!1,f,a,m);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&Wc(n)===null){s.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}sm(s,!0,a,null,m);break;case"together":sm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function _i(n,s,a){if(n!==null&&(s.dependencies=n.dependencies),cs|=s.lanes,(a&s.childLanes)===0)if(n!==null){if(kl(n,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,a=hi(n,n.pendingProps),s.child=a,a.return=s;n.sibling!==null;)n=n.sibling,a=a.sibling=hi(n,n.pendingProps),a.return=s;a.sibling=null}return s.child}function am(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&kc(n)))}function vw(n,s,a){switch(s.tag){case 3:nt(s,s.stateNode.containerInfo),Ji(s,Ft,n.memoizedState.cache),Vl();break;case 27:case 5:zn(s);break;case 4:nt(s,s.stateNode.containerInfo);break;case 10:Ji(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(is(s),s.flags|=128,null):(a&s.child.childLanes)!==0?Z_(n,s,a):(is(s),n=_i(n,s,a),n!==null?n.sibling:null);is(s);break;case 19:var f=(n.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(kl(n,s,a,!1),u=(a&s.childLanes)!==0),f){if(u)return ev(n,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ue(Bt,Bt.current),u)break;return null;case 22:case 23:return s.lanes=0,K_(n,s,a);case 24:Ji(s,Ft,n.memoizedState.cache)}return _i(n,s,a)}function tv(n,s,a){if(n!==null)if(n.memoizedProps!==s.pendingProps)$t=!0;else{if(!am(n,a)&&(s.flags&128)===0)return $t=!1,vw(n,s,a);$t=(n.flags&131072)!==0}else $t=!1,Je&&(s.flags&1048576)!==0&&Ny(s,Mc,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")pd(u)?(n=ma(u,n),s.tag=1,s=X_(null,s,u,n,a)):(s.tag=0,s=Jd(null,s,u,n,a));else{if(u!=null){if(f=u.$$typeof,f===_e){s.tag=11,s=H_(null,s,u,n,a);break e}else if(f===k){s.tag=14,s=G_(null,s,u,n,a);break e}}throw s=Re(u)||u,Error(i(306,s,""))}}return s;case 0:return Jd(n,s,s.type,s.pendingProps,a);case 1:return u=s.type,f=ma(u,s.pendingProps),X_(n,s,u,f,a);case 3:e:{if(nt(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var m=s.memoizedState;f=m.element,xd(n,s),Bl(s,u,null,a);var E=s.memoizedState;if(u=E.cache,Ji(s,Ft,u),u!==m.cache&&Ad(s,[Ft],a,!0),Fl(),u=E.element,m.isDehydrated)if(m={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=m,s.memoizedState=m,s.flags&256){s=W_(n,s,u,a);break e}else if(u!==f){f=Kn(Error(i(424)),s),Ml(f),s=W_(n,s,u,a);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Tt=ur(n.firstChild),_n=s,Je=!0,la=null,Nr=!0,a=V_(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vl(),u===f){s=_i(n,s,a);break e}en(n,s,u,a)}s=s.child}return s;case 26:return eh(n,s),n===null?(a=sE(s.type,null,s.pendingProps,null))?s.memoizedState=a:Je||(a=s.type,n=s.pendingProps,u=ph(Ve.current).createElement(a),u[Ut]=s,u[Ct]=n,nn(u,a,n),At(u),s.stateNode=u):s.memoizedState=sE(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return zn(s),n===null&&Je&&(u=s.stateNode=nE(s.type,s.pendingProps,Ve.current),_n=s,Nr=!0,f=Tt,ms(s.type)?(zm=f,Tt=ur(u.firstChild)):Tt=f),en(n,s,s.pendingProps.children,a),eh(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Je&&((f=u=Tt)&&(u=Kw(u,s.type,s.pendingProps,Nr),u!==null?(s.stateNode=u,_n=s,Tt=ur(u.firstChild),Nr=!1,f=!0):f=!1),f||ua(s)),zn(s),f=s.type,m=s.pendingProps,E=n!==null?n.memoizedProps:null,u=m.children,Pm(f,m)?u=null:E!==null&&Pm(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=kd(n,s,hw,null,null,a),cu._currentValue=f),eh(n,s),en(n,s,u,a),s.child;case 6:return n===null&&Je&&((n=a=Tt)&&(a=Qw(a,s.pendingProps,Nr),a!==null?(s.stateNode=a,_n=s,Tt=null,n=!0):n=!1),n||ua(s)),null;case 13:return Z_(n,s,a);case 4:return nt(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=fo(s,null,u,a):en(n,s,u,a),s.child;case 11:return H_(n,s,s.type,s.pendingProps,a);case 7:return en(n,s,s.pendingProps,a),s.child;case 8:return en(n,s,s.pendingProps.children,a),s.child;case 12:return en(n,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,Ji(s,s.type,u.value),en(n,s,u.children,a),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,ha(s),f=ln(f),u=u(f),s.flags|=1,en(n,s,u,a),s.child;case 14:return G_(n,s,s.type,s.pendingProps,a);case 15:return $_(n,s,s.type,s.pendingProps,a);case 19:return ev(n,s,a);case 31:return u=s.pendingProps,a=s.mode,u={mode:u.mode,children:u.children},n===null?(a=th(u,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=hi(n.child,u),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return K_(n,s,a);case 24:return ha(s),u=ln(Ft),n===null?(f=Rd(),f===null&&(f=ft,m=bd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),s.memoizedState={parent:u,cache:f},Cd(s),Ji(s,Ft,f)):((n.lanes&a)!==0&&(xd(n,s),Bl(s,null,null,a),Fl()),f=n.memoizedState,m=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Ji(s,Ft,u)):(u=m.cache,Ji(s,Ft,u),u!==f.cache&&Ad(s,[Ft],a,!0))),en(n,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function vi(n){n.flags|=4}function nv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!cE(s)){if(s=Wn.current,s!==null&&((Xe&4194048)===Xe?Or!==null:(Xe&62914560)!==Xe&&(Xe&536870912)===0||s!==Or))throw jl=Id,jy;n.flags|=8192}}function nh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?fl():536870912,n.lanes|=s,yo|=s)}function Yl(n,s){if(!Je)switch(n.tailMode){case"hidden":s=n.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function _t(n){var s=n.alternate!==null&&n.alternate.child===n.child,a=0,u=0;if(s)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=a,s}function Ew(n,s,a){var u=s.pendingProps;switch(vd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(s),null;case 1:return _t(s),null;case 3:return a=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),pi(Ft),En(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(Ol(s)?vi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,My())),_t(s),null;case 26:return a=s.memoizedState,n===null?(vi(s),a!==null?(_t(s),nv(s,a)):(_t(s),s.flags&=-16777217)):a?a!==n.memoizedState?(vi(s),_t(s),nv(s,a)):(_t(s),s.flags&=-16777217):(n.memoizedProps!==u&&vi(s),_t(s),s.flags&=-16777217),null;case 27:nr(s),a=Ve.current;var f=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==u&&vi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return _t(s),null}n=Ie.current,Ol(s)?Oy(s):(n=nE(f,u,a),s.stateNode=n,vi(s))}return _t(s),null;case 5:if(nr(s),a=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&vi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return _t(s),null}if(n=Ie.current,Ol(s))Oy(s);else{switch(f=ph(Ve.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(a,{is:u.is}):f.createElement(a)}}n[Ut]=s,n[Ct]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=n;e:switch(nn(n,a,u),a){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&vi(s)}}return _t(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&vi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=Ve.current,Ol(s)){if(n=s.stateNode,a=s.memoizedProps,u=null,f=_n,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[Ut]=s,n=!!(n.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||Yv(n.nodeValue,a)),n||ua(s)}else n=ph(n).createTextNode(u),n[Ut]=s,s.stateNode=n}return _t(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ol(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Ut]=s}else Vl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_t(s),f=!1}else f=My(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(yi(s),s):(yi(s),null)}if(yi(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=u!==null,n=n!==null&&n.memoizedState!==null,a){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var m=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==f&&(u.flags|=2048)}return a!==n&&a&&(s.child.flags|=8192),nh(s,s.updateQueue),_t(s),null;case 4:return En(),n===null&&Nm(s.stateNode.containerInfo),_t(s),null;case 10:return pi(s.type),_t(s),null;case 19:if(de(Bt),f=s.memoizedState,f===null)return _t(s),null;if(u=(s.flags&128)!==0,m=f.rendering,m===null)if(u)Yl(f,!1);else{if(St!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(m=Wc(n),m!==null){for(s.flags|=128,Yl(f,!1),n=m.updateQueue,s.updateQueue=n,nh(s,n),s.subtreeFlags=0,n=a,a=s.child;a!==null;)Dy(a,n),a=a.sibling;return ue(Bt,Bt.current&1|2),s.child}n=n.sibling}f.tail!==null&&Tn()>sh&&(s.flags|=128,u=!0,Yl(f,!1),s.lanes=4194304)}else{if(!u)if(n=Wc(m),n!==null){if(s.flags|=128,u=!0,n=n.updateQueue,s.updateQueue=n,nh(s,n),Yl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Je)return _t(s),null}else 2*Tn()-f.renderingStartTime>sh&&a!==536870912&&(s.flags|=128,u=!0,Yl(f,!1),s.lanes=4194304);f.isBackwards?(m.sibling=s.child,s.child=m):(n=f.last,n!==null?n.sibling=m:s.child=m,f.last=m)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Tn(),s.sibling=null,n=Bt.current,ue(Bt,u?n&1|2:n&1),s):(_t(s),null);case 22:case 23:return yi(s),Vd(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(_t(s),s.subtreeFlags&6&&(s.flags|=8192)):_t(s),a=s.updateQueue,a!==null&&nh(s,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),n!==null&&de(fa),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),pi(Ft),_t(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function Tw(n,s){switch(vd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return pi(Ft),En(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return nr(s),null;case 13:if(yi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Vl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return de(Bt),null;case 4:return En(),null;case 10:return pi(s.type),null;case 22:case 23:return yi(s),Vd(),n!==null&&de(fa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return pi(Ft),null;case 25:return null;default:return null}}function rv(n,s){switch(vd(s),s.tag){case 3:pi(Ft),En();break;case 26:case 27:case 5:nr(s);break;case 4:En();break;case 13:yi(s);break;case 19:de(Bt);break;case 10:pi(s.type);break;case 22:case 23:yi(s),Vd(),n!==null&&de(fa);break;case 24:pi(Ft)}}function Xl(n,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&n)===n){u=void 0;var m=a.create,E=a.inst;u=m(),E.destroy=u}a=a.next}while(a!==f)}}catch(S){ct(s,s.return,S)}}function as(n,s,a){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var m=f.next;u=m;do{if((u.tag&n)===n){var E=u.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,f=s;var C=a,G=S;try{G()}catch(ee){ct(f,C,ee)}}}u=u.next}while(u!==m)}}catch(ee){ct(s,s.return,ee)}}function iv(n){var s=n.updateQueue;if(s!==null){var a=n.stateNode;try{Gy(s,a)}catch(u){ct(n,n.return,u)}}}function sv(n,s,a){a.props=ma(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(u){ct(n,s,u)}}function Wl(n,s){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof a=="function"?n.refCleanup=a(u):a.current=u}}catch(f){ct(n,s,f)}}function Vr(n,s){var a=n.ref,u=n.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(f){ct(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ct(n,s,f)}else a.current=null}function av(n){var s=n.type,a=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(f){ct(n,n.return,f)}}function om(n,s,a){try{var u=n.stateNode;Bw(u,n.type,a,s),u[Ct]=s}catch(f){ct(n,n.return,f)}}function ov(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&ms(n.type)||n.tag===4}function lm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||ov(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&ms(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function um(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(n),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=mh));else if(u!==4&&(u===27&&ms(n.type)&&(a=n.stateNode,s=null),n=n.child,n!==null))for(um(n,s,a),n=n.sibling;n!==null;)um(n,s,a),n=n.sibling}function rh(n,s,a){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?a.insertBefore(n,s):a.appendChild(n);else if(u!==4&&(u===27&&ms(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(rh(n,s,a),n=n.sibling;n!==null;)rh(n,s,a),n=n.sibling}function lv(n){var s=n.stateNode,a=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);nn(s,u,a),s[Ut]=n,s[Ct]=a}catch(m){ct(n,n.return,m)}}var Ei=!1,wt=!1,cm=!1,uv=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function Sw(n,s){if(n=n.containerInfo,Mm=Th,n=Ey(n),ld(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,m=u.focusNode;u=u.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var E=0,S=-1,C=-1,G=0,ee=0,ie=n,Y=null;t:for(;;){for(var X;ie!==a||f!==0&&ie.nodeType!==3||(S=E+f),ie!==m||u!==0&&ie.nodeType!==3||(C=E+u),ie.nodeType===3&&(E+=ie.nodeValue.length),(X=ie.firstChild)!==null;)Y=ie,ie=X;for(;;){if(ie===n)break t;if(Y===a&&++G===f&&(S=E),Y===m&&++ee===u&&(C=E),(X=ie.nextSibling)!==null)break;ie=Y,Y=ie.parentNode}ie=X}a=S===-1||C===-1?null:{start:S,end:C}}else a=null}a=a||{start:0,end:0}}else a=null;for(km={focusedElem:n,selectionRange:a},Th=!1,Kt=s;Kt!==null;)if(s=Kt,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,Kt=n;else for(;Kt!==null;){switch(s=Kt,m=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&m!==null){n=void 0,a=s,f=m.memoizedProps,m=m.memoizedState,u=a.stateNode;try{var Me=ma(a.type,f,a.elementType===a.type);n=u.getSnapshotBeforeUpdate(Me,m),u.__reactInternalSnapshotBeforeUpdate=n}catch(xe){ct(a,a.return,xe)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,a=n.nodeType,a===9)Um(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Um(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,Kt=n;break}Kt=s.return}}function cv(n,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:os(n,a),u&4&&Xl(5,a);break;case 1:if(os(n,a),u&4)if(n=a.stateNode,s===null)try{n.componentDidMount()}catch(E){ct(a,a.return,E)}else{var f=ma(a.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){ct(a,a.return,E)}}u&64&&iv(a),u&512&&Wl(a,a.return);break;case 3:if(os(n,a),u&64&&(n=a.updateQueue,n!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{Gy(n,s)}catch(E){ct(a,a.return,E)}}break;case 27:s===null&&u&4&&lv(a);case 26:case 5:os(n,a),s===null&&u&4&&av(a),u&512&&Wl(a,a.return);break;case 12:os(n,a);break;case 13:os(n,a),u&4&&dv(n,a),u&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=Nw.bind(null,a),Yw(n,a))));break;case 22:if(u=a.memoizedState!==null||Ei,!u){s=s!==null&&s.memoizedState!==null||wt,f=Ei;var m=wt;Ei=u,(wt=s)&&!m?ls(n,a,(a.subtreeFlags&8772)!==0):os(n,a),Ei=f,wt=m}break;case 30:break;default:os(n,a)}}function hv(n){var s=n.alternate;s!==null&&(n.alternate=null,hv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Yi(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var gt=null,An=!1;function Ti(n,s,a){for(a=a.child;a!==null;)fv(n,s,a),a=a.sibling}function fv(n,s,a){if(be&&typeof be.onCommitFiberUnmount=="function")try{be.onCommitFiberUnmount(me,a)}catch{}switch(a.tag){case 26:wt||Vr(a,s),Ti(n,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:wt||Vr(a,s);var u=gt,f=An;ms(a.type)&&(gt=a.stateNode,An=!1),Ti(n,s,a),au(a.stateNode),gt=u,An=f;break;case 5:wt||Vr(a,s);case 6:if(u=gt,f=An,gt=null,Ti(n,s,a),gt=u,An=f,gt!==null)if(An)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(a.stateNode)}catch(m){ct(a,s,m)}else try{gt.removeChild(a.stateNode)}catch(m){ct(a,s,m)}break;case 18:gt!==null&&(An?(n=gt,eE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),mu(n)):eE(gt,a.stateNode));break;case 4:u=gt,f=An,gt=a.stateNode.containerInfo,An=!0,Ti(n,s,a),gt=u,An=f;break;case 0:case 11:case 14:case 15:wt||as(2,a,s),wt||as(4,a,s),Ti(n,s,a);break;case 1:wt||(Vr(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&sv(a,s,u)),Ti(n,s,a);break;case 21:Ti(n,s,a);break;case 22:wt=(u=wt)||a.memoizedState!==null,Ti(n,s,a),wt=u;break;default:Ti(n,s,a)}}function dv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{mu(n)}catch(a){ct(s,s.return,a)}}function Aw(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new uv),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new uv),s;default:throw Error(i(435,n.tag))}}function hm(n,s){var a=Aw(n);s.forEach(function(u){var f=Ow.bind(null,n,u);a.has(u)||(a.add(u),u.then(f,f))})}function Vn(n,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u],m=n,E=s,S=E;e:for(;S!==null;){switch(S.tag){case 27:if(ms(S.type)){gt=S.stateNode,An=!1;break e}break;case 5:gt=S.stateNode,An=!1;break e;case 3:case 4:gt=S.stateNode.containerInfo,An=!0;break e}S=S.return}if(gt===null)throw Error(i(160));fv(m,E,f),gt=null,An=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)mv(s,n),s=s.sibling}var lr=null;function mv(n,s){var a=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Vn(s,n),Mn(n),u&4&&(as(3,n,n.return),Xl(3,n),as(5,n,n.return));break;case 1:Vn(s,n),Mn(n),u&512&&(wt||a===null||Vr(a,a.return)),u&64&&Ei&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var f=lr;if(Vn(s,n),Mn(n),u&512&&(wt||a===null||Vr(a,a.return)),u&4){var m=a!==null?a.memoizedState:null;if(u=n.memoizedState,a===null)if(u===null)if(n.stateNode===null){e:{u=n.type,a=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":m=f.getElementsByTagName("title")[0],(!m||m[qs]||m[Ut]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(u),f.head.insertBefore(m,f.querySelector("head > title"))),nn(m,u,a),m[Ut]=n,At(m),u=m;break e;case"link":var E=lE("link","href",f).get(u+(a.href||""));if(E){for(var S=0;S<E.length;S++)if(m=E[S],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){E.splice(S,1);break t}}m=f.createElement(u),nn(m,u,a),f.head.appendChild(m);break;case"meta":if(E=lE("meta","content",f).get(u+(a.content||""))){for(S=0;S<E.length;S++)if(m=E[S],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){E.splice(S,1);break t}}m=f.createElement(u),nn(m,u,a),f.head.appendChild(m);break;default:throw Error(i(468,u))}m[Ut]=n,At(m),u=m}n.stateNode=u}else uE(f,n.type,n.stateNode);else n.stateNode=oE(f,u,n.memoizedProps);else m!==u?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,u===null?uE(f,n.type,n.stateNode):oE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&om(n,n.memoizedProps,a.memoizedProps)}break;case 27:Vn(s,n),Mn(n),u&512&&(wt||a===null||Vr(a,a.return)),a!==null&&u&4&&om(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Vn(s,n),Mn(n),u&512&&(wt||a===null||Vr(a,a.return)),n.flags&32){f=n.stateNode;try{qn(f,"")}catch(X){ct(n,n.return,X)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,om(n,f,a!==null?a.memoizedProps:f)),u&1024&&(cm=!0);break;case 6:if(Vn(s,n),Mn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,a=n.stateNode;try{a.nodeValue=u}catch(X){ct(n,n.return,X)}}break;case 3:if(_h=null,f=lr,lr=gh(s.containerInfo),Vn(s,n),lr=f,Mn(n),u&4&&a!==null&&a.memoizedState.isDehydrated)try{mu(s.containerInfo)}catch(X){ct(n,n.return,X)}cm&&(cm=!1,pv(n));break;case 4:u=lr,lr=gh(n.stateNode.containerInfo),Vn(s,n),Mn(n),lr=u;break;case 12:Vn(s,n),Mn(n);break;case 13:Vn(s,n),Mn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ym=Tn()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,hm(n,u)));break;case 22:f=n.memoizedState!==null;var C=a!==null&&a.memoizedState!==null,G=Ei,ee=wt;if(Ei=G||f,wt=ee||C,Vn(s,n),wt=ee,Ei=G,Mn(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||C||Ei||wt||pa(n)),a=null,s=n;;){if(s.tag===5||s.tag===26){if(a===null){C=a=s;try{if(m=C.stateNode,f)E=m.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=C.stateNode;var ie=C.memoizedProps.style,Y=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;S.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(X){ct(C,C.return,X)}}}else if(s.tag===6){if(a===null){C=s;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(X){ct(C,C.return,X)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,hm(n,a))));break;case 19:Vn(s,n),Mn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,hm(n,u)));break;case 30:break;case 21:break;default:Vn(s,n),Mn(n)}}function Mn(n){var s=n.flags;if(s&2){try{for(var a,u=n.return;u!==null;){if(ov(u)){a=u;break}u=u.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var f=a.stateNode,m=lm(n);rh(n,m,f);break;case 5:var E=a.stateNode;a.flags&32&&(qn(E,""),a.flags&=-33);var S=lm(n);rh(n,S,E);break;case 3:case 4:var C=a.stateNode.containerInfo,G=lm(n);um(n,G,C);break;default:throw Error(i(161))}}catch(ee){ct(n,n.return,ee)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function pv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;pv(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function os(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)cv(n,s.alternate,s),s=s.sibling}function pa(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:as(4,s,s.return),pa(s);break;case 1:Vr(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&sv(s,s.return,a),pa(s);break;case 27:au(s.stateNode);case 26:case 5:Vr(s,s.return),pa(s);break;case 22:s.memoizedState===null&&pa(s);break;case 30:pa(s);break;default:pa(s)}n=n.sibling}}function ls(n,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,m=s,E=m.flags;switch(m.tag){case 0:case 11:case 15:ls(f,m,a),Xl(4,m);break;case 1:if(ls(f,m,a),u=m,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){ct(u,u.return,G)}if(u=m,f=u.updateQueue,f!==null){var S=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)Hy(C[f],S)}catch(G){ct(u,u.return,G)}}a&&E&64&&iv(m),Wl(m,m.return);break;case 27:lv(m);case 26:case 5:ls(f,m,a),a&&u===null&&E&4&&av(m),Wl(m,m.return);break;case 12:ls(f,m,a);break;case 13:ls(f,m,a),a&&E&4&&dv(f,m);break;case 22:m.memoizedState===null&&ls(f,m,a),Wl(m,m.return);break;case 30:break;default:ls(f,m,a)}s=s.sibling}}function fm(n,s){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&Pl(a))}function dm(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Pl(n))}function Mr(n,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)gv(n,s,a,u),s=s.sibling}function gv(n,s,a,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Mr(n,s,a,u),f&2048&&Xl(9,s);break;case 1:Mr(n,s,a,u);break;case 3:Mr(n,s,a,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Pl(n)));break;case 12:if(f&2048){Mr(n,s,a,u),n=s.stateNode;try{var m=s.memoizedProps,E=m.id,S=m.onPostCommit;typeof S=="function"&&S(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){ct(s,s.return,C)}}else Mr(n,s,a,u);break;case 13:Mr(n,s,a,u);break;case 23:break;case 22:m=s.stateNode,E=s.alternate,s.memoizedState!==null?m._visibility&2?Mr(n,s,a,u):Zl(n,s):m._visibility&2?Mr(n,s,a,u):(m._visibility|=2,mo(n,s,a,u,(s.subtreeFlags&10256)!==0)),f&2048&&fm(E,s);break;case 24:Mr(n,s,a,u),f&2048&&dm(s.alternate,s);break;default:Mr(n,s,a,u)}}function mo(n,s,a,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var m=n,E=s,S=a,C=u,G=E.flags;switch(E.tag){case 0:case 11:case 15:mo(m,E,S,C,f),Xl(8,E);break;case 23:break;case 22:var ee=E.stateNode;E.memoizedState!==null?ee._visibility&2?mo(m,E,S,C,f):Zl(m,E):(ee._visibility|=2,mo(m,E,S,C,f)),f&&G&2048&&fm(E.alternate,E);break;case 24:mo(m,E,S,C,f),f&&G&2048&&dm(E.alternate,E);break;default:mo(m,E,S,C,f)}s=s.sibling}}function Zl(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=n,u=s,f=u.flags;switch(u.tag){case 22:Zl(a,u),f&2048&&fm(u.alternate,u);break;case 24:Zl(a,u),f&2048&&dm(u.alternate,u);break;default:Zl(a,u)}s=s.sibling}}var Jl=8192;function po(n){if(n.subtreeFlags&Jl)for(n=n.child;n!==null;)yv(n),n=n.sibling}function yv(n){switch(n.tag){case 26:po(n),n.flags&Jl&&n.memoizedState!==null&&l1(lr,n.memoizedState,n.memoizedProps);break;case 5:po(n);break;case 3:case 4:var s=lr;lr=gh(n.stateNode.containerInfo),po(n),lr=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=Jl,Jl=16777216,po(n),Jl=s):po(n));break;default:po(n)}}function _v(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function eu(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Kt=u,Ev(u,n)}_v(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)vv(n),n=n.sibling}function vv(n){switch(n.tag){case 0:case 11:case 15:eu(n),n.flags&2048&&as(9,n,n.return);break;case 3:eu(n);break;case 12:eu(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,ih(n)):eu(n);break;default:eu(n)}}function ih(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Kt=u,Ev(u,n)}_v(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:as(8,s,s.return),ih(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,ih(s));break;default:ih(s)}n=n.sibling}}function Ev(n,s){for(;Kt!==null;){var a=Kt;switch(a.tag){case 0:case 11:case 15:as(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Pl(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Kt=u;else e:for(a=n;Kt!==null;){u=Kt;var f=u.sibling,m=u.return;if(hv(u),u===a){Kt=null;break e}if(f!==null){f.return=m,Kt=f;break e}Kt=m}}}var bw={getCacheForType:function(n){var s=ln(Ft),a=s.data.get(n);return a===void 0&&(a=n(),s.data.set(n,a)),a}},ww=typeof WeakMap=="function"?WeakMap:Map,it=0,ft=null,qe=null,Xe=0,st=0,kn=null,us=!1,go=!1,mm=!1,Si=0,St=0,cs=0,ga=0,pm=0,Zn=0,yo=0,tu=null,bn=null,gm=!1,ym=0,sh=1/0,ah=null,hs=null,tn=0,fs=null,_o=null,vo=0,_m=0,vm=null,Tv=null,nu=0,Em=null;function Pn(){if((it&2)!==0&&Xe!==0)return Xe&-Xe;if($.T!==null){var n=so;return n!==0?n:Im()}return Ki()}function Sv(){Zn===0&&(Zn=(Xe&536870912)===0||Je?hl():536870912);var n=Wn.current;return n!==null&&(n.flags|=32),Zn}function Ln(n,s,a){(n===ft&&(st===2||st===9)||n.cancelPendingCommit!==null)&&(Eo(n,0),ds(n,Xe,Zn,!1)),ei(n,a),((it&2)===0||n!==ft)&&(n===ft&&((it&2)===0&&(ga|=a),St===4&&ds(n,Xe,Zn,!1)),kr(n))}function Av(n,s,a){if((it&6)!==0)throw Error(i(327));var u=!a&&(s&124)===0&&(s&n.expiredLanes)===0||Zr(n,s),f=u?Cw(n,s):Am(n,s,!0),m=u;do{if(f===0){go&&!u&&ds(n,s,0,!1);break}else{if(a=n.current.alternate,m&&!Rw(a)){f=Am(n,s,!1),m=!1;continue}if(f===2){if(m=s,n.errorRecoveryDisabledLanes&m)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var S=n;f=tu;var C=S.current.memoizedState.isDehydrated;if(C&&(Eo(S,E).flags|=256),E=Am(S,E,!1),E!==2){if(mm&&!C){S.errorRecoveryDisabledLanes|=m,ga|=m,f=4;break e}m=bn,bn=f,m!==null&&(bn===null?bn=m:bn.push.apply(bn,m))}f=E}if(m=!1,f!==2)continue}}if(f===1){Eo(n,0),ds(n,s,0,!0);break}e:{switch(u=n,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:ds(u,s,Zn,!us);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=ym+300-Tn(),10<f)){if(ds(u,s,Zn,!us),Wr(u,0,!0)!==0)break e;u.timeoutHandle=Zv(bv.bind(null,u,a,bn,ah,gm,s,Zn,ga,yo,us,m,2,-0,0),f);break e}bv(u,a,bn,ah,gm,s,Zn,ga,yo,us,m,0,-0,0)}}break}while(!0);kr(n)}function bv(n,s,a,u,f,m,E,S,C,G,ee,ie,Y,X){if(n.timeoutHandle=-1,ie=s.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(uu={stylesheets:null,count:0,unsuspend:o1},yv(s),ie=u1(),ie!==null)){n.cancelPendingCommit=ie(Nv.bind(null,n,s,m,a,u,f,E,S,C,ee,1,Y,X)),ds(n,m,E,!G);return}Nv(n,s,m,a,u,f,E,S,C)}function Rw(n){for(var s=n;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var f=a[u],m=f.getSnapshot;f=f.value;try{if(!Nn(m(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ds(n,s,a,u){s&=~pm,s&=~ga,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var m=31-rt(f),E=1<<m;u[m]=-1,f&=~E}a!==0&&Er(n,a,s)}function oh(){return(it&6)===0?(ru(0),!1):!0}function Tm(){if(qe!==null){if(st===0)var n=qe.return;else n=qe,mi=ca=null,Ud(n),ho=null,Kl=0,n=qe;for(;n!==null;)rv(n.alternate,n),n=n.return;qe=null}}function Eo(n,s){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,Hw(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),Tm(),ft=n,qe=a=hi(n.current,null),Xe=s,st=0,kn=null,us=!1,go=Zr(n,s),mm=!1,yo=Zn=pm=ga=cs=St=0,bn=tu=null,gm=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-rt(u),m=1<<f;s|=n[f],u&=~m}return Si=s,xc(),a}function wv(n,s){ze=null,$.H=Qc,s===Ul||s===Uc?(s=By(),st=3):s===jy?(s=By(),st=4):st=s===q_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,kn=s,qe===null&&(St=1,Jc(n,Kn(s,n.current)))}function Rv(){var n=$.H;return $.H=Qc,n===null?Qc:n}function Iv(){var n=$.A;return $.A=bw,n}function Sm(){St=4,us||(Xe&4194048)!==Xe&&Wn.current!==null||(go=!0),(cs&134217727)===0&&(ga&134217727)===0||ft===null||ds(ft,Xe,Zn,!1)}function Am(n,s,a){var u=it;it|=2;var f=Rv(),m=Iv();(ft!==n||Xe!==s)&&(ah=null,Eo(n,s)),s=!1;var E=St;e:do try{if(st!==0&&qe!==null){var S=qe,C=kn;switch(st){case 8:Tm(),E=6;break e;case 3:case 2:case 9:case 6:Wn.current===null&&(s=!0);var G=st;if(st=0,kn=null,To(n,S,C,G),a&&go){E=0;break e}break;default:G=st,st=0,kn=null,To(n,S,C,G)}}Iw(),E=St;break}catch(ee){wv(n,ee)}while(!0);return s&&n.shellSuspendCounter++,mi=ca=null,it=u,$.H=f,$.A=m,qe===null&&(ft=null,Xe=0,xc()),E}function Iw(){for(;qe!==null;)Cv(qe)}function Cw(n,s){var a=it;it|=2;var u=Rv(),f=Iv();ft!==n||Xe!==s?(ah=null,sh=Tn()+500,Eo(n,s)):go=Zr(n,s);e:do try{if(st!==0&&qe!==null){s=qe;var m=kn;t:switch(st){case 1:st=0,kn=null,To(n,s,m,1);break;case 2:case 9:if(zy(m)){st=0,kn=null,xv(s);break}s=function(){st!==2&&st!==9||ft!==n||(st=7),kr(n)},m.then(s,s);break e;case 3:st=7;break e;case 4:st=5;break e;case 7:zy(m)?(st=0,kn=null,xv(s)):(st=0,kn=null,To(n,s,m,7));break;case 5:var E=null;switch(qe.tag){case 26:E=qe.memoizedState;case 5:case 27:var S=qe;if(!E||cE(E)){st=0,kn=null;var C=S.sibling;if(C!==null)qe=C;else{var G=S.return;G!==null?(qe=G,lh(G)):qe=null}break t}}st=0,kn=null,To(n,s,m,5);break;case 6:st=0,kn=null,To(n,s,m,6);break;case 8:Tm(),St=6;break e;default:throw Error(i(462))}}xw();break}catch(ee){wv(n,ee)}while(!0);return mi=ca=null,$.H=u,$.A=f,it=a,qe!==null?0:(ft=null,Xe=0,xc(),St)}function xw(){for(;qe!==null&&!qi();)Cv(qe)}function Cv(n){var s=tv(n.alternate,n,Si);n.memoizedProps=n.pendingProps,s===null?lh(n):qe=s}function xv(n){var s=n,a=s.alternate;switch(s.tag){case 15:case 0:s=Y_(a,s,s.pendingProps,s.type,void 0,Xe);break;case 11:s=Y_(a,s,s.pendingProps,s.type.render,s.ref,Xe);break;case 5:Ud(s);default:rv(a,s),s=qe=Dy(s,Si),s=tv(a,s,Si)}n.memoizedProps=n.pendingProps,s===null?lh(n):qe=s}function To(n,s,a,u){mi=ca=null,Ud(s),ho=null,Kl=0;var f=s.return;try{if(_w(n,f,s,a,Xe)){St=1,Jc(n,Kn(a,n.current)),qe=null;return}}catch(m){if(f!==null)throw qe=f,m;St=1,Jc(n,Kn(a,n.current)),qe=null;return}s.flags&32768?(Je||u===1?n=!0:go||(Xe&536870912)!==0?n=!1:(us=n=!0,(u===2||u===9||u===3||u===6)&&(u=Wn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Dv(s,n)):lh(s)}function lh(n){var s=n;do{if((s.flags&32768)!==0){Dv(s,us);return}n=s.return;var a=Ew(s.alternate,s,Si);if(a!==null){qe=a;return}if(s=s.sibling,s!==null){qe=s;return}qe=s=n}while(s!==null);St===0&&(St=5)}function Dv(n,s){do{var a=Tw(n.alternate,n);if(a!==null){a.flags&=32767,qe=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(n=n.sibling,n!==null)){qe=n;return}qe=n=a}while(n!==null);St=6,qe=null}function Nv(n,s,a,u,f,m,E,S,C){n.cancelPendingCommit=null;do uh();while(tn!==0);if((it&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(m=s.lanes|s.childLanes,m|=dd,dl(n,a,m,E,S,C),n===ft&&(qe=ft=null,Xe=0),_o=s,fs=n,vo=a,_m=m,vm=f,Tv=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Vw(K,function(){return Pv(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=$.T,$.T=null,f=le.p,le.p=2,E=it,it|=4;try{Sw(n,s,a)}finally{it=E,le.p=f,$.T=u}}tn=1,Ov(),Vv(),Mv()}}function Ov(){if(tn===1){tn=0;var n=fs,s=_o,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=$.T,$.T=null;var u=le.p;le.p=2;var f=it;it|=4;try{mv(s,n);var m=km,E=Ey(n.containerInfo),S=m.focusedElem,C=m.selectionRange;if(E!==S&&S&&S.ownerDocument&&vy(S.ownerDocument.documentElement,S)){if(C!==null&&ld(S)){var G=C.start,ee=C.end;if(ee===void 0&&(ee=G),"selectionStart"in S)S.selectionStart=G,S.selectionEnd=Math.min(ee,S.value.length);else{var ie=S.ownerDocument||document,Y=ie&&ie.defaultView||window;if(Y.getSelection){var X=Y.getSelection(),Me=S.textContent.length,xe=Math.min(C.start,Me),ut=C.end===void 0?xe:Math.min(C.end,Me);!X.extend&&xe>ut&&(E=ut,ut=xe,xe=E);var j=_y(S,xe),P=_y(S,ut);if(j&&P&&(X.rangeCount!==1||X.anchorNode!==j.node||X.anchorOffset!==j.offset||X.focusNode!==P.node||X.focusOffset!==P.offset)){var q=ie.createRange();q.setStart(j.node,j.offset),X.removeAllRanges(),xe>ut?(X.addRange(q),X.extend(P.node,P.offset)):(q.setEnd(P.node,P.offset),X.addRange(q))}}}}for(ie=[],X=S;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ie.length;S++){var ne=ie[S];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Th=!!Mm,km=Mm=null}finally{it=f,le.p=u,$.T=a}}n.current=s,tn=2}}function Vv(){if(tn===2){tn=0;var n=fs,s=_o,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=$.T,$.T=null;var u=le.p;le.p=2;var f=it;it|=4;try{cv(n,s.alternate,s)}finally{it=f,le.p=u,$.T=a}}tn=3}}function Mv(){if(tn===4||tn===3){tn=0,Pa();var n=fs,s=_o,a=vo,u=Tv;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?tn=5:(tn=0,_o=fs=null,kv(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(hs=null),La(a),s=s.stateNode,be&&typeof be.onCommitFiberRoot=="function")try{be.onCommitFiberRoot(me,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=$.T,f=le.p,le.p=2,$.T=null;try{for(var m=n.onRecoverableError,E=0;E<u.length;E++){var S=u[E];m(S.value,{componentStack:S.stack})}}finally{$.T=s,le.p=f}}(vo&3)!==0&&uh(),kr(n),f=n.pendingLanes,(a&4194090)!==0&&(f&42)!==0?n===Em?nu++:(nu=0,Em=n):nu=0,ru(0)}}function kv(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Pl(s)))}function uh(n){return Ov(),Vv(),Mv(),Pv()}function Pv(){if(tn!==5)return!1;var n=fs,s=_m;_m=0;var a=La(vo),u=$.T,f=le.p;try{le.p=32>a?32:a,$.T=null,a=vm,vm=null;var m=fs,E=vo;if(tn=0,_o=fs=null,vo=0,(it&6)!==0)throw Error(i(331));var S=it;if(it|=4,vv(m.current),gv(m,m.current,E,a),it=S,ru(0,!1),be&&typeof be.onPostCommitFiberRoot=="function")try{be.onPostCommitFiberRoot(me,m)}catch{}return!0}finally{le.p=f,$.T=u,kv(n,s)}}function Lv(n,s,a){s=Kn(a,s),s=Zd(n.stateNode,s,2),n=ns(n,s,2),n!==null&&(ei(n,2),kr(n))}function ct(n,s,a){if(n.tag===3)Lv(n,n,a);else for(;s!==null;){if(s.tag===3){Lv(s,n,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(hs===null||!hs.has(u))){n=Kn(a,n),a=F_(2),u=ns(s,a,2),u!==null&&(B_(a,u,s,n),ei(u,2),kr(u));break}}s=s.return}}function bm(n,s,a){var u=n.pingCache;if(u===null){u=n.pingCache=new ww;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(a)||(mm=!0,f.add(a),n=Dw.bind(null,n,s,a),s.then(n,n))}function Dw(n,s,a){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,ft===n&&(Xe&a)===a&&(St===4||St===3&&(Xe&62914560)===Xe&&300>Tn()-ym?(it&2)===0&&Eo(n,0):pm|=a,yo===Xe&&(yo=0)),kr(n)}function Uv(n,s){s===0&&(s=fl()),n=to(n,s),n!==null&&(ei(n,s),kr(n))}function Nw(n){var s=n.memoizedState,a=0;s!==null&&(a=s.retryLane),Uv(n,a)}function Ow(n,s){var a=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),Uv(n,a)}function Vw(n,s){return Qr(n,s)}var ch=null,So=null,wm=!1,hh=!1,Rm=!1,ya=0;function kr(n){n!==So&&n.next===null&&(So===null?ch=So=n:So=So.next=n),hh=!0,wm||(wm=!0,kw())}function ru(n,s){if(!Rm&&hh){Rm=!0;do for(var a=!1,u=ch;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var m=0;else{var E=u.suspendedLanes,S=u.pingedLanes;m=(1<<31-rt(42|n)+1)-1,m&=f&~(E&~S),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Bv(u,m))}else m=Xe,m=Wr(u,u===ft?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(m&3)===0||Zr(u,m)||(a=!0,Bv(u,m));u=u.next}while(a);Rm=!1}}function Mw(){jv()}function jv(){hh=wm=!1;var n=0;ya!==0&&(qw()&&(n=ya),ya=0);for(var s=Tn(),a=null,u=ch;u!==null;){var f=u.next,m=zv(u,s);m===0?(u.next=null,a===null?ch=f:a.next=f,f===null&&(So=a)):(a=u,(n!==0||(m&3)!==0)&&(hh=!0)),u=f}ru(n)}function zv(n,s){for(var a=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,m=n.pendingLanes&-62914561;0<m;){var E=31-rt(m),S=1<<E,C=f[E];C===-1?((S&a)===0||(S&u)!==0)&&(f[E]=Gi(S,s)):C<=s&&(n.expiredLanes|=S),m&=~S}if(s=ft,a=Xe,a=Wr(n,n===s?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,a===0||n===s&&(st===2||st===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&vr(u),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Zr(n,a)){if(s=a&-a,s===n.callbackPriority)return s;switch(u!==null&&vr(u),La(a)){case 2:case 8:a=N;break;case 32:a=K;break;case 268435456:a=pe;break;default:a=K}return u=Fv.bind(null,n),a=Qr(a,u),n.callbackPriority=s,n.callbackNode=a,s}return u!==null&&u!==null&&vr(u),n.callbackPriority=2,n.callbackNode=null,2}function Fv(n,s){if(tn!==0&&tn!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(uh()&&n.callbackNode!==a)return null;var u=Xe;return u=Wr(n,n===ft?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(Av(n,u,s),zv(n,Tn()),n.callbackNode!=null&&n.callbackNode===a?Fv.bind(null,n):null)}function Bv(n,s){if(uh())return null;Av(n,s,!0)}function kw(){Gw(function(){(it&6)!==0?Qr(Hi,Mw):jv()})}function Im(){return ya===0&&(ya=hl()),ya}function qv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:qa(""+n)}function Hv(n,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,n.id&&a.setAttribute("form",n.id),s.parentNode.insertBefore(a,s),n=new FormData(n),a.parentNode.removeChild(a),n}function Pw(n,s,a,u,f){if(s==="submit"&&a&&a.stateNode===f){var m=qv((f[Ct]||null).action),E=u.submitter;E&&(s=(s=E[Ct]||null)?qv(s.formAction):E.getAttribute("formAction"),s!==null&&(m=s,E=null));var S=new Ha("action","action",null,u,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(ya!==0){var C=E?Hv(f,E):new FormData(f);Kd(a,{pending:!0,data:C,method:f.method,action:m},null,C)}}else typeof m=="function"&&(S.preventDefault(),C=E?Hv(f,E):new FormData(f),Kd(a,{pending:!0,data:C,method:f.method,action:m},m,C))},currentTarget:f}]})}}for(var Cm=0;Cm<fd.length;Cm++){var xm=fd[Cm],Lw=xm.toLowerCase(),Uw=xm[0].toUpperCase()+xm.slice(1);or(Lw,"on"+Uw)}or(Ay,"onAnimationEnd"),or(by,"onAnimationIteration"),or(wy,"onAnimationStart"),or("dblclick","onDoubleClick"),or("focusin","onFocus"),or("focusout","onBlur"),or(tw,"onTransitionRun"),or(nw,"onTransitionStart"),or(rw,"onTransitionCancel"),or(Ry,"onTransitionEnd"),ni("onMouseEnter",["mouseout","mouseover"]),ni("onMouseLeave",["mouseout","mouseover"]),ni("onPointerEnter",["pointerout","pointerover"]),ni("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var iu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(iu));function Gv(n,s){s=(s&4)!==0;for(var a=0;a<n.length;a++){var u=n[a],f=u.event;u=u.listeners;e:{var m=void 0;if(s)for(var E=u.length-1;0<=E;E--){var S=u[E],C=S.instance,G=S.currentTarget;if(S=S.listener,C!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=G;try{m(f)}catch(ee){Zc(ee)}f.currentTarget=null,m=C}else for(E=0;E<u.length;E++){if(S=u[E],C=S.instance,G=S.currentTarget,S=S.listener,C!==m&&f.isPropagationStopped())break e;m=S,f.currentTarget=G;try{m(f)}catch(ee){Zc(ee)}f.currentTarget=null,m=C}}}}function He(n,s){var a=s[pl];a===void 0&&(a=s[pl]=new Set);var u=n+"__bubble";a.has(u)||($v(s,n,2,!1),a.add(u))}function Dm(n,s,a){var u=0;s&&(u|=4),$v(a,n,u,s)}var fh="_reactListening"+Math.random().toString(36).slice(2);function Nm(n){if(!n[fh]){n[fh]=!0,gl.forEach(function(a){a!=="selectionchange"&&(jw.has(a)||Dm(a,!1,n),Dm(a,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[fh]||(s[fh]=!0,Dm("selectionchange",!1,s))}}function $v(n,s,a,u){switch(gE(s)){case 2:var f=f1;break;case 8:f=d1;break;default:f=Gm}a=f.bind(null,s,a,n),f=void 0,!Gn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,a,{capture:!0,passive:f}):n.addEventListener(s,a,!0):f!==void 0?n.addEventListener(s,a,{passive:f}):n.addEventListener(s,a,!1)}function Om(n,s,a,u,f){var m=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var S=u.stateNode.containerInfo;if(S===f)break;if(E===4)for(E=u.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;S!==null;){if(E=ti(S),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){u=m=E;continue e}S=S.parentNode}}u=u.return}mc(function(){var G=m,ee=Hn(a),ie=[];e:{var Y=Iy.get(n);if(Y!==void 0){var X=Ha,Me=n;switch(n){case"keypress":if(Rr(a)===0)break e;case"keydown":case"keyup":X=Xa;break;case"focusin":Me="focus",X=Ka;break;case"focusout":Me="blur",X=Ka;break;case"beforeblur":case"afterblur":X=Ka;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=$n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=Sc;break;case Ay:case by:case wy:X=Qa;break;case Ry:X=bc;break;case"scroll":case"scrollend":X=pc;break;case"wheel":X=Wa;break;case"copy":case"cut":case"paste":X=Ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Cl;break;case"toggle":case"beforetoggle":X=Rc}var xe=(s&4)!==0,ut=!xe&&(n==="scroll"||n==="scrollend"),j=xe?Y!==null?Y+"Capture":null:Y;xe=[];for(var P=G,q;P!==null;){var ne=P;if(q=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||q===null||j===null||(ne=Xs(P,j),ne!=null&&xe.push(su(P,ne,q))),ut)break;P=P.return}0<xe.length&&(Y=new X(Y,Me,null,a,ee),ie.push({event:Y,listeners:xe}))}}if((s&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",X=n==="mouseout"||n==="pointerout",Y&&a!==si&&(Me=a.relatedTarget||a.fromElement)&&(ti(Me)||Me[Bn]))break e;if((X||Y)&&(Y=ee.window===ee?ee:(Y=ee.ownerDocument)?Y.defaultView||Y.parentWindow:window,X?(Me=a.relatedTarget||a.toElement,X=G,Me=Me?ti(Me):null,Me!==null&&(ut=l(Me),xe=Me.tag,Me!==ut||xe!==5&&xe!==27&&xe!==6)&&(Me=null)):(X=null,Me=G),X!==Me)){if(xe=$n,ne="onMouseLeave",j="onMouseEnter",P="mouse",(n==="pointerout"||n==="pointerover")&&(xe=Cl,ne="onPointerLeave",j="onPointerEnter",P="pointer"),ut=X==null?Y:Sr(X),q=Me==null?Y:Sr(Me),Y=new xe(ne,P+"leave",X,a,ee),Y.target=ut,Y.relatedTarget=q,ne=null,ti(ee)===G&&(xe=new xe(j,P+"enter",Me,a,ee),xe.target=q,xe.relatedTarget=ut,ne=xe),ut=ne,X&&Me)t:{for(xe=X,j=Me,P=0,q=xe;q;q=Ao(q))P++;for(q=0,ne=j;ne;ne=Ao(ne))q++;for(;0<P-q;)xe=Ao(xe),P--;for(;0<q-P;)j=Ao(j),q--;for(;P--;){if(xe===j||j!==null&&xe===j.alternate)break t;xe=Ao(xe),j=Ao(j)}xe=null}else xe=null;X!==null&&Kv(ie,Y,X,xe,!1),Me!==null&&ut!==null&&Kv(ie,ut,Me,xe,!0)}}e:{if(Y=G?Sr(G):window,X=Y.nodeName&&Y.nodeName.toLowerCase(),X==="select"||X==="input"&&Y.type==="file")var ve=fy;else if(zt(Y))if(dy)ve=Zb;else{ve=Xb;var Be=Yb}else X=Y.nodeName,!X||X.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?G&&Tl(G.elementType)&&(ve=fy):ve=Wb;if(ve&&(ve=ve(n,G))){ci(ie,ve,a,ee);break e}Be&&Be(n,Y,G),n==="focusout"&&G&&Y.type==="number"&&G.memoizedProps.value!=null&&Wi(Y,"number",Y.value)}switch(Be=G?Sr(G):window,n){case"focusin":(zt(Be)||Be.contentEditable==="true")&&(Za=Be,ud=G,Nl=null);break;case"focusout":Nl=ud=Za=null;break;case"mousedown":cd=!0;break;case"contextmenu":case"mouseup":case"dragend":cd=!1,Ty(ie,a,ee);break;case"selectionchange":if(ew)break;case"keydown":case"keyup":Ty(ie,a,ee)}var we;if(xr)e:{switch(n){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Qe?W(n,a)&&(De="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(De="onCompositionStart");De&&(v&&a.locale!=="ko"&&(Qe||De!=="onCompositionStart"?De==="onCompositionEnd"&&Qe&&(we=Al()):(wr=ee,Zi="value"in wr?wr.value:wr.textContent,Qe=!0)),Be=dh(G,De),0<Be.length&&(De=new Rl(De,n,null,a,ee),ie.push({event:De,listeners:Be}),we?De.data=we:(we=he(a),we!==null&&(De.data=we)))),(we=y?jt(n,a):Ye(n,a))&&(De=dh(G,"onBeforeInput"),0<De.length&&(Be=new Rl("onBeforeInput","beforeinput",null,a,ee),ie.push({event:Be,listeners:De}),Be.data=we)),Pw(ie,n,G,a,ee)}Gv(ie,s)})}function su(n,s,a){return{instance:n,listener:s,currentTarget:a}}function dh(n,s){for(var a=s+"Capture",u=[];n!==null;){var f=n,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Xs(n,a),f!=null&&u.unshift(su(n,f,m)),f=Xs(n,s),f!=null&&u.push(su(n,f,m))),n.tag===3)return u;n=n.return}return[]}function Ao(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Kv(n,s,a,u,f){for(var m=s._reactName,E=[];a!==null&&a!==u;){var S=a,C=S.alternate,G=S.stateNode;if(S=S.tag,C!==null&&C===u)break;S!==5&&S!==26&&S!==27||G===null||(C=G,f?(G=Xs(a,m),G!=null&&E.unshift(su(a,G,C))):f||(G=Xs(a,m),G!=null&&E.push(su(a,G,C)))),a=a.return}E.length!==0&&n.push({event:s,listeners:E})}var zw=/\r\n?/g,Fw=/\u0000|\uFFFD/g;function Qv(n){return(typeof n=="string"?n:""+n).replace(zw,`
`).replace(Fw,"")}function Yv(n,s){return s=Qv(s),Qv(n)===s}function mh(){}function lt(n,s,a,u,f,m){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||qn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&qn(n,""+u);break;case"className":Ar(n,"class",u);break;case"tabIndex":Ar(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Ar(n,a,u);break;case"style":El(n,u,m);break;case"data":if(s!=="object"){Ar(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){n.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=qa(""+u),n.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(s!=="input"&&lt(n,s,"name",f.name,f,null),lt(n,s,"formEncType",f.formEncType,f,null),lt(n,s,"formMethod",f.formMethod,f,null),lt(n,s,"formTarget",f.formTarget,f,null)):(lt(n,s,"encType",f.encType,f,null),lt(n,s,"method",f.method,f,null),lt(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(a);break}u=qa(""+u),n.setAttribute(a,u);break;case"onClick":u!=null&&(n.onclick=mh);break;case"onScroll":u!=null&&He("scroll",n);break;case"onScrollEnd":u!=null&&He("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}a=qa(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""+u):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":u===!0?n.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(a,u):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(a,u):n.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(a):n.setAttribute(a,u);break;case"popover":He("beforetoggle",n),He("toggle",n),Xi(n,"popover",u);break;case"xlinkActuate":Zt(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Zt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Zt(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Zt(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Zt(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Zt(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Zt(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Xi(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=nd.get(a)||a,Xi(n,a,u))}}function Vm(n,s,a,u,f,m){switch(a){case"style":El(n,u,m);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=a}}break;case"children":typeof u=="string"?qn(n,u):(typeof u=="number"||typeof u=="bigint")&&qn(n,""+u);break;case"onScroll":u!=null&&He("scroll",n);break;case"onScrollEnd":u!=null&&He("scrollend",n);break;case"onClick":u!=null&&(n.onclick=mh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ua.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),m=n[Ct]||null,m=m!=null?m[a]:null,typeof m=="function"&&n.removeEventListener(s,m,f),typeof u=="function")){typeof m!="function"&&m!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(s,u,f);break e}a in n?n[a]=u:u===!0?n.setAttribute(a,""):Xi(n,a,u)}}}function nn(n,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",n),He("load",n);var u=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var E=a[m];if(E!=null)switch(m){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:lt(n,s,m,E,a,null)}}f&&lt(n,s,"srcSet",a.srcSet,a,null),u&&lt(n,s,"src",a.src,a,null);return;case"input":He("invalid",n);var S=m=E=f=null,C=null,G=null;for(u in a)if(a.hasOwnProperty(u)){var ee=a[u];if(ee!=null)switch(u){case"name":f=ee;break;case"type":E=ee;break;case"checked":C=ee;break;case"defaultChecked":G=ee;break;case"value":m=ee;break;case"defaultValue":S=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,s));break;default:lt(n,s,u,ee,a,null)}}Ks(n,m,S,C,G,E,f,!1),Ba(n);return;case"select":He("invalid",n),u=E=m=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":m=S;break;case"defaultValue":E=S;break;case"multiple":u=S;default:lt(n,s,f,S,a,null)}s=m,a=E,n.multiple=!!u,s!=null?ii(n,!!u,s,!1):a!=null&&ii(n,!!u,a,!0);return;case"textarea":He("invalid",n),m=f=u=null;for(E in a)if(a.hasOwnProperty(E)&&(S=a[E],S!=null))switch(E){case"value":u=S;break;case"defaultValue":f=S;break;case"children":m=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:lt(n,s,E,S,a,null)}Qs(n,u,f,m),Ba(n);return;case"option":for(C in a)if(a.hasOwnProperty(C)&&(u=a[C],u!=null))switch(C){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:lt(n,s,C,u,a,null)}return;case"dialog":He("beforetoggle",n),He("toggle",n),He("cancel",n),He("close",n);break;case"iframe":case"object":He("load",n);break;case"video":case"audio":for(u=0;u<iu.length;u++)He(iu[u],n);break;case"image":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"embed":case"source":case"link":He("error",n),He("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(u=a[G],u!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:lt(n,s,G,u,a,null)}return;default:if(Tl(s)){for(ee in a)a.hasOwnProperty(ee)&&(u=a[ee],u!==void 0&&Vm(n,s,ee,u,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(u=a[S],u!=null&&lt(n,s,S,u,a,null))}function Bw(n,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,E=null,S=null,C=null,G=null,ee=null;for(X in a){var ie=a[X];if(a.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":C=ie;default:u.hasOwnProperty(X)||lt(n,s,X,null,u,ie)}}for(var Y in u){var X=u[Y];if(ie=a[Y],u.hasOwnProperty(Y)&&(X!=null||ie!=null))switch(Y){case"type":m=X;break;case"name":f=X;break;case"checked":G=X;break;case"defaultChecked":ee=X;break;case"value":E=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(i(137,s));break;default:X!==ie&&lt(n,s,Y,X,u,ie)}}Dn(n,E,S,C,G,ee,m,f);return;case"select":X=E=S=Y=null;for(m in a)if(C=a[m],a.hasOwnProperty(m)&&C!=null)switch(m){case"value":break;case"multiple":X=C;default:u.hasOwnProperty(m)||lt(n,s,m,null,u,C)}for(f in u)if(m=u[f],C=a[f],u.hasOwnProperty(f)&&(m!=null||C!=null))switch(f){case"value":Y=m;break;case"defaultValue":S=m;break;case"multiple":E=m;default:m!==C&&lt(n,s,f,m,u,C)}s=S,a=E,u=X,Y!=null?ii(n,!!a,Y,!1):!!u!=!!a&&(s!=null?ii(n,!!a,s,!0):ii(n,!!a,a?[]:"",!1));return;case"textarea":X=Y=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:lt(n,s,S,null,u,f)}for(E in u)if(f=u[E],m=a[E],u.hasOwnProperty(E)&&(f!=null||m!=null))switch(E){case"value":Y=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&lt(n,s,E,f,u,m)}at(n,Y,X);return;case"option":for(var Me in a)if(Y=a[Me],a.hasOwnProperty(Me)&&Y!=null&&!u.hasOwnProperty(Me))switch(Me){case"selected":n.selected=!1;break;default:lt(n,s,Me,null,u,Y)}for(C in u)if(Y=u[C],X=a[C],u.hasOwnProperty(C)&&Y!==X&&(Y!=null||X!=null))switch(C){case"selected":n.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:lt(n,s,C,Y,u,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in a)Y=a[xe],a.hasOwnProperty(xe)&&Y!=null&&!u.hasOwnProperty(xe)&&lt(n,s,xe,null,u,Y);for(G in u)if(Y=u[G],X=a[G],u.hasOwnProperty(G)&&Y!==X&&(Y!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,s));break;default:lt(n,s,G,Y,u,X)}return;default:if(Tl(s)){for(var ut in a)Y=a[ut],a.hasOwnProperty(ut)&&Y!==void 0&&!u.hasOwnProperty(ut)&&Vm(n,s,ut,void 0,u,Y);for(ee in u)Y=u[ee],X=a[ee],!u.hasOwnProperty(ee)||Y===X||Y===void 0&&X===void 0||Vm(n,s,ee,Y,u,X);return}}for(var j in a)Y=a[j],a.hasOwnProperty(j)&&Y!=null&&!u.hasOwnProperty(j)&&lt(n,s,j,null,u,Y);for(ie in u)Y=u[ie],X=a[ie],!u.hasOwnProperty(ie)||Y===X||Y==null&&X==null||lt(n,s,ie,Y,u,X)}var Mm=null,km=null;function ph(n){return n.nodeType===9?n:n.ownerDocument}function Xv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wv(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Pm(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Lm=null;function qw(){var n=window.event;return n&&n.type==="popstate"?n===Lm?!1:(Lm=n,!0):(Lm=null,!1)}var Zv=typeof setTimeout=="function"?setTimeout:void 0,Hw=typeof clearTimeout=="function"?clearTimeout:void 0,Jv=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof Jv<"u"?function(n){return Jv.resolve(null).then(n).catch($w)}:Zv;function $w(n){setTimeout(function(){throw n})}function ms(n){return n==="head"}function eE(n,s){var a=s,u=0,f=0;do{var m=a.nextSibling;if(n.removeChild(a),m&&m.nodeType===8)if(a=m.data,a==="/$"){if(0<u&&8>u){a=u;var E=n.ownerDocument;if(a&1&&au(E.documentElement),a&2&&au(E.body),a&4)for(a=E.head,au(a),E=a.firstChild;E;){var S=E.nextSibling,C=E.nodeName;E[qs]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||a.removeChild(E),E=S}}if(f===0){n.removeChild(m),mu(s);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:u=a.charCodeAt(0)-48;else u=0;a=m}while(a);mu(s)}function Um(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Um(a),Yi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function Kw(n,s,a,u){for(;n.nodeType===1;){var f=a;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[qs])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(m=n.getAttribute("rel"),m==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(m!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(m=n.getAttribute("src"),(m!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===m)return n}else return n;if(n=ur(n.nextSibling),n===null)break}return null}function Qw(n,s,a){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ur(n.nextSibling),n===null))return null;return n}function jm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function Yw(n,s){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function ur(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var zm=null;function tE(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return n;s--}else a==="/$"&&s++}n=n.previousSibling}return null}function nE(n,s,a){switch(s=ph(a),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function au(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Yi(n)}var Jn=new Map,rE=new Set;function gh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ai=le.d;le.d={f:Xw,r:Ww,D:Zw,C:Jw,L:e1,m:t1,X:r1,S:n1,M:i1};function Xw(){var n=Ai.f(),s=oh();return n||s}function Ww(n){var s=Tr(n);s!==null&&s.tag===5&&s.type==="form"?A_(s):Ai.r(n)}var bo=typeof document>"u"?null:document;function iE(n,s,a){var u=bo;if(u&&typeof s=="string"&&s){var f=xt(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),rE.has(f)||(rE.add(f),n={rel:n,crossOrigin:a,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),nn(s,"link",n),At(s),u.head.appendChild(s)))}}function Zw(n){Ai.D(n),iE("dns-prefetch",n,null)}function Jw(n,s){Ai.C(n,s),iE("preconnect",n,s)}function e1(n,s,a){Ai.L(n,s,a);var u=bo;if(u&&n&&s){var f='link[rel="preload"][as="'+xt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+xt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+xt(a.imageSizes)+'"]')):f+='[href="'+xt(n)+'"]';var m=f;switch(s){case"style":m=wo(n);break;case"script":m=Ro(n)}Jn.has(m)||(n=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:n,as:s},a),Jn.set(m,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(ou(m))||s==="script"&&u.querySelector(lu(m))||(s=u.createElement("link"),nn(s,"link",n),At(s),u.head.appendChild(s)))}}function t1(n,s){Ai.m(n,s);var a=bo;if(a&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+xt(u)+'"][href="'+xt(n)+'"]',m=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ro(n)}if(!Jn.has(m)&&(n=_({rel:"modulepreload",href:n},s),Jn.set(m,n),a.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(lu(m)))return}u=a.createElement("link"),nn(u,"link",n),At(u),a.head.appendChild(u)}}}function n1(n,s,a){Ai.S(n,s,a);var u=bo;if(u&&n){var f=pn(u).hoistableStyles,m=wo(n);s=s||"default";var E=f.get(m);if(!E){var S={loading:0,preload:null};if(E=u.querySelector(ou(m)))S.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},a),(a=Jn.get(m))&&Fm(n,a);var C=E=u.createElement("link");At(C),nn(C,"link",n),C._p=new Promise(function(G,ee){C.onload=G,C.onerror=ee}),C.addEventListener("load",function(){S.loading|=1}),C.addEventListener("error",function(){S.loading|=2}),S.loading|=4,yh(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:S},f.set(m,E)}}}function r1(n,s){Ai.X(n,s);var a=bo;if(a&&n){var u=pn(a).hoistableScripts,f=Ro(n),m=u.get(f);m||(m=a.querySelector(lu(f)),m||(n=_({src:n,async:!0},s),(s=Jn.get(f))&&Bm(n,s),m=a.createElement("script"),At(m),nn(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function i1(n,s){Ai.M(n,s);var a=bo;if(a&&n){var u=pn(a).hoistableScripts,f=Ro(n),m=u.get(f);m||(m=a.querySelector(lu(f)),m||(n=_({src:n,async:!0,type:"module"},s),(s=Jn.get(f))&&Bm(n,s),m=a.createElement("script"),At(m),nn(m,"link",n),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},u.set(f,m))}}function sE(n,s,a,u){var f=(f=Ve.current)?gh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=wo(a.href),a=pn(f).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=wo(a.href);var m=pn(f).hoistableStyles,E=m.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(n,E),(m=f.querySelector(ou(n)))&&!m._p&&(E.instance=m,E.state.loading=5),Jn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Jn.set(n,a),m||s1(f,n,a,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ro(a),a=pn(f).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function wo(n){return'href="'+xt(n)+'"'}function ou(n){return'link[rel="stylesheet"]['+n+"]"}function aE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function s1(n,s,a,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),nn(s,"link",a),At(s),n.head.appendChild(s))}function Ro(n){return'[src="'+xt(n)+'"]'}function lu(n){return"script[async]"+n}function oE(n,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+xt(a.href)+'"]');if(u)return s.instance=u,At(u),u;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),At(u),nn(u,"style",f),yh(u,a.precedence,n),s.instance=u;case"stylesheet":f=wo(a.href);var m=n.querySelector(ou(f));if(m)return s.state.loading|=4,s.instance=m,At(m),m;u=aE(a),(f=Jn.get(f))&&Fm(u,f),m=(n.ownerDocument||n).createElement("link"),At(m);var E=m;return E._p=new Promise(function(S,C){E.onload=S,E.onerror=C}),nn(m,"link",u),s.state.loading|=4,yh(m,a.precedence,n),s.instance=m;case"script":return m=Ro(a.src),(f=n.querySelector(lu(m)))?(s.instance=f,At(f),f):(u=a,(f=Jn.get(m))&&(u=_({},a),Bm(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),At(f),nn(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,yh(u,a.precedence,n));return s.instance}function yh(n,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,m=f,E=0;E<u.length;E++){var S=u[E];if(S.dataset.precedence===s)m=S;else if(m!==f)break}m?m.parentNode.insertBefore(n,m.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(n,s.firstChild))}function Fm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Bm(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var _h=null;function lE(n,s,a){if(_h===null){var u=new Map,f=_h=new Map;f.set(a,u)}else f=_h,u=f.get(a),u||(u=new Map,f.set(a,u));if(u.has(n))return u;for(u.set(n,null),a=a.getElementsByTagName(n),f=0;f<a.length;f++){var m=a[f];if(!(m[qs]||m[Ut]||n==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var E=m.getAttribute(s)||"";E=n+E;var S=u.get(E);S?S.push(m):u.set(E,[m])}}return u}function uE(n,s,a){n=n.ownerDocument||n,n.head.insertBefore(a,s==="title"?n.querySelector("head > title"):null)}function a1(n,s,a){if(a===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function cE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var uu=null;function o1(){}function l1(n,s,a){if(uu===null)throw Error(i(475));var u=uu;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=wo(a.href),m=n.querySelector(ou(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=vh.bind(u),n.then(u,u)),s.state.loading|=4,s.instance=m,At(m);return}m=n.ownerDocument||n,a=aE(a),(f=Jn.get(f))&&Fm(a,f),m=m.createElement("link"),At(m);var E=m;E._p=new Promise(function(S,C){E.onload=S,E.onerror=C}),nn(m,"link",a),s.instance=m}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=vh.bind(u),n.addEventListener("load",s),n.addEventListener("error",s))}}function u1(){if(uu===null)throw Error(i(475));var n=uu;return n.stylesheets&&n.count===0&&qm(n,n.stylesheets),0<n.count?function(s){var a=setTimeout(function(){if(n.stylesheets&&qm(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(a)}}:null}function vh(){if(this.count--,this.count===0){if(this.stylesheets)qm(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Eh=null;function qm(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Eh=new Map,s.forEach(c1,n),Eh=null,vh.call(n))}function c1(n,s){if(!(s.state.loading&4)){var a=Eh.get(n);if(a)var u=a.get(null);else{a=new Map,Eh.set(n,a);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var E=f[m];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(a.set(E.dataset.precedence,E),u=E)}u&&a.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),m=a.get(E)||u,m===u&&a.set(null,f),a.set(E,f),this.count++,u=vh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),m?m.parentNode.insertBefore(f,m.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var cu={$$typeof:re,Provider:null,Consumer:null,_currentValue:Te,_currentValue2:Te,_threadCount:0};function h1(n,s,a,u,f,m,E,S){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jr(0),this.hiddenUpdates=Jr(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function hE(n,s,a,u,f,m,E,S,C,G,ee,ie){return n=new h1(n,s,a,E,S,C,G,ie),s=1,m===!0&&(s|=24),m=On(3,null,null,s),n.current=m,m.stateNode=n,s=bd(),s.refCount++,n.pooledCache=s,s.refCount++,m.memoizedState={element:u,isDehydrated:a,cache:s},Cd(m),n}function fE(n){return n?(n=no,n):no}function dE(n,s,a,u,f,m){f=fE(f),u.context===null?u.context=f:u.pendingContext=f,u=ts(s),u.payload={element:a},m=m===void 0?null:m,m!==null&&(u.callback=m),a=ns(n,u,s),a!==null&&(Ln(a,n,s),zl(a,n,s))}function mE(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<s?a:s}}function Hm(n,s){mE(n,s),(n=n.alternate)&&mE(n,s)}function pE(n){if(n.tag===13){var s=to(n,67108864);s!==null&&Ln(s,n,67108864),Hm(n,67108864)}}var Th=!0;function f1(n,s,a,u){var f=$.T;$.T=null;var m=le.p;try{le.p=2,Gm(n,s,a,u)}finally{le.p=m,$.T=f}}function d1(n,s,a,u){var f=$.T;$.T=null;var m=le.p;try{le.p=8,Gm(n,s,a,u)}finally{le.p=m,$.T=f}}function Gm(n,s,a,u){if(Th){var f=$m(u);if(f===null)Om(n,s,u,Sh,a),yE(n,u);else if(p1(f,n,s,a,u))u.stopPropagation();else if(yE(n,u),s&4&&-1<m1.indexOf(n)){for(;f!==null;){var m=Tr(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var E=xn(m.pendingLanes);if(E!==0){var S=m;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var C=1<<31-rt(E);S.entanglements[1]|=C,E&=~C}kr(m),(it&6)===0&&(sh=Tn()+500,ru(0))}}break;case 13:S=to(m,2),S!==null&&Ln(S,m,2),oh(),Hm(m,2)}if(m=$m(u),m===null&&Om(n,s,u,Sh,a),m===f)break;f=m}f!==null&&u.stopPropagation()}else Om(n,s,u,null,a)}}function $m(n){return n=Hn(n),Km(n)}var Sh=null;function Km(n){if(Sh=null,n=ti(n),n!==null){var s=l(n);if(s===null)n=null;else{var a=s.tag;if(a===13){if(n=c(s),n!==null)return n;n=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return Sh=n,null}function gE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ac()){case Hi:return 2;case N:return 8;case K:case J:return 32;case pe:return 268435456;default:return 32}default:return 32}}var Qm=!1,ps=null,gs=null,ys=null,hu=new Map,fu=new Map,_s=[],m1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yE(n,s){switch(n){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":gs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":hu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(s.pointerId)}}function du(n,s,a,u,f,m){return n===null||n.nativeEvent!==m?(n={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:m,targetContainers:[f]},s!==null&&(s=Tr(s),s!==null&&pE(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function p1(n,s,a,u,f){switch(s){case"focusin":return ps=du(ps,n,s,a,u,f),!0;case"dragenter":return gs=du(gs,n,s,a,u,f),!0;case"mouseover":return ys=du(ys,n,s,a,u,f),!0;case"pointerover":var m=f.pointerId;return hu.set(m,du(hu.get(m)||null,n,s,a,u,f)),!0;case"gotpointercapture":return m=f.pointerId,fu.set(m,du(fu.get(m)||null,n,s,a,u,f)),!0}return!1}function _E(n){var s=ti(n.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){n.blockedOn=s,oc(n.priority,function(){if(a.tag===13){var u=Pn();u=$i(u);var f=to(a,u);f!==null&&Ln(f,a,u),Hm(a,u)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ah(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var a=$m(n.nativeEvent);if(a===null){a=n.nativeEvent;var u=new a.constructor(a.type,a);si=u,a.target.dispatchEvent(u),si=null}else return s=Tr(a),s!==null&&pE(s),n.blockedOn=a,!1;s.shift()}return!0}function vE(n,s,a){Ah(n)&&a.delete(s)}function g1(){Qm=!1,ps!==null&&Ah(ps)&&(ps=null),gs!==null&&Ah(gs)&&(gs=null),ys!==null&&Ah(ys)&&(ys=null),hu.forEach(vE),fu.forEach(vE)}function bh(n,s){n.blockedOn===s&&(n.blockedOn=null,Qm||(Qm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,g1)))}var wh=null;function EE(n){wh!==n&&(wh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){wh===n&&(wh=null);for(var s=0;s<n.length;s+=3){var a=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(Km(u||a)===null)continue;break}var m=Tr(a);m!==null&&(n.splice(s,3),s-=3,Kd(m,{pending:!0,data:f,method:a.method,action:u},u,f))}}))}function mu(n){function s(C){return bh(C,n)}ps!==null&&bh(ps,n),gs!==null&&bh(gs,n),ys!==null&&bh(ys,n),hu.forEach(s),fu.forEach(s);for(var a=0;a<_s.length;a++){var u=_s[a];u.blockedOn===n&&(u.blockedOn=null)}for(;0<_s.length&&(a=_s[0],a.blockedOn===null);)_E(a),a.blockedOn===null&&_s.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var f=a[u],m=a[u+1],E=f[Ct]||null;if(typeof m=="function")E||EE(a);else if(E){var S=null;if(m&&m.hasAttribute("formAction")){if(f=m,E=m[Ct]||null)S=E.formAction;else if(Km(f)!==null)continue}else S=E.action;typeof S=="function"?a[u+1]=S:(a.splice(u,3),u-=3),EE(a)}}}function Ym(n){this._internalRoot=n}Rh.prototype.render=Ym.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var a=s.current,u=Pn();dE(a,u,n,s,null,null)},Rh.prototype.unmount=Ym.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;dE(n.current,2,null,n,null,null),oh(),s[Bn]=null}};function Rh(n){this._internalRoot=n}Rh.prototype.unstable_scheduleHydration=function(n){if(n){var s=Ki();n={blockedOn:null,target:n,priority:s};for(var a=0;a<_s.length&&s!==0&&s<_s[a].priority;a++);_s.splice(a,0,n),a===0&&_E(n)}};var TE=e.version;if(TE!=="19.1.1")throw Error(i(527,TE,"19.1.1"));le.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=p(s),n=n!==null?g(n):null,n=n===null?null:n.stateNode,n};var y1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{me=Ih.inject(y1),be=Ih}catch{}}return gu.createRoot=function(n,s){if(!o(n))throw Error(i(299));var a=!1,u="",f=L_,m=U_,E=j_,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(m=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=hE(n,1,!1,null,null,a,u,f,m,E,S,null),n[Bn]=s.current,Nm(n),new Ym(s)},gu.hydrateRoot=function(n,s,a){if(!o(n))throw Error(i(299));var u=!1,f="",m=L_,E=U_,S=j_,C=null,G=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(E=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(C=a.unstable_transitionCallbacks),a.formState!==void 0&&(G=a.formState)),s=hE(n,1,!0,s,a??null,u,f,m,E,S,C,G),s.context=fE(null),a=s.current,u=Pn(),u=$i(u),f=ts(u),f.callback=null,ns(a,f,u),a=u,s.current.lanes=a,ei(s,a),kr(s),n[Bn]=s.current,Nm(n),new Rh(s)},gu.version="19.1.1",gu}var NE;function I1(){if(NE)return Zm.exports;NE=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Zm.exports=R1(),Zm.exports}var C1=I1();const xi=({children:r,onClick:e,type:t="button",variant:i="primary",disabled:o=!1,className:l="",size:c="md",fullWidth:d=!0})=>{const g={primary:"btn-primary",secondary:"btn-secondary",danger:"btn-danger",google:"btn-google"},_={sm:"btn-sm",md:"btn-md",lg:"btn-lg"},T=d?"w-full":"";return L.jsx("button",{type:t,onClick:e,disabled:o,className:`btn ${g[i]} ${_[c]} ${T} ${l}`,children:o&&i==="primary"?L.jsx("span",{className:"loading"}):r})},FT=Z.forwardRef(({type:r="text",name:e,value:t,onChange:i,placeholder:o,label:l,required:c=!1,disabled:d=!1,className:p="",error:g,icon:_,...T},A)=>{const[,V]=Z.useState(!1),[z,H]=Z.useState(!1),U=()=>V(!0),Q=()=>V(!1),F=()=>{H(!z)},re=r==="password"&&z?"text":r;return L.jsxs("div",{className:"input-group",children:[l&&L.jsxs("label",{htmlFor:e,className:"input-label",children:[l,c&&L.jsx("span",{className:"text-red-400 ml-1",children:"*"})]}),L.jsxs("div",{className:"relative",children:[_&&L.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:_}),L.jsx("input",{ref:A,type:re,id:e,name:e,value:t,onChange:i,onFocus:U,onBlur:Q,placeholder:o,required:c,disabled:d,className:`input ${_?"pl-10":""} ${r==="password"?"pr-10":""} ${g?"border-red-400 focus:border-red-400":""} ${p}`,...T}),r==="password"&&L.jsx("button",{type:"button",onClick:F,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-300 transition-colors",children:z?"":""})]}),g&&L.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center gap-1",children:[L.jsx("span",{children:""}),g]})]})});FT.displayName="Input";const BT=({userName:r,onLogout:e})=>{const[t,i]=Z.useState(!1),o=Z.useRef(null);Z.useEffect(()=>{const c=d=>{o.current&&!o.current.contains(d.target)&&i(!1)};return document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[]);const l=()=>{i(!t)};return L.jsxs("div",{className:"user-dropdown",ref:o,children:[L.jsxs("button",{className:"user-dropdown-trigger",onClick:l,"aria-expanded":t,"aria-haspopup":"true",children:[L.jsx("span",{className:"user-greeting",children:r}),L.jsx("svg",{className:`dropdown-arrow ${t?"open":""}`,width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:L.jsx("path",{d:"M1 1.5L6 6.5L11 1.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),t&&L.jsx("div",{className:"user-dropdown-menu",children:L.jsxs("button",{className:"dropdown-item logout-item",onClick:()=>{e(),i(!1)},children:[L.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[L.jsx("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),L.jsx("path",{d:"M16 17L21 12L16 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),L.jsx("path",{d:"M21 12H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),"Salir"]})})]})},OE=r=>{let e;const t=new Set,i=(g,_)=>{const T=typeof g=="function"?g(e):g;if(!Object.is(T,e)){const A=e;e=_??(typeof T!="object"||T===null)?T:Object.assign({},e,T),t.forEach(V=>V(e,A))}},o=()=>e,d={setState:i,getState:o,getInitialState:()=>p,subscribe:g=>(t.add(g),()=>t.delete(g))},p=e=r(i,o,d);return d},x1=(r=>r?OE(r):OE),D1=r=>r;function N1(r,e=D1){const t=rn.useSyncExternalStore(r.subscribe,rn.useCallback(()=>e(r.getState()),[r,e]),rn.useCallback(()=>e(r.getInitialState()),[r,e]));return rn.useDebugValue(t),t}const VE=r=>{const e=x1(r),t=i=>N1(e,i);return Object.assign(t,e),t},O1=(r=>r?VE(r):VE),V1=()=>{};var ME={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let o=r.charCodeAt(i);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},M1=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const o=r[t++];if(o<128)e[i++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[i++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],c=r[t++],d=r[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(p>>10)),e[i++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},HT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<r.length;o+=3){const l=r[o],c=o+1<r.length,d=c?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let A=(d&15)<<2|g>>6,V=g&63;p||(V=64,c||(A=64)),i.push(t[_],t[T],t[A],t[V])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(qT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):M1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const g=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||d==null||g==null||T==null)throw new k1;const A=l<<2|d>>4;if(i.push(A),g!==64){const V=d<<4&240|g>>2;if(i.push(V),T!==64){const z=g<<6&192|T;i.push(z)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class k1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const P1=function(r){const e=qT(r);return HT.encodeByteArray(e,!0)},ef=function(r){return P1(r).replace(/\./g,"")},GT=function(r){try{return HT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=()=>L1().__FIREBASE_DEFAULTS__,j1=()=>{if(typeof process>"u"||typeof ME>"u")return;const r=ME.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},z1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&GT(r[1]);return e&&JSON.parse(e)},Cf=()=>{try{return V1()||U1()||j1()||z1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},$T=r=>Cf()?.emulatorHosts?.[r],F1=r=>{const e=$T(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},KT=()=>Cf()?.config,QT=r=>Cf()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function YT(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[ef(JSON.stringify(t)),ef(JSON.stringify(c)),""].join(".")}const Ru={};function H1(){const r={prod:[],emulator:[]};for(const e of Object.keys(Ru))Ru[e]?r.emulator.push(e):r.prod.push(e);return r}function G1(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let kE=!1;function XT(r,e){if(typeof window>"u"||typeof document>"u"||!Zo(window.location.host)||Ru[r]===e||Ru[r]||kE)return;Ru[r]=e;function t(A){return`__firebase__banner__${A}`}const i="__firebase__banner",l=H1().prod.length>0;function c(){const A=document.getElementById(i);A&&A.remove()}function d(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,V){A.setAttribute("width","24"),A.setAttribute("id",V),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function g(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{kE=!0,c()},A}function _(A,V){A.setAttribute("id",V),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function T(){const A=G1(i),V=t("text"),z=document.getElementById(V)||document.createElement("span"),H=t("learnmore"),U=document.getElementById(H)||document.createElement("a"),Q=t("preprendIcon"),F=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const re=A.element;d(re),_(U,H);const _e=g();p(F,Q),re.append(F,z,U,_e),document.body.appendChild(re)}l?(z.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,z.innerText="Preview backend running in this workspace."),z.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function K1(){const r=Cf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Y1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function X1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function W1(){const r=mn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Z1(){return!K1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function J1(){try{return typeof indexedDB=="object"}catch{return!1}}function eR(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tR="FirebaseError";class ji extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=tR,Object.setPrototypeOf(this,ji.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?nR(l,i):"Error",d=`${this.serviceName}: ${c} (${o}).`;return new ji(o,d,i)}}function nR(r,e){return r.replace(rR,(t,i)=>{const o=e[i];return o!=null?String(o):`<${i}?>`})}const rR=/\{\$([^}]+)}/g;function iR(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Ia(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const o of t){if(!i.includes(o))return!1;const l=r[o],c=e[o];if(PE(l)&&PE(c)){if(!Ia(l,c))return!1}else if(l!==c)return!1}for(const o of i)if(!t.includes(o))return!1;return!0}function PE(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Eu(r){const e={};return r.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[o,l]=i.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Tu(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function sR(r,e){const t=new aR(r,e);return t.subscribe.bind(t)}class aR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let o;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");oR(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:i},o.next===void 0&&(o.next=np),o.error===void 0&&(o.error=np),o.complete===void 0&&(o.complete=np);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oR(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function np(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(r){return r&&r._delegate?r._delegate:r}class Ca{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new B1;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cR(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});i.resolve(l)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(o)}return o}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(i)??new Set;o.add(e),this.onInitCallbacks.set(i,o);const l=this.instances.get(i);return l&&e(l,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const o of i)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:uR(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uR(r){return r===_a?void 0:r}function cR(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new lR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ge||(Ge={}));const fR={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},dR=Ge.INFO,mR={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},pR=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),o=mR[e];if(o)console[o](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Zp{constructor(e){this.name=e,this._logLevel=dR,this._logHandler=pR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const gR=(r,e)=>e.some(t=>r instanceof t);let LE,UE;function yR(){return LE||(LE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _R(){return UE||(UE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WT=new WeakMap,Tp=new WeakMap,ZT=new WeakMap,rp=new WeakMap,Jp=new WeakMap;function vR(r){const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(Rs(r.result)),o()},c=()=>{i(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&WT.set(t,r)}).catch(()=>{}),Jp.set(e,r),e}function ER(r){if(Tp.has(r))return;const e=new Promise((t,i)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Tp.set(r,e)}let Sp={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Tp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||ZT.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Rs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function TR(r){Sp=r(Sp)}function SR(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(ip(this),e,...t);return ZT.set(i,e.sort?e.sort():[e]),Rs(i)}:_R().includes(r)?function(...e){return r.apply(ip(this),e),Rs(WT.get(this))}:function(...e){return Rs(r.apply(ip(this),e))}}function AR(r){return typeof r=="function"?SR(r):(r instanceof IDBTransaction&&ER(r),gR(r,yR())?new Proxy(r,Sp):r)}function Rs(r){if(r instanceof IDBRequest)return vR(r);if(rp.has(r))return rp.get(r);const e=AR(r);return e!==r&&(rp.set(r,e),Jp.set(e,r)),e}const ip=r=>Jp.get(r);function bR(r,e,{blocked:t,upgrade:i,blocking:o,terminated:l}={}){const c=indexedDB.open(r,e),d=Rs(c);return i&&c.addEventListener("upgradeneeded",p=>{i(Rs(c.result),p.oldVersion,p.newVersion,Rs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),d}const wR=["get","getKey","getAll","getAllKeys","count"],RR=["put","add","delete","clear"],sp=new Map;function jE(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(sp.get(e))return sp.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,o=RR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(o||wR.includes(t)))return;const l=async function(c,...d){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return i&&(g=g.index(d.shift())),(await Promise.all([g[t](...d),o&&p.done]))[0]};return sp.set(e,l),l}TR(r=>({...r,get:(e,t,i)=>jE(e,t)||r.get(e,t,i),has:(e,t)=>!!jE(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(CR(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function CR(r){return r.getComponent()?.type==="VERSION"}const Ap="@firebase/app",zE="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=new Zp("@firebase/app"),xR="@firebase/app-compat",DR="@firebase/analytics-compat",NR="@firebase/analytics",OR="@firebase/app-check-compat",VR="@firebase/app-check",MR="@firebase/auth",kR="@firebase/auth-compat",PR="@firebase/database",LR="@firebase/data-connect",UR="@firebase/database-compat",jR="@firebase/functions",zR="@firebase/functions-compat",FR="@firebase/installations",BR="@firebase/installations-compat",qR="@firebase/messaging",HR="@firebase/messaging-compat",GR="@firebase/performance",$R="@firebase/performance-compat",KR="@firebase/remote-config",QR="@firebase/remote-config-compat",YR="@firebase/storage",XR="@firebase/storage-compat",WR="@firebase/firestore",ZR="@firebase/ai",JR="@firebase/firestore-compat",eI="firebase",tI="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="[DEFAULT]",nI={[Ap]:"fire-core",[xR]:"fire-core-compat",[NR]:"fire-analytics",[DR]:"fire-analytics-compat",[VR]:"fire-app-check",[OR]:"fire-app-check-compat",[MR]:"fire-auth",[kR]:"fire-auth-compat",[PR]:"fire-rtdb",[LR]:"fire-data-connect",[UR]:"fire-rtdb-compat",[jR]:"fire-fn",[zR]:"fire-fn-compat",[FR]:"fire-iid",[BR]:"fire-iid-compat",[qR]:"fire-fcm",[HR]:"fire-fcm-compat",[GR]:"fire-perf",[$R]:"fire-perf-compat",[KR]:"fire-rc",[QR]:"fire-rc-compat",[YR]:"fire-gcs",[XR]:"fire-gcs-compat",[WR]:"fire-fst",[JR]:"fire-fst-compat",[ZR]:"fire-vertex","fire-js":"fire-js",[eI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tf=new Map,rI=new Map,wp=new Map;function FE(r,e){try{r.container.addComponent(e)}catch(t){Vi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Ho(r){const e=r.name;if(wp.has(e))return Vi.debug(`There were multiple attempts to register component ${e}.`),!1;wp.set(e,r);for(const t of tf.values())FE(t,r);for(const t of rI.values())FE(t,r);return!0}function eg(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Un(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Is=new Gu("app","Firebase",iI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ca("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Is.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=tI;function JT(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:bp,automaticDataCollectionEnabled:!0,...e},o=i.name;if(typeof o!="string"||!o)throw Is.create("bad-app-name",{appName:String(o)});if(t||(t=KT()),!t)throw Is.create("no-options");const l=tf.get(o);if(l){if(Ia(t,l.options)&&Ia(i,l.config))return l;throw Is.create("duplicate-app",{appName:o})}const c=new hR(o);for(const p of wp.values())c.addComponent(p);const d=new sI(t,i,c);return tf.set(o,d),d}function eS(r=bp){const e=tf.get(r);if(!e&&r===bp&&KT())return JT();if(!e)throw Is.create("no-app",{appName:r});return e}function Cs(r,e,t){let i=nI[r]??r;t&&(i+=`-${t}`);const o=i.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${i}" with version "${e}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Vi.warn(c.join(" "));return}Ho(new Ca(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="firebase-heartbeat-database",oI=1,Mu="firebase-heartbeat-store";let ap=null;function tS(){return ap||(ap=bR(aI,oI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Mu)}catch(t){console.warn(t)}}}}).catch(r=>{throw Is.create("idb-open",{originalErrorMessage:r.message})})),ap}async function lI(r){try{const t=(await tS()).transaction(Mu),i=await t.objectStore(Mu).get(nS(r));return await t.done,i}catch(e){if(e instanceof ji)Vi.warn(e.message);else{const t=Is.create("idb-get",{originalErrorMessage:e?.message});Vi.warn(t.message)}}}async function BE(r,e){try{const i=(await tS()).transaction(Mu,"readwrite");await i.objectStore(Mu).put(e,nS(r)),await i.done}catch(t){if(t instanceof ji)Vi.warn(t.message);else{const i=Is.create("idb-set",{originalErrorMessage:t?.message});Vi.warn(i.message)}}}function nS(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=1024,cI=30;class hI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dI(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>cI){const o=mI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Vi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=qE(),{heartbeatsToSend:t,unsentEntries:i}=fI(this._heartbeatsCache.heartbeats),o=ef(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Vi.warn(e),""}}}function qE(){return new Date().toISOString().substring(0,10)}function fI(r,e=uI){const t=[];let i=r.slice();for(const o of r){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),HE(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),HE(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class dI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return J1()?eR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return BE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return BE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function HE(r){return ef(JSON.stringify({version:2,heartbeats:r})).length}function mI(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(r){Ho(new Ca("platform-logger",e=>new IR(e),"PRIVATE")),Ho(new Ca("heartbeat",e=>new hI(e),"PRIVATE")),Cs(Ap,zE,r),Cs(Ap,zE,"esm2020"),Cs("fire-js","")}pI("");var GE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xs,rS;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,I){function w(){}w.prototype=I.prototype,k.D=I.prototype,k.prototype=new w,k.prototype.constructor=k,k.C=function(O,x,D){for(var R=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)R[Re-2]=arguments[Re];return I.prototype[x].apply(O,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(k,I,w){w||(w=0);var O=Array(16);if(typeof I=="string")for(var x=0;16>x;++x)O[x]=I.charCodeAt(w++)|I.charCodeAt(w++)<<8|I.charCodeAt(w++)<<16|I.charCodeAt(w++)<<24;else for(x=0;16>x;++x)O[x]=I[w++]|I[w++]<<8|I[w++]<<16|I[w++]<<24;I=k.g[0],w=k.g[1],x=k.g[2];var D=k.g[3],R=I+(D^w&(x^D))+O[0]+3614090360&4294967295;I=w+(R<<7&4294967295|R>>>25),R=D+(x^I&(w^x))+O[1]+3905402710&4294967295,D=I+(R<<12&4294967295|R>>>20),R=x+(w^D&(I^w))+O[2]+606105819&4294967295,x=D+(R<<17&4294967295|R>>>15),R=w+(I^x&(D^I))+O[3]+3250441966&4294967295,w=x+(R<<22&4294967295|R>>>10),R=I+(D^w&(x^D))+O[4]+4118548399&4294967295,I=w+(R<<7&4294967295|R>>>25),R=D+(x^I&(w^x))+O[5]+1200080426&4294967295,D=I+(R<<12&4294967295|R>>>20),R=x+(w^D&(I^w))+O[6]+2821735955&4294967295,x=D+(R<<17&4294967295|R>>>15),R=w+(I^x&(D^I))+O[7]+4249261313&4294967295,w=x+(R<<22&4294967295|R>>>10),R=I+(D^w&(x^D))+O[8]+1770035416&4294967295,I=w+(R<<7&4294967295|R>>>25),R=D+(x^I&(w^x))+O[9]+2336552879&4294967295,D=I+(R<<12&4294967295|R>>>20),R=x+(w^D&(I^w))+O[10]+4294925233&4294967295,x=D+(R<<17&4294967295|R>>>15),R=w+(I^x&(D^I))+O[11]+2304563134&4294967295,w=x+(R<<22&4294967295|R>>>10),R=I+(D^w&(x^D))+O[12]+1804603682&4294967295,I=w+(R<<7&4294967295|R>>>25),R=D+(x^I&(w^x))+O[13]+4254626195&4294967295,D=I+(R<<12&4294967295|R>>>20),R=x+(w^D&(I^w))+O[14]+2792965006&4294967295,x=D+(R<<17&4294967295|R>>>15),R=w+(I^x&(D^I))+O[15]+1236535329&4294967295,w=x+(R<<22&4294967295|R>>>10),R=I+(x^D&(w^x))+O[1]+4129170786&4294967295,I=w+(R<<5&4294967295|R>>>27),R=D+(w^x&(I^w))+O[6]+3225465664&4294967295,D=I+(R<<9&4294967295|R>>>23),R=x+(I^w&(D^I))+O[11]+643717713&4294967295,x=D+(R<<14&4294967295|R>>>18),R=w+(D^I&(x^D))+O[0]+3921069994&4294967295,w=x+(R<<20&4294967295|R>>>12),R=I+(x^D&(w^x))+O[5]+3593408605&4294967295,I=w+(R<<5&4294967295|R>>>27),R=D+(w^x&(I^w))+O[10]+38016083&4294967295,D=I+(R<<9&4294967295|R>>>23),R=x+(I^w&(D^I))+O[15]+3634488961&4294967295,x=D+(R<<14&4294967295|R>>>18),R=w+(D^I&(x^D))+O[4]+3889429448&4294967295,w=x+(R<<20&4294967295|R>>>12),R=I+(x^D&(w^x))+O[9]+568446438&4294967295,I=w+(R<<5&4294967295|R>>>27),R=D+(w^x&(I^w))+O[14]+3275163606&4294967295,D=I+(R<<9&4294967295|R>>>23),R=x+(I^w&(D^I))+O[3]+4107603335&4294967295,x=D+(R<<14&4294967295|R>>>18),R=w+(D^I&(x^D))+O[8]+1163531501&4294967295,w=x+(R<<20&4294967295|R>>>12),R=I+(x^D&(w^x))+O[13]+2850285829&4294967295,I=w+(R<<5&4294967295|R>>>27),R=D+(w^x&(I^w))+O[2]+4243563512&4294967295,D=I+(R<<9&4294967295|R>>>23),R=x+(I^w&(D^I))+O[7]+1735328473&4294967295,x=D+(R<<14&4294967295|R>>>18),R=w+(D^I&(x^D))+O[12]+2368359562&4294967295,w=x+(R<<20&4294967295|R>>>12),R=I+(w^x^D)+O[5]+4294588738&4294967295,I=w+(R<<4&4294967295|R>>>28),R=D+(I^w^x)+O[8]+2272392833&4294967295,D=I+(R<<11&4294967295|R>>>21),R=x+(D^I^w)+O[11]+1839030562&4294967295,x=D+(R<<16&4294967295|R>>>16),R=w+(x^D^I)+O[14]+4259657740&4294967295,w=x+(R<<23&4294967295|R>>>9),R=I+(w^x^D)+O[1]+2763975236&4294967295,I=w+(R<<4&4294967295|R>>>28),R=D+(I^w^x)+O[4]+1272893353&4294967295,D=I+(R<<11&4294967295|R>>>21),R=x+(D^I^w)+O[7]+4139469664&4294967295,x=D+(R<<16&4294967295|R>>>16),R=w+(x^D^I)+O[10]+3200236656&4294967295,w=x+(R<<23&4294967295|R>>>9),R=I+(w^x^D)+O[13]+681279174&4294967295,I=w+(R<<4&4294967295|R>>>28),R=D+(I^w^x)+O[0]+3936430074&4294967295,D=I+(R<<11&4294967295|R>>>21),R=x+(D^I^w)+O[3]+3572445317&4294967295,x=D+(R<<16&4294967295|R>>>16),R=w+(x^D^I)+O[6]+76029189&4294967295,w=x+(R<<23&4294967295|R>>>9),R=I+(w^x^D)+O[9]+3654602809&4294967295,I=w+(R<<4&4294967295|R>>>28),R=D+(I^w^x)+O[12]+3873151461&4294967295,D=I+(R<<11&4294967295|R>>>21),R=x+(D^I^w)+O[15]+530742520&4294967295,x=D+(R<<16&4294967295|R>>>16),R=w+(x^D^I)+O[2]+3299628645&4294967295,w=x+(R<<23&4294967295|R>>>9),R=I+(x^(w|~D))+O[0]+4096336452&4294967295,I=w+(R<<6&4294967295|R>>>26),R=D+(w^(I|~x))+O[7]+1126891415&4294967295,D=I+(R<<10&4294967295|R>>>22),R=x+(I^(D|~w))+O[14]+2878612391&4294967295,x=D+(R<<15&4294967295|R>>>17),R=w+(D^(x|~I))+O[5]+4237533241&4294967295,w=x+(R<<21&4294967295|R>>>11),R=I+(x^(w|~D))+O[12]+1700485571&4294967295,I=w+(R<<6&4294967295|R>>>26),R=D+(w^(I|~x))+O[3]+2399980690&4294967295,D=I+(R<<10&4294967295|R>>>22),R=x+(I^(D|~w))+O[10]+4293915773&4294967295,x=D+(R<<15&4294967295|R>>>17),R=w+(D^(x|~I))+O[1]+2240044497&4294967295,w=x+(R<<21&4294967295|R>>>11),R=I+(x^(w|~D))+O[8]+1873313359&4294967295,I=w+(R<<6&4294967295|R>>>26),R=D+(w^(I|~x))+O[15]+4264355552&4294967295,D=I+(R<<10&4294967295|R>>>22),R=x+(I^(D|~w))+O[6]+2734768916&4294967295,x=D+(R<<15&4294967295|R>>>17),R=w+(D^(x|~I))+O[13]+1309151649&4294967295,w=x+(R<<21&4294967295|R>>>11),R=I+(x^(w|~D))+O[4]+4149444226&4294967295,I=w+(R<<6&4294967295|R>>>26),R=D+(w^(I|~x))+O[11]+3174756917&4294967295,D=I+(R<<10&4294967295|R>>>22),R=x+(I^(D|~w))+O[2]+718787259&4294967295,x=D+(R<<15&4294967295|R>>>17),R=w+(D^(x|~I))+O[9]+3951481745&4294967295,k.g[0]=k.g[0]+I&4294967295,k.g[1]=k.g[1]+(x+(R<<21&4294967295|R>>>11))&4294967295,k.g[2]=k.g[2]+x&4294967295,k.g[3]=k.g[3]+D&4294967295}i.prototype.u=function(k,I){I===void 0&&(I=k.length);for(var w=I-this.blockSize,O=this.B,x=this.h,D=0;D<I;){if(x==0)for(;D<=w;)o(this,k,D),D+=this.blockSize;if(typeof k=="string"){for(;D<I;)if(O[x++]=k.charCodeAt(D++),x==this.blockSize){o(this,O),x=0;break}}else for(;D<I;)if(O[x++]=k[D++],x==this.blockSize){o(this,O),x=0;break}}this.h=x,this.o+=I},i.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var I=1;I<k.length-8;++I)k[I]=0;var w=8*this.o;for(I=k.length-8;I<k.length;++I)k[I]=w&255,w/=256;for(this.u(k),k=Array(16),I=w=0;4>I;++I)for(var O=0;32>O;O+=8)k[w++]=this.g[I]>>>O&255;return k};function l(k,I){var w=d;return Object.prototype.hasOwnProperty.call(w,k)?w[k]:w[k]=I(k)}function c(k,I){this.h=I;for(var w=[],O=!0,x=k.length-1;0<=x;x--){var D=k[x]|0;O&&D==I||(w[x]=D,O=!1)}this.g=w}var d={};function p(k){return-128<=k&&128>k?l(k,function(I){return new c([I|0],0>I?-1:0)}):new c([k|0],0>k?-1:0)}function g(k){if(isNaN(k)||!isFinite(k))return T;if(0>k)return U(g(-k));for(var I=[],w=1,O=0;k>=w;O++)I[O]=k/w|0,w*=4294967296;return new c(I,0)}function _(k,I){if(k.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k.charAt(0)=="-")return U(_(k.substring(1),I));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=g(Math.pow(I,8)),O=T,x=0;x<k.length;x+=8){var D=Math.min(8,k.length-x),R=parseInt(k.substring(x,x+D),I);8>D?(D=g(Math.pow(I,D)),O=O.j(D).add(g(R))):(O=O.j(w),O=O.add(g(R)))}return O}var T=p(0),A=p(1),V=p(16777216);r=c.prototype,r.m=function(){if(H(this))return-U(this).m();for(var k=0,I=1,w=0;w<this.g.length;w++){var O=this.i(w);k+=(0<=O?O:4294967296+O)*I,I*=4294967296}return k},r.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(z(this))return"0";if(H(this))return"-"+U(this).toString(k);for(var I=g(Math.pow(k,6)),w=this,O="";;){var x=_e(w,I).g;w=Q(w,x.j(I));var D=((0<w.g.length?w.g[0]:w.h)>>>0).toString(k);if(w=x,z(w))return D+O;for(;6>D.length;)D="0"+D;O=D+O}},r.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function z(k){if(k.h!=0)return!1;for(var I=0;I<k.g.length;I++)if(k.g[I]!=0)return!1;return!0}function H(k){return k.h==-1}r.l=function(k){return k=Q(this,k),H(k)?-1:z(k)?0:1};function U(k){for(var I=k.g.length,w=[],O=0;O<I;O++)w[O]=~k.g[O];return new c(w,~k.h).add(A)}r.abs=function(){return H(this)?U(this):this},r.add=function(k){for(var I=Math.max(this.g.length,k.g.length),w=[],O=0,x=0;x<=I;x++){var D=O+(this.i(x)&65535)+(k.i(x)&65535),R=(D>>>16)+(this.i(x)>>>16)+(k.i(x)>>>16);O=R>>>16,D&=65535,R&=65535,w[x]=R<<16|D}return new c(w,w[w.length-1]&-2147483648?-1:0)};function Q(k,I){return k.add(U(I))}r.j=function(k){if(z(this)||z(k))return T;if(H(this))return H(k)?U(this).j(U(k)):U(U(this).j(k));if(H(k))return U(this.j(U(k)));if(0>this.l(V)&&0>k.l(V))return g(this.m()*k.m());for(var I=this.g.length+k.g.length,w=[],O=0;O<2*I;O++)w[O]=0;for(O=0;O<this.g.length;O++)for(var x=0;x<k.g.length;x++){var D=this.i(O)>>>16,R=this.i(O)&65535,Re=k.i(x)>>>16,Ae=k.i(x)&65535;w[2*O+2*x]+=R*Ae,F(w,2*O+2*x),w[2*O+2*x+1]+=D*Ae,F(w,2*O+2*x+1),w[2*O+2*x+1]+=R*Re,F(w,2*O+2*x+1),w[2*O+2*x+2]+=D*Re,F(w,2*O+2*x+2)}for(O=0;O<I;O++)w[O]=w[2*O+1]<<16|w[2*O];for(O=I;O<2*I;O++)w[O]=0;return new c(w,0)};function F(k,I){for(;(k[I]&65535)!=k[I];)k[I+1]+=k[I]>>>16,k[I]&=65535,I++}function re(k,I){this.g=k,this.h=I}function _e(k,I){if(z(I))throw Error("division by zero");if(z(k))return new re(T,T);if(H(k))return I=_e(U(k),I),new re(U(I.g),U(I.h));if(H(I))return I=_e(k,U(I)),new re(U(I.g),I.h);if(30<k.g.length){if(H(k)||H(I))throw Error("slowDivide_ only works with positive integers.");for(var w=A,O=I;0>=O.l(k);)w=ae(w),O=ae(O);var x=Se(w,1),D=Se(O,1);for(O=Se(O,2),w=Se(w,2);!z(O);){var R=D.add(O);0>=R.l(k)&&(x=x.add(w),D=R),O=Se(O,1),w=Se(w,1)}return I=Q(k,x.j(I)),new re(x,I)}for(x=T;0<=k.l(I);){for(w=Math.max(1,Math.floor(k.m()/I.m())),O=Math.ceil(Math.log(w)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),D=g(w),R=D.j(I);H(R)||0<R.l(k);)w-=O,D=g(w),R=D.j(I);z(D)&&(D=A),x=x.add(D),k=Q(k,R)}return new re(x,k)}r.A=function(k){return _e(this,k).h},r.and=function(k){for(var I=Math.max(this.g.length,k.g.length),w=[],O=0;O<I;O++)w[O]=this.i(O)&k.i(O);return new c(w,this.h&k.h)},r.or=function(k){for(var I=Math.max(this.g.length,k.g.length),w=[],O=0;O<I;O++)w[O]=this.i(O)|k.i(O);return new c(w,this.h|k.h)},r.xor=function(k){for(var I=Math.max(this.g.length,k.g.length),w=[],O=0;O<I;O++)w[O]=this.i(O)^k.i(O);return new c(w,this.h^k.h)};function ae(k){for(var I=k.g.length+1,w=[],O=0;O<I;O++)w[O]=k.i(O)<<1|k.i(O-1)>>>31;return new c(w,k.h)}function Se(k,I){var w=I>>5;I%=32;for(var O=k.g.length-w,x=[],D=0;D<O;D++)x[D]=0<I?k.i(D+w)>>>I|k.i(D+w+1)<<32-I:k.i(D+w);return new c(x,k.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,rS=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,xs=c}).apply(typeof GE<"u"?GE:typeof self<"u"?self:typeof window<"u"?window:{});var Ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iS,Su,sS,Uh,Rp,aS,oS,lS;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,y,v){return h==Array.prototype||h==Object.prototype||(h[y]=v.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ch=="object"&&Ch];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function o(h,y){if(y)e:{var v=i;h=h.split(".");for(var b=0;b<h.length-1;b++){var B=h[b];if(!(B in v))break e;v=v[B]}h=h[h.length-1],b=v[h],y=y(b),y!=b&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}function l(h,y){h instanceof String&&(h+="");var v=0,b=!1,B={next:function(){if(!b&&v<h.length){var W=v++;return{value:y(W,h[W]),done:!1}}return b=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}o("Array.prototype.values",function(h){return h||function(){return l(this,function(y,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function p(h){var y=typeof h;return y=y!="object"?y:h?Array.isArray(h)?"array":y:"null",y=="array"||y=="object"&&typeof h.length=="number"}function g(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function _(h,y,v){return h.call.apply(h.bind,arguments)}function T(h,y,v){if(!h)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,b),h.apply(y,B)}}return function(){return h.apply(y,arguments)}}function A(h,y,v){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:T,A.apply(null,arguments)}function V(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),h.apply(this,b)}}function z(h,y){function v(){}v.prototype=y.prototype,h.aa=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Qb=function(b,B,W){for(var he=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)he[Qe-2]=arguments[Qe];return y.prototype[B].apply(b,he)}}function H(h){const y=h.length;if(0<y){const v=Array(y);for(let b=0;b<y;b++)v[b]=h[b];return v}return[]}function U(h,y){for(let v=1;v<arguments.length;v++){const b=arguments[v];if(p(b)){const B=h.length||0,W=b.length||0;h.length=B+W;for(let he=0;he<W;he++)h[B+he]=b[he]}else h.push(b)}}class Q{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(h){return/^[\s\xa0]*$/.test(h)}function re(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function _e(h){return _e[" "](h),h}_e[" "]=function(){};var ae=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function Se(h,y,v){for(const b in h)y.call(v,h[b],b,h)}function k(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function I(h){const y={};for(const v in h)y[v]=h[v];return y}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(h,y){let v,b;for(let B=1;B<arguments.length;B++){b=arguments[B];for(v in b)h[v]=b[v];for(let W=0;W<w.length;W++)v=w[W],Object.prototype.hasOwnProperty.call(b,v)&&(h[v]=b[v])}}function x(h){var y=1;h=h.split(":");const v=[];for(;0<y&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function D(h){d.setTimeout(()=>{throw h},0)}function R(){var h=Fe;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Re{constructor(){this.h=this.g=null}add(y,v){const b=Ae.get();b.set(y,v),this.h?this.h.next=b:this.g=b,this.h=b}}var Ae=new Q(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let le,Te=!1,Fe=new Re,M=()=>{const h=d.Promise.resolve(void 0);le=()=>{h.then(oe)}};var oe=()=>{for(var h;h=R();){try{h.h.call(h.g)}catch(v){D(v)}var y=Ae;y.j(h),100>y.h&&(y.h++,h.next=y.g,y.g=h)}Te=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Ie=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};d.addEventListener("test",v,y),d.removeEventListener("test",v,y)}catch{}return h})();function Le(h,y){if(ue.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var v=this.type=h.type,b=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget){if(ae){e:{try{_e(y.nodeName);var B=!0;break e}catch{}B=!1}B||(y=null)}}else v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement);this.relatedTarget=y,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ve[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Le.aa.h.call(this)}}z(Le,ue);var Ve={2:"touch",3:"pen",4:"mouse"};Le.prototype.h=function(){Le.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Et="closure_listenable_"+(1e6*Math.random()|0),nt=0;function En(h,y,v,b,B){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!b,this.ha=B,this.key=++nt,this.da=this.fa=!1}function zn(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function nr(h){this.src=h,this.g={},this.h=0}nr.prototype.add=function(h,y,v,b,B){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var he=Qr(h,y,b,B);return-1<he?(y=h[he],v||(y.fa=!1)):(y=new En(y,this.src,W,!!b,B),y.fa=v,h.push(y)),y};function _r(h,y){var v=y.type;if(v in h.g){var b=h.g[v],B=Array.prototype.indexOf.call(b,y,void 0),W;(W=0<=B)&&Array.prototype.splice.call(b,B,1),W&&(zn(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Qr(h,y,v,b){for(var B=0;B<h.length;++B){var W=h[B];if(!W.da&&W.listener==y&&W.capture==!!v&&W.ha==b)return B}return-1}var vr="closure_lm_"+(1e6*Math.random()|0),qi={};function Pa(h,y,v,b,B){if(Array.isArray(y)){for(var W=0;W<y.length;W++)Pa(h,y[W],v,b,B);return null}return v=ce(v),h&&h[Et]?h.K(y,v,g(b)?!!b.capture:!1,B):Tn(h,y,v,!1,b,B)}function Tn(h,y,v,b,B,W){if(!y)throw Error("Invalid event type");var he=g(B)?!!B.capture:!!B,Qe=pe(h);if(Qe||(h[vr]=Qe=new nr(h)),v=Qe.add(y,v,b,he,W),v.proxy)return v;if(b=ac(),v.proxy=b,b.src=h,b.listener=v,h.addEventListener)Ie||(B=he),B===void 0&&(B=!1),h.addEventListener(y.toString(),b,B);else if(h.attachEvent)h.attachEvent(K(y.toString()),b);else if(h.addListener&&h.removeListener)h.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ac(){function h(v){return y.call(h.src,h.listener,v)}const y=J;return h}function Hi(h,y,v,b,B){if(Array.isArray(y))for(var W=0;W<y.length;W++)Hi(h,y[W],v,b,B);else b=g(b)?!!b.capture:!!b,v=ce(v),h&&h[Et]?(h=h.i,y=String(y).toString(),y in h.g&&(W=h.g[y],v=Qr(W,v,b,B),-1<v&&(zn(W[v]),Array.prototype.splice.call(W,v,1),W.length==0&&(delete h.g[y],h.h--)))):h&&(h=pe(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Qr(y,v,b,B)),(v=-1<h?y[h]:null)&&N(v))}function N(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[Et])_r(y.i,h);else{var v=h.type,b=h.proxy;y.removeEventListener?y.removeEventListener(v,b,h.capture):y.detachEvent?y.detachEvent(K(v),b):y.addListener&&y.removeListener&&y.removeListener(b),(v=pe(y))?(_r(v,h),v.h==0&&(v.src=null,y[vr]=null)):zn(h)}}}function K(h){return h in qi?qi[h]:qi[h]="on"+h}function J(h,y){if(h.da)h=!0;else{y=new Le(y,this);var v=h.listener,b=h.ha||h.src;h.fa&&N(h),h=v.call(b,y)}return h}function pe(h){return h=h[vr],h instanceof nr?h:null}var fe="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(h){return typeof h=="function"?h:(h[fe]||(h[fe]=function(y){return h.handleEvent(y)}),h[fe])}function me(){de.call(this),this.i=new nr(this),this.M=this,this.F=null}z(me,de),me.prototype[Et]=!0,me.prototype.removeEventListener=function(h,y,v,b){Hi(this,h,y,v,b)};function be(h,y){var v,b=h.F;if(b)for(v=[];b;b=b.F)v.push(b);if(h=h.M,b=y.type||y,typeof y=="string")y=new ue(y,h);else if(y instanceof ue)y.target=y.target||h;else{var B=y;y=new ue(b,h),O(y,B)}if(B=!0,v)for(var W=v.length-1;0<=W;W--){var he=y.g=v[W];B=je(he,b,!0,y)&&B}if(he=y.g=h,B=je(he,b,!0,y)&&B,B=je(he,b,!1,y)&&B,v)for(W=0;W<v.length;W++)he=y.g=v[W],B=je(he,b,!1,y)&&B}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var h=this.i,y;for(y in h.g){for(var v=h.g[y],b=0;b<v.length;b++)zn(v[b]);delete h.g[y],h.h--}}this.F=null},me.prototype.K=function(h,y,v,b){return this.i.add(String(h),y,!1,v,b)},me.prototype.L=function(h,y,v,b){return this.i.add(String(h),y,!0,v,b)};function je(h,y,v,b){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();for(var B=!0,W=0;W<y.length;++W){var he=y[W];if(he&&!he.da&&he.capture==v){var Qe=he.listener,jt=he.ha||he.src;he.fa&&_r(h.i,he),B=Qe.call(jt,b)!==!1&&B}}return B&&!b.defaultPrevented}function rt(h,y,v){if(typeof h=="function")v&&(h=A(h,v));else if(h&&typeof h.handleEvent=="function")h=A(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:d.setTimeout(h,y||0)}function Yr(h){h.g=rt(()=>{h.g=null,h.i&&(h.i=!1,Yr(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Fn extends de{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Yr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xr(h){de.call(this),this.h=h,this.g={}}z(Xr,de);var rr=[];function ir(h){Se(h.g,function(y,v){this.g.hasOwnProperty(v)&&N(y)},h),h.g={}}Xr.prototype.N=function(){Xr.aa.N.call(this),ir(this)},Xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xn=d.JSON.stringify,Wr=d.JSON.parse,Zr=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function Gi(){}Gi.prototype.h=null;function hl(h){return h.h||(h.h=h.i())}function fl(){}var Jr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ei(){ue.call(this,"d")}z(ei,ue);function dl(){ue.call(this,"c")}z(dl,ue);var Er={},ml=null;function $i(){return ml=ml||new me}Er.La="serverreachability";function La(h){ue.call(this,Er.La,h)}z(La,ue);function Ki(h){const y=$i();be(y,new La(y))}Er.STAT_EVENT="statevent";function oc(h,y){ue.call(this,Er.STAT_EVENT,h),this.stat=y}z(oc,ue);function pt(h){const y=$i();be(y,new oc(y,h))}Er.Ma="timingevent";function Ut(h,y){ue.call(this,Er.Ma,h),this.size=y}z(Ut,ue);function Ct(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},y)}function Bn(){this.g=!0}Bn.prototype.xa=function(){this.g=!1};function pl(h,y,v,b,B,W){h.info(function(){if(h.g)if(W)for(var he="",Qe=W.split("&"),jt=0;jt<Qe.length;jt++){var Ye=Qe[jt].split("=");if(1<Ye.length){var Gt=Ye[0];Ye=Ye[1];var zt=Gt.split("_");he=2<=zt.length&&zt[1]=="type"?he+(Gt+"="+Ye+"&"):he+(Gt+"=redacted&")}}else he=null;else he=W;return"XMLHTTP REQ ("+b+") [attempt "+B+"]: "+y+`
`+v+`
`+he})}function Jf(h,y,v,b,B,W,he){h.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+B+"]: "+y+`
`+v+`
`+W+" "+he})}function Qi(h,y,v,b){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+qs(h,v)+(b?" "+b:"")})}function lc(h,y){h.info(function(){return"TIMEOUT: "+y})}Bn.prototype.info=function(){};function qs(h,y){if(!h.g)return y;if(!y)return null;try{var v=JSON.parse(y);if(v){for(h=0;h<v.length;h++)if(Array.isArray(v[h])){var b=v[h];if(!(2>b.length)){var B=b[1];if(Array.isArray(B)&&!(1>B.length)){var W=B[0];if(W!="noop"&&W!="stop"&&W!="close")for(var he=1;he<B.length;he++)B[he]=""}}}}return xn(v)}catch{return y}}var Yi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ti={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tr;function Sr(){}z(Sr,Gi),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},Tr=new Sr;function pn(h,y,v,b){this.j=h,this.i=y,this.l=v,this.R=b||1,this.U=new Xr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new At}function At(){this.i=null,this.g="",this.h=!1}var gl={},Ua={};function sr(h,y,v){h.L=1,h.v=Qs(Dn(y)),h.m=v,h.P=!0,ni(h,null)}function ni(h,y){h.F=Date.now(),Hs(h),h.A=Dn(h.v);var v=h.A,b=h.R;Array.isArray(b)||(b=[String(b)]),Sl(v.i,"t",b),h.C=0,v=h.j.J,h.h=new At,h.g=bc(h.j,v?y:null,!h.m),0<h.O&&(h.M=new Fn(A(h.Y,h,h.g),h.O)),y=h.U,v=h.g,b=h.ca;var B="readystatechange";Array.isArray(B)||(B&&(rr[0]=B.toString()),B=rr);for(var W=0;W<B.length;W++){var he=Pa(v,B[W],b||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=h.H?I(h.H):{},h.m?(h.u||(h.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,y)):(h.u="GET",h.g.ea(h.A,h.u,null,y)),Ki(),pl(h.i,h.u,h.A,h.l,h.R,h.m)}pn.prototype.ca=function(h){h=h.target;const y=this.M;y&&$n(h)==3?y.j():this.Y(h)},pn.prototype.Y=function(h){try{if(h==this.g)e:{const zt=$n(this.g);var y=this.g.Ba();const ci=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||gc(this.g)))){this.J||zt!=4||y==7||(y==8||0>=ci?Ki(3):Ki(2)),Xi(this);var v=this.g.Z();this.X=v;t:if(uc(this)){var b=gc(this.g);h="";var B=b.length,W=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),Ar(this);var he="";break t}this.h.i=new d.TextDecoder}for(y=0;y<B;y++)this.h.h=!0,h+=this.h.i.decode(b[y],{stream:!(W&&y==B-1)});b.length=0,this.h.g+=h,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=v==200,Jf(this.i,this.u,this.A,this.l,this.R,zt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,jt=this.g;if((Qe=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(Qe)){var Ye=Qe;break t}}Ye=null}if(v=Ye)Qi(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gs(this,v);else{this.o=!1,this.s=3,pt(12),Zt(this),Ar(this);break e}}if(this.P){v=!0;let Jt;for(;!this.J&&this.C<he.length;)if(Jt=cc(this,he),Jt==Ua){zt==4&&(this.s=4,pt(14),v=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==gl){this.s=4,pt(15),Qi(this.i,this.l,he,"[Invalid Chunk]"),v=!1;break}else Qi(this.i,this.l,Jt,null),Gs(this,Jt);if(uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||he.length!=0||this.h.h||(this.s=1,pt(16),v=!1),this.o=this.o&&v,!v)Qi(this.i,this.l,he,"[Invalid Chunked Response]"),Zt(this),Ar(this);else if(0<he.length&&!this.W){this.W=!0;var Gt=this.j;Gt.g==this&&Gt.ba&&!Gt.M&&(Gt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),na(Gt),Gt.M=!0,pt(11))}}else Qi(this.i,this.l,he,null),Gs(this,he);zt==4&&Zt(this),this.o&&!this.J&&(zt==4?Tc(this.j,this):(this.o=!1,Hs(this)))}else id(this.g),v==400&&0<he.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Zt(this),Ar(this)}}}catch{}finally{}};function uc(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function cc(h,y){var v=h.C,b=y.indexOf(`
`,v);return b==-1?Ua:(v=Number(y.substring(v,b)),isNaN(v)?gl:(b+=1,b+v>y.length?Ua:(y=y.slice(b,b+v),h.C=b+v,y)))}pn.prototype.cancel=function(){this.J=!0,Zt(this)};function Hs(h){h.S=Date.now()+h.I,hc(h,h.I)}function hc(h,y){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ct(A(h.ba,h),y)}function Xi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}pn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(lc(this.i,this.A),this.L!=2&&(Ki(),pt(17)),Zt(this),this.s=2,Ar(this)):hc(this,this.S-h)};function Ar(h){h.j.G==0||h.J||Tc(h.j,h)}function Zt(h){Xi(h);var y=h.M;y&&typeof y.ma=="function"&&y.ma(),h.M=null,ir(h.U),h.g&&(y=h.g,h.g=null,y.abort(),y.ma())}function Gs(h,y){try{var v=h.j;if(v.G!=0&&(v.g==h||yl(v.h,h))){if(!h.K&&yl(v.h,h)&&v.G==3){try{var b=v.Da.g.parse(y)}catch{b=null}if(Array.isArray(b)&&b.length==3){var B=b;if(B[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<h.F)Xa(v),Qa(v);else break e;Il(v),pt(18)}}else v.za=B[1],0<v.za-v.T&&37500>B[2]&&v.F&&v.v==0&&!v.C&&(v.C=Ct(A(v.Za,v),6e3));if(1>=za(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else ui(v,11)}else if((h.K||v.g==h)&&Xa(v),!F(y))for(B=v.Da.g.parse(y),y=0;y<B.length;y++){let Ye=B[y];if(v.T=Ye[0],Ye=Ye[1],v.G==2)if(Ye[0]=="c"){v.K=Ye[1],v.ia=Ye[2];const Gt=Ye[3];Gt!=null&&(v.la=Gt,v.j.info("VER="+v.la));const zt=Ye[4];zt!=null&&(v.Aa=zt,v.j.info("SVER="+v.Aa));const ci=Ye[5];ci!=null&&typeof ci=="number"&&0<ci&&(b=1.5*ci,v.L=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const Jt=h.g;if(Jt){const Dr=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Dr){var W=b.h;W.g||Dr.indexOf("spdy")==-1&&Dr.indexOf("quic")==-1&&Dr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Fa(W,W.h),W.h=null))}if(b.D){const xl=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;xl&&(b.ya=xl,at(b.I,b.D,xl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-h.F,v.j.info("Handshake RTT: "+v.R+"ms")),b=v;var he=h;if(b.qa=Ac(b,b.J?b.ia:null,b.W),he.K){gn(b.h,he);var Qe=he,jt=b.L;jt&&(Qe.I=jt),Qe.B&&(Xi(Qe),Hs(Qe)),b.g=he}else vc(b);0<v.i.length&&Ya(v)}else Ye[0]!="stop"&&Ye[0]!="close"||ui(v,7);else v.G==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?ui(v,7):wl(v):Ye[0]!="noop"&&v.l&&v.l.ta(Ye),v.v=0)}}Ki(4)}catch{}}var fc=class{constructor(h,y){this.g=h,this.map=y}};function ri(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ja(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function za(h){return h.h?1:h.g?h.g.size:0}function yl(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function Fa(h,y){h.g?h.g.add(y):h.h=y}function gn(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}ri.prototype.cancel=function(){if(this.i=_l(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function _l(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.D);return y}return H(h.i)}function ed(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(p(h)){for(var y=[],v=h.length,b=0;b<v;b++)y.push(h[b]);return y}y=[],v=0;for(b in h)y[v++]=h[b];return y}function Ba(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(p(h)||typeof h=="string"){var y=[];h=h.length;for(var v=0;v<h;v++)y.push(v);return y}y=[],v=0;for(const b in h)y[v++]=b;return y}}}function vl(h,y){if(h.forEach&&typeof h.forEach=="function")h.forEach(y,void 0);else if(p(h)||typeof h=="string")Array.prototype.forEach.call(h,y,void 0);else for(var v=Ba(h),b=ed(h),B=b.length,W=0;W<B;W++)y.call(void 0,b[W],v&&v[W],h)}var $s=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function td(h,y){if(h){h=h.split("&");for(var v=0;v<h.length;v++){var b=h[v].indexOf("="),B=null;if(0<=b){var W=h[v].substring(0,b);B=h[v].substring(b+1)}else W=h[v];y(W,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function xt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof xt){this.h=h.h,Ks(this,h.j),this.o=h.o,this.g=h.g,Wi(this,h.s),this.l=h.l;var y=h.i,v=new si;v.i=y.i,y.g&&(v.g=new Map(y.g),v.h=y.h),ii(this,v),this.m=h.m}else h&&(y=String(h).match($s))?(this.h=!1,Ks(this,y[1]||"",!0),this.o=qn(y[2]||""),this.g=qn(y[3]||"",!0),Wi(this,y[4]),this.l=qn(y[5]||"",!0),ii(this,y[6]||"",!0),this.m=qn(y[7]||"")):(this.h=!1,this.i=new si(null,this.h))}xt.prototype.toString=function(){var h=[],y=this.j;y&&h.push(Ys(y,El,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ys(y,El,!0),"@"),h.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&h.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Ys(v,v.charAt(0)=="/"?nd:Tl,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Ys(v,qa)),h.join("")};function Dn(h){return new xt(h)}function Ks(h,y,v){h.j=v?qn(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Wi(h,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);h.s=y}else h.s=null}function ii(h,y,v){y instanceof si?(h.i=y,mc(h.i,h.h)):(v||(y=Ys(y,rd)),h.i=new si(y,h.h))}function at(h,y,v){h.i.set(y,v)}function Qs(h){return at(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function qn(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ys(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,dc),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function dc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var El=/[#\/\?@]/g,Tl=/[#\?:]/g,nd=/[#\?]/g,rd=/[#\?@]/g,qa=/#/g;function si(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Hn(h){h.g||(h.g=new Map,h.h=0,h.i&&td(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=si.prototype,r.add=function(h,y){Hn(this),this.i=null,h=br(this,h);var v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function ai(h,y){Hn(h),y=br(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function oi(h,y){return Hn(h),y=br(h,y),h.g.has(y)}r.forEach=function(h,y){Hn(this),this.g.forEach(function(v,b){v.forEach(function(B){h.call(y,B,b,this)},this)},this)},r.na=function(){Hn(this);const h=Array.from(this.g.values()),y=Array.from(this.g.keys()),v=[];for(let b=0;b<y.length;b++){const B=h[b];for(let W=0;W<B.length;W++)v.push(y[b])}return v},r.V=function(h){Hn(this);let y=[];if(typeof h=="string")oi(this,h)&&(y=y.concat(this.g.get(br(this,h))));else{h=Array.from(this.g.values());for(let v=0;v<h.length;v++)y=y.concat(h[v])}return y},r.set=function(h,y){return Hn(this),this.i=null,h=br(this,h),oi(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=this.V(h),0<h.length?String(h[0]):y):y};function Sl(h,y,v){ai(h,y),0<v.length&&(h.i=null,h.g.set(br(h,y),H(v)),h.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(var v=0;v<y.length;v++){var b=y[v];const W=encodeURIComponent(String(b)),he=this.V(b);for(b=0;b<he.length;b++){var B=W;he[b]!==""&&(B+="="+encodeURIComponent(String(he[b]))),h.push(B)}}return this.i=h.join("&")};function br(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function mc(h,y){y&&!h.j&&(Hn(h),h.i=null,h.g.forEach(function(v,b){var B=b.toLowerCase();b!=B&&(ai(this,b),Sl(this,B,v))},h)),h.j=y}function Xs(h,y){const v=new Bn;if(d.Image){const b=new Image;b.onload=V(Gn,v,"TestLoadImage: loaded",!0,y,b),b.onerror=V(Gn,v,"TestLoadImage: error",!1,y,b),b.onabort=V(Gn,v,"TestLoadImage: abort",!1,y,b),b.ontimeout=V(Gn,v,"TestLoadImage: timeout",!1,y,b),d.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=h}else y(!1)}function ar(h,y){const v=new Bn,b=new AbortController,B=setTimeout(()=>{b.abort(),Gn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:b.signal}).then(W=>{clearTimeout(B),W.ok?Gn(v,"TestPingServer: ok",!0,y):Gn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),Gn(v,"TestPingServer: error",!1,y)})}function Gn(h,y,v,b,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),b(v)}catch{}}function Ws(){this.g=new Zr}function wr(h,y,v){const b=v||"";try{vl(h,function(B,W){let he=B;g(B)&&(he=xn(B)),y.push(b+W+"="+encodeURIComponent(he))})}catch(B){throw y.push(b+"type="+encodeURIComponent("_badmap")),B}}function Zi(h){this.l=h.Ub||null,this.j=h.eb||!1}z(Zi,Gi),Zi.prototype.g=function(){return new li(this.l,this.j)},Zi.prototype.i=(function(h){return function(){return h}})({});function li(h,y){me.call(this),this.D=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}z(li,me),r=li.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=y,this.readyState=1,Ir(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(y.body=h),(this.D||d).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rr(this)),this.readyState=0},r.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Ir(this)),this.g&&(this.readyState=3,Ir(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Al(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Al(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}r.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?Rr(this):Ir(this),this.readyState==3&&Al(this)}},r.Ra=function(h){this.g&&(this.response=this.responseText=h,Rr(this))},r.Qa=function(h){this.g&&(this.response=h,Rr(this))},r.ga=function(){this.g&&Rr(this)};function Rr(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Ir(h)}r.setRequestHeader=function(h,y){this.u.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Ir(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(li.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function bl(h){let y="";return Se(h,function(v,b){y+=b,y+=":",y+=v,y+=`\r
`}),y}function Ht(h,y,v){e:{for(b in v){var b=!1;break e}b=!0}b||(v=bl(v),typeof h=="string"?v!=null&&encodeURIComponent(String(v)):at(h,y,v))}function et(h){me.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}z(et,me);var Ha=/^https?$/i,Zs=["POST","PUT"];r=et.prototype,r.Ha=function(h){this.J=h},r.ea=function(h,y,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tr.g(),this.v=this.o?hl(this.o):hl(Tr),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(W){pc(this,W);return}if(h=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var B in b)v.set(B,b[B]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const W of b.keys())v.set(W,b.get(W));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(W=>W.toLowerCase()=="content-type"),B=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Zs,y,void 0))||b||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,he]of v)this.g.setRequestHeader(W,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Js(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){pc(this,W)}};function pc(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.m=5,Ga(h),Cr(h)}function Ga(h){h.A||(h.A=!0,be(h,"complete"),be(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,be(this,"complete"),be(this,"abort"),Cr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cr(this,!0)),et.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?$a(this):this.bb())},r.bb=function(){$a(this)};function $a(h){if(h.h&&typeof c<"u"&&(!h.v[1]||$n(h)!=4||h.Z()!=2)){if(h.u&&$n(h)==4)rt(h.Ea,0,h);else if(be(h,"readystatechange"),$n(h)==4){h.h=!1;try{const he=h.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var b;if(b=he===0){var B=String(h.D).match($s)[1]||null;!B&&d.self&&d.self.location&&(B=d.self.location.protocol.slice(0,-1)),b=!Ha.test(B?B.toLowerCase():"")}v=b}if(v)be(h,"complete"),be(h,"success");else{h.m=6;try{var W=2<$n(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",Ga(h)}}finally{Cr(h)}}}}function Cr(h,y){if(h.g){Js(h);const v=h.g,b=h.v[0]?()=>{}:null;h.g=null,h.v=null,y||be(h,"ready");try{v.onreadystatechange=b}catch{}}}function Js(h){h.I&&(d.clearTimeout(h.I),h.I=null)}r.isActive=function(){return!!this.g};function $n(h){return h.g?h.g.readyState:0}r.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),Wr(y)}};function gc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function id(h){const y={};h=(h.g&&2<=$n(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<h.length;b++){if(F(h[b]))continue;var v=x(h[b]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const W=y[B]||[];y[B]=W,W.push(v)}k(y,function(b){return b.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function Ka(h){this.Aa=0,this.i=[],this.j=new Bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,h),this.cb=ea("retryDelaySeedMs",1e4,h),this.Wa=ea("forwardChannelMaxRetries",2,h),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new ri(h&&h.concurrentRequestLimit),this.Da=new Ws,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Ka.prototype,r.la=8,r.G=1,r.connect=function(h,y,v,b){pt(0),this.W=h,this.H=y||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.I=Ac(this,null,this.W),Ya(this)};function wl(h){if(yc(h),h.G==3){var y=h.U++,v=Dn(h.I);if(at(v,"SID",h.K),at(v,"RID",y),at(v,"TYPE","terminate"),ta(h,v),y=new pn(h,h.j,y),y.L=2,y.v=Qs(Dn(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(y.v.toString(),"")}catch{}!v&&d.Image&&(new Image().src=y.v,v=!0),v||(y.g=bc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Hs(y)}Sc(h)}function Qa(h){h.g&&(na(h),h.g.cancel(),h.g=null)}function yc(h){Qa(h),h.u&&(d.clearTimeout(h.u),h.u=null),Xa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Ya(h){if(!ja(h.h)&&!h.s){h.s=!0;var y=h.Ga;le||M(),Te||(le(),Te=!0),Fe.add(y,h),h.B=0}}function sd(h,y){return za(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=y.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ct(A(h.Ga,h,y),Cl(h,h.B)),h.B++,!0)}r.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const B=new pn(this,this.j,h);let W=this.o;if(this.S&&(W?(W=I(W),O(W,this.S)):W=this.S),this.m!==null||this.O||(B.H=W,W=null),this.P)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(y+=b,4096<y){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=_c(this,B,y),v=Dn(this.I),at(v,"RID",h),at(v,"CVER",22),this.D&&at(v,"X-HTTP-Session-Id",this.D),ta(this,v),W&&(this.O?y="headers="+encodeURIComponent(String(bl(W)))+"&"+y:this.m&&Ht(v,this.m,W)),Fa(this.h,B),this.Ua&&at(v,"TYPE","init"),this.P?(at(v,"$req",y),at(v,"SID","null"),B.T=!0,sr(B,v,null)):sr(B,v,y),this.G=2}}else this.G==3&&(h?Rl(this,h):this.i.length==0||ja(this.h)||Rl(this))};function Rl(h,y){var v;y?v=y.l:v=h.U++;const b=Dn(h.I);at(b,"SID",h.K),at(b,"RID",v),at(b,"AID",h.T),ta(h,b),h.m&&h.o&&Ht(b,h.m,h.o),v=new pn(h,h.j,v,h.B+1),h.m===null&&(v.H=h.o),y&&(h.i=y.D.concat(h.i)),y=_c(h,v,1e3),v.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Fa(h.h,v),sr(v,b,y)}function ta(h,y){h.H&&Se(h.H,function(v,b){at(y,b,v)}),h.l&&vl({},function(v,b){at(y,b,v)})}function _c(h,y,v){v=Math.min(h.i.length,v);var b=h.l?A(h.l.Na,h.l,h):null;e:{var B=h.i;let W=-1;for(;;){const he=["count="+v];W==-1?0<v?(W=B[0].g,he.push("ofs="+W)):W=0:he.push("ofs="+W);let Qe=!0;for(let jt=0;jt<v;jt++){let Ye=B[jt].g;const Gt=B[jt].map;if(Ye-=W,0>Ye)W=Math.max(0,B[jt].g-100),Qe=!1;else try{wr(Gt,he,"req"+Ye+"_")}catch{b&&b(Gt)}}if(Qe){b=he.join("&");break e}}}return h=h.i.splice(0,v),y.D=h,b}function vc(h){if(!h.g&&!h.u){h.Y=1;var y=h.Fa;le||M(),Te||(le(),Te=!0),Fe.add(y,h),h.v=0}}function Il(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ct(A(h.Fa,h),Cl(h,h.v)),h.v++,!0)}r.Fa=function(){if(this.u=null,Ec(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ct(A(this.ab,this),h)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Qa(this),Ec(this))};function na(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function Ec(h){h.g=new pn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var y=Dn(h.qa);at(y,"RID","rpc"),at(y,"SID",h.K),at(y,"AID",h.T),at(y,"CI",h.F?"0":"1"),!h.F&&h.ja&&at(y,"TO",h.ja),at(y,"TYPE","xmlhttp"),ta(h,y),h.m&&h.o&&Ht(y,h.m,h.o),h.L&&(h.g.I=h.L);var v=h.g;h=h.ia,v.L=1,v.v=Qs(Dn(y)),v.m=null,v.P=!0,ni(v,h)}r.Za=function(){this.C!=null&&(this.C=null,Qa(this),Il(this),pt(19))};function Xa(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function Tc(h,y){var v=null;if(h.g==y){Xa(h),na(h),h.g=null;var b=2}else if(yl(h.h,y))v=y.D,gn(h.h,y),b=1;else return;if(h.G!=0){if(y.o)if(b==1){v=y.m?y.m.length:0,y=Date.now()-y.F;var B=h.B;b=$i(),be(b,new Ut(b,v)),Ya(h)}else vc(h);else if(B=y.s,B==3||B==0&&0<y.X||!(b==1&&sd(h,y)||b==2&&Il(h)))switch(v&&0<v.length&&(y=h.h,y.i=y.i.concat(v)),B){case 1:ui(h,5);break;case 4:ui(h,10);break;case 3:ui(h,6);break;default:ui(h,2)}}}function Cl(h,y){let v=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(v*=2),v*y}function ui(h,y){if(h.j.info("Error code "+y),y==2){var v=A(h.fb,h),b=h.Xa;const B=!b;b=new xt(b||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ks(b,"https"),Qs(b),B?Xs(b.toString(),v):ar(b.toString(),v)}else pt(2);h.G=0,h.l&&h.l.sa(y),Sc(h),yc(h)}r.fb=function(h){h?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Sc(h){if(h.G=0,h.ka=[],h.l){const y=_l(h.h);(y.length!=0||h.i.length!=0)&&(U(h.ka,y),U(h.ka,h.i),h.h.i.length=0,H(h.i),h.i.length=0),h.l.ra()}}function Ac(h,y,v){var b=v instanceof xt?Dn(v):new xt(v);if(b.g!="")y&&(b.g=y+"."+b.g),Wi(b,b.s);else{var B=d.location;b=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;var W=new xt(null);b&&Ks(W,b),y&&(W.g=y),B&&Wi(W,B),v&&(W.l=v),b=W}return v=h.D,y=h.ya,v&&y&&at(b,v,y),at(b,"VER",h.la),ta(h,b),b}function bc(h,y,v){if(y&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Ca&&!h.pa?new et(new Zi({eb:v})):new et(h.pa),y.Ha(h.J),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function wc(){}r=wc.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Wa(){}Wa.prototype.g=function(h,y){return new yn(h,y)};function yn(h,y){me.call(this),this.g=new Ka(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(h?h["X-WebChannel-Client-Profile"]=y.va:h={"X-WebChannel-Client-Profile":y.va}),this.g.S=h,(h=y&&y.Sb)&&!F(h)&&(this.g.m=h),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!F(y)&&(this.g.D=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new xr(this)}z(yn,me),yn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){wl(this.g)},yn.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.u&&(v={},v.__data__=xn(h),h=v);y.i.push(new fc(y.Ya++,h)),y.G==3&&Ya(y)},yn.prototype.N=function(){this.g.l=null,delete this.j,wl(this.g),delete this.g,yn.aa.N.call(this)};function Rc(h){ei.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}z(Rc,ei);function Ic(){dl.call(this),this.status=1}z(Ic,dl);function xr(h){this.g=h}z(xr,wc),xr.prototype.ua=function(){be(this.g,"a")},xr.prototype.ta=function(h){be(this.g,new Rc(h))},xr.prototype.sa=function(h){be(this.g,new Ic)},xr.prototype.ra=function(){be(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,lS=function(){return new Wa},oS=function(){return $i()},aS=Er,Rp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,Uh=Yi,ti.COMPLETE="complete",sS=ti,fl.EventType=Jr,Jr.OPEN="a",Jr.CLOSE="b",Jr.ERROR="c",Jr.MESSAGE="d",me.prototype.listen=me.prototype.K,Su=fl,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,iS=et}).apply(typeof Ch<"u"?Ch:typeof self<"u"?self:typeof window<"u"?window:{});const $E="@firebase/firestore",KE="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let el="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=new Zp("@firebase/firestore");function Vo(){return xa.logLevel}function ye(r,...e){if(xa.logLevel<=Ge.DEBUG){const t=e.map(tg);xa.debug(`Firestore (${el}): ${r}`,...t)}}function Mi(r,...e){if(xa.logLevel<=Ge.ERROR){const t=e.map(tg);xa.error(`Firestore (${el}): ${r}`,...t)}}function Go(r,...e){if(xa.logLevel<=Ge.WARN){const t=e.map(tg);xa.warn(`Firestore (${el}): ${r}`,...t)}}function tg(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,uS(r,i,t)}function uS(r,e,t){let i=`FIRESTORE (${el}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Mi(i),new Error(i)}function tt(r,e,t,i){let o="Unexpected state";typeof t=="string"?o=t:i=t,r||uS(e,o,i)}function Pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends ji{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(hn.UNAUTHENTICATED)))}shutdown(){}}class yI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _I{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0,42304);let i=this.i;const o=p=>this.i!==i?(i=this.i,t(p)):Promise.resolve();let l=new Di;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Di,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},d=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>d(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Di)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(tt(typeof i.accessToken=="string",31837,{l:i}),new cS(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class vI{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EI{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new vI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(hn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class QE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0,3512);const i=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const o=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new QE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new QE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=SI(40);for(let l=0;l<o.length;++l)i.length<20&&o[l]<t&&(i+=e.charAt(o[l]%62))}return i}}function $e(r,e){return r<e?-1:r>e?1:0}function Ip(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const o=r.charAt(i),l=e.charAt(i);if(o!==l)return op(o)===op(l)?$e(o,l):op(o)?1:-1}return $e(r.length,e.length)}const AI=55296,bI=57343;function op(r){const e=r.charCodeAt(0);return e>=AI&&e<=bI}function $o(r,e,t){return r.length===e.length&&r.every(((i,o)=>t(i,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="__name__";class Pr{constructor(e,t,i){t===void 0?t=0:t>e.length&&Oe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Oe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let o=0;o<i;o++){const l=Pr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return $e(e.length,t.length)}static compareSegments(e,t){const i=Pr.isNumericId(e),o=Pr.isNumericId(t);return i&&!o?-1:!i&&o?1:i&&o?Pr.extractNumericId(e).compare(Pr.extractNumericId(t)):Ip(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class dt extends Pr{construct(e,t,i){return new dt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((o=>o.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const wI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Pr{construct(e,t,i){return new an(e,t,i)}static isValidIdentifier(e){return wI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===YE}static keyField(){return new an([YE])}static fromServerFormat(e){const t=[];let i="",o=0;const l=()=>{if(i.length===0)throw new ge(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ge(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ge(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=p,o+=2}else d==="`"?(c=!c,o++):d!=="."||c?(i+=d,o++):(l(),o++)}if(l(),c)throw new ge(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(t)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(dt.fromString(e))}static fromName(e){return new Ce(dt.fromString(e).popFirst(5))}static empty(){return new Ce(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(r,e,t){if(!t)throw new ge(te.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function RI(r,e,t,i){if(e===!0&&i===!0)throw new ge(te.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function XE(r){if(!Ce.isDocumentKey(r))throw new ge(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function WE(r){if(Ce.isDocumentKey(r))throw new ge(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function fS(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function xf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Oe(12329,{type:typeof r})}function ki(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ge(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xf(r);throw new ge(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function II(r,e){if(e<=0)throw new ge(te.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ku(r,e){if(!fS(r))throw new ge(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const o=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(o&&typeof c!==o){t=`JSON field '${i}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ge(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=-62135596800,JE=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*JE);return new mt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ZE)throw new ge(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/JE}_compareTo(e){return this.seconds===e.seconds?$e(this.nanoseconds,e.nanoseconds):$e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ku(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ZE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Pt("string",mt._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new mt(0,0))}static max(){return new ke(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=-1;function CI(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,o=ke.fromTimestamp(i===1e9?new mt(t+1,0):new mt(t,i));return new Os(o,Ce.empty(),e)}function xI(r){return new Os(r.readTime,r.key,ku)}class Os{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Os(ke.min(),Ce.empty(),ku)}static max(){return new Os(ke.max(),Ce.empty(),ku)}}function DI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(r.documentKey,e.documentKey),t!==0?t:$e(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tl(r){if(r.code!==te.FAILED_PRECONDITION||r.message!==NI)throw r;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se(((i,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):se.reject(t)}static resolve(e){return new se(((t,i)=>{t(e)}))}static reject(e){return new se(((t,i)=>{i(e)}))}static waitFor(e){return new se(((t,i)=>{let o=0,l=0,c=!1;e.forEach((d=>{++o,d.next((()=>{++l,c&&l===o&&t()}),(p=>i(p)))})),c=!0,l===o&&t()}))}static or(e){let t=se.resolve(!1);for(const i of e)t=t.next((o=>o?se.resolve(o):i()));return t}static forEach(e,t){const i=[];return e.forEach(((o,l)=>{i.push(t.call(this,o,l))})),this.waitFor(i)}static mapArray(e,t){return new se(((i,o)=>{const l=e.length,c=new Array(l);let d=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((_=>{c[g]=_,++d,d===l&&i(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new se(((i,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):i()};l()}))}}function VI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function nl(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg=-1;function Nf(r){return r==null}function nf(r){return r===0&&1/r==-1/0}function MI(r){return typeof r=="number"&&Number.isInteger(r)&&!nf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="";function kI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=e0(e)),e=PI(r.get(t),e);return e0(e)}function PI(r,e){let t=e;const i=r.length;for(let o=0;o<i;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case dS:t+="";break;default:t+=l}}return t}function e0(r){return r+dS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Us(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function mS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new vt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new vt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(e,i.key);if(o===0)return t+i.left.size;o<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xh(this.root,e,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xh(this.root,e,this.comparator,!0)}}class xh{constructor(e,t,i,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,i,o,l){this.key=e,this.value=t,this.color=i??sn.RED,this.left=o??sn.EMPTY,this.right=l??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,o,l){return new sn(e??this.key,t??this.value,i??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let o=this;const l=i(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,i),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,t,i,o,l){return this}insert(e,t,i){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.comparator=e,this.data=new vt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new n0(this.data.getIterator())}getIteratorFrom(e){return new n0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new qt(this.comparator);return t.data=e,t}}class n0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new jn([])}unionWith(e){let t=new qt(an.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new jn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new pS("Invalid base64 string: "+l):l}})(e);return new on(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new on(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let o=0;o<t.length;o++)i[o]=t.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}on.EMPTY_BYTE_STRING=new on("");const LI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vs(r){if(tt(!!r,39018),typeof r=="string"){let e=0;const t=LI.exec(r);if(tt(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Rt(r.seconds),nanos:Rt(r.nanos)}}function Rt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ms(r){return typeof r=="string"?on.fromBase64String(r):on.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="server_timestamp",yS="__type__",_S="__previous_value__",vS="__local_write_time__";function ig(r){return(r?.mapValue?.fields||{})[yS]?.stringValue===gS}function Of(r){const e=r.mapValue.fields[_S];return ig(e)?Of(e):e}function Pu(r){const e=Vs(r.mapValue.fields[vS].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,t,i,o,l,c,d,p,g,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_}}const rf="(default)";class Lu{constructor(e,t){this.projectId=e,this.database=t||rf}static empty(){return new Lu("","")}get isDefaultDatabase(){return this.database===rf}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="__type__",jI="__max__",Dh={mapValue:{}},TS="__vector__",sf="value";function ks(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?ig(r)?4:FI(r)?9007199254740991:zI(r)?10:11:Oe(28295,{value:r})}function Gr(r,e){if(r===e)return!0;const t=ks(r);if(t!==ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Pu(r).isEqual(Pu(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Vs(o.timestampValue),d=Vs(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return Ms(o.bytesValue).isEqual(Ms(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return Rt(o.geoPointValue.latitude)===Rt(l.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Rt(o.integerValue)===Rt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Rt(o.doubleValue),d=Rt(l.doubleValue);return c===d?nf(c)===nf(d):isNaN(c)&&isNaN(d)}return!1})(r,e);case 9:return $o(r.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},d=l.mapValue.fields||{};if(t0(c)!==t0(d))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(d[p]===void 0||!Gr(c[p],d[p])))return!1;return!0})(r,e);default:return Oe(52216,{left:r})}}function Uu(r,e){return(r.values||[]).find((t=>Gr(t,e)))!==void 0}function Ko(r,e){if(r===e)return 0;const t=ks(r),i=ks(e);if(t!==i)return $e(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return $e(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Rt(l.integerValue||l.doubleValue),p=Rt(c.integerValue||c.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1})(r,e);case 3:return r0(r.timestampValue,e.timestampValue);case 4:return r0(Pu(r),Pu(e));case 5:return Ip(r.stringValue,e.stringValue);case 6:return(function(l,c){const d=Ms(l),p=Ms(c);return d.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),p=c.split("/");for(let g=0;g<d.length&&g<p.length;g++){const _=$e(d[g],p[g]);if(_!==0)return _}return $e(d.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=$e(Rt(l.latitude),Rt(c.latitude));return d!==0?d:$e(Rt(l.longitude),Rt(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return i0(r.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},p=c.fields||{},g=d[sf]?.arrayValue,_=p[sf]?.arrayValue,T=$e(g?.values?.length||0,_?.values?.length||0);return T!==0?T:i0(g,_)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Dh.mapValue&&c===Dh.mapValue)return 0;if(l===Dh.mapValue)return 1;if(c===Dh.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let T=0;T<p.length&&T<_.length;++T){const A=Ip(p[T],_[T]);if(A!==0)return A;const V=Ko(d[p[T]],g[_[T]]);if(V!==0)return V}return $e(p.length,_.length)})(r.mapValue,e.mapValue);default:throw Oe(23264,{he:t})}}function r0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return $e(r,e);const t=Vs(r),i=Vs(e),o=$e(t.seconds,i.seconds);return o!==0?o:$e(t.nanos,i.nanos)}function i0(r,e){const t=r.values||[],i=e.values||[];for(let o=0;o<t.length&&o<i.length;++o){const l=Ko(t[o],i[o]);if(l)return l}return $e(t.length,i.length)}function Qo(r){return Cp(r)}function Cp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=Vs(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return Ms(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return Ce.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",o=!0;for(const l of t.values||[])o?o=!1:i+=",",i+=Cp(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of i)l?l=!1:o+=",",o+=`${c}:${Cp(t.fields[c])}`;return o+"}"})(r.mapValue):Oe(61005,{value:r})}function jh(r){switch(ks(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Of(r);return e?16+jh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ms(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,l)=>o+jh(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let o=0;return Us(i.fields,((l,c)=>{o+=l.length+jh(c)})),o})(r.mapValue);default:throw Oe(13486,{value:r})}}function s0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function xp(r){return!!r&&"integerValue"in r}function sg(r){return!!r&&"arrayValue"in r}function a0(r){return!!r&&"nullValue"in r}function o0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function zh(r){return!!r&&"mapValue"in r}function zI(r){return(r?.mapValue?.fields||{})[ES]?.stringValue===TS}function Iu(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Us(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Iu(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Iu(r.arrayValue.values[t]);return e}return{...r}}function FI(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===jI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.value=e}static empty(){return new Cn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!zh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iu(t)}setAll(e){let t=an.emptyPath(),i={},o=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,i,o),i={},o=[],t=d.popLast()}c?i[d.lastSegment()]=Iu(c):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,o)}delete(e){const t=this.field(e.popLast());zh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let o=t.mapValue.fields[e.get(i)];zh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,i){Us(t,((o,l)=>e[o]=l));for(const o of i)delete e[o]}clone(){return new Cn(Iu(this.value))}}function SS(r){const e=[];return Us(r.fields,((t,i)=>{const o=new an([t]);if(zh(i)){const l=SS(i.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t,i,o,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=o,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new dn(e,0,ke.min(),ke.min(),ke.min(),Cn.empty(),0)}static newFoundDocument(e,t,i,o){return new dn(e,1,t,ke.min(),i,o,0)}static newNoDocument(e,t){return new dn(e,2,t,ke.min(),ke.min(),Cn.empty(),0)}static newUnknownDocument(e,t){return new dn(e,3,t,ke.min(),ke.min(),Cn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Cn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Cn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t){this.position=e,this.inclusive=t}}function l0(r,e,t){let i=0;for(let o=0;o<r.position.length;o++){const l=e[o],c=r.position[o];if(l.field.isKeyField()?i=Ce.comparator(Ce.fromName(c.referenceValue),t.key):i=Ko(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function u0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Gr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,t="asc"){this.field=e,this.dir=t}}function BI(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{}class kt extends AS{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new HI(e,t,i):t==="array-contains"?new KI(e,i):t==="in"?new QI(e,i):t==="not-in"?new YI(e,i):t==="array-contains-any"?new XI(e,i):new kt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new GI(e,i):new $I(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ko(t,this.value)):t!==null&&ks(this.value)===ks(t)&&this.matchesComparison(Ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pr extends AS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pr(e,t)}matches(e){return bS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function bS(r){return r.op==="and"}function wS(r){return qI(r)&&bS(r)}function qI(r){for(const e of r.filters)if(e instanceof pr)return!1;return!0}function Dp(r){if(r instanceof kt)return r.field.canonicalString()+r.op.toString()+Qo(r.value);if(wS(r))return r.filters.map((e=>Dp(e))).join(",");{const e=r.filters.map((t=>Dp(t))).join(",");return`${r.op}(${e})`}}function RS(r,e){return r instanceof kt?(function(i,o){return o instanceof kt&&i.op===o.op&&i.field.isEqual(o.field)&&Gr(i.value,o.value)})(r,e):r instanceof pr?(function(i,o){return o instanceof pr&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((l,c,d)=>l&&RS(c,o.filters[d])),!0):!1})(r,e):void Oe(19439)}function IS(r){return r instanceof kt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`})(r):r instanceof pr?(function(t){return t.op.toString()+" {"+t.getFilters().map(IS).join(" ,")+"}"})(r):"Filter"}class HI extends kt{constructor(e,t,i){super(e,t,i),this.key=Ce.fromName(i.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class GI extends kt{constructor(e,t){super(e,"in",t),this.keys=CS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class $I extends kt{constructor(e,t){super(e,"not-in",t),this.keys=CS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function CS(r,e){return(e.arrayValue?.values||[]).map((t=>Ce.fromName(t.referenceValue)))}class KI extends kt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sg(t)&&Uu(t.arrayValue,this.value)}}class QI extends kt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Uu(this.value.arrayValue,t)}}class YI extends kt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Uu(this.value.arrayValue,t)}}class XI extends kt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Uu(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,t=null,i=[],o=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=o,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function c0(r,e=null,t=[],i=[],o=null,l=null,c=null){return new WI(r,e,t,i,o,l,c)}function ag(r){const e=Pe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Dp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),Nf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Qo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Qo(i))).join(",")),e.Te=t}return e.Te}function og(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!BI(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!RS(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!u0(r.startAt,e.startAt)&&u0(r.endAt,e.endAt)}function Np(r){return Ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,t=null,i=[],o=[],l=null,c="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=o,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function ZI(r,e,t,i,o,l,c,d){return new rl(r,e,t,i,o,l,c,d)}function lg(r){return new rl(r)}function h0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function xS(r){return r.collectionGroup!==null}function Cu(r){const e=Pe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new qt(an.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(d=d.add(g.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ju(l,i))})),t.has(an.keyField().canonicalString())||e.Ie.push(new ju(an.keyField(),i))}return e.Ie}function zr(r){const e=Pe(r);return e.Ee||(e.Ee=JI(e,Cu(r))),e.Ee}function JI(r,e){if(r.limitType==="F")return c0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new ju(o.field,l)}));const t=r.endAt?new af(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new af(r.startAt.position,r.startAt.inclusive):null;return c0(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function Op(r,e){const t=r.filters.concat([e]);return new rl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function of(r,e,t){return new rl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Vf(r,e){return og(zr(r),zr(e))&&r.limitType===e.limitType}function DS(r){return`${ag(zr(r))}|lt:${r.limitType}`}function Mo(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((o=>IS(o))).join(", ")}]`),Nf(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((o=>Qo(o))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((o=>Qo(o))).join(",")),`Target(${i})`})(zr(r))}; limitType=${r.limitType})`}function Mf(r,e){return e.isFoundDocument()&&(function(i,o){const l=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):Ce.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,o){for(const l of Cu(i))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,o){for(const l of i.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(i,o){return!(i.startAt&&!(function(c,d,p){const g=l0(c,d,p);return c.inclusive?g<=0:g<0})(i.startAt,Cu(i),o)||i.endAt&&!(function(c,d,p){const g=l0(c,d,p);return c.inclusive?g>=0:g>0})(i.endAt,Cu(i),o))})(r,e)}function eC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function NS(r){return(e,t)=>{let i=!1;for(const o of Cu(r)){const l=tC(o,e,t);if(l!==0)return l;i=i||o.field.isKeyField()}return 0}}function tC(r,e,t){const i=r.field.isKeyField()?Ce.comparator(e.key,t.key):(function(l,c,d){const p=c.data.field(l),g=d.data.field(l);return p!==null&&g!==null?Ko(p,g):Oe(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return Oe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[o,l]of i)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),o=this.inner[i];if(o===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return i.length===1?delete this.inner[t]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,((t,i)=>{for(const[o,l]of i)e(o,l)}))}isEmpty(){return mS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=new vt(Ce.comparator);function Pi(){return nC}const OS=new vt(Ce.comparator);function Au(...r){let e=OS;for(const t of r)e=e.insert(t.key,t);return e}function VS(r){let e=OS;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ea(){return xu()}function MS(){return xu()}function xu(){return new Va((r=>r.toString()),((r,e)=>r.isEqual(e)))}const rC=new vt(Ce.comparator),iC=new qt(Ce.comparator);function Ke(...r){let e=iC;for(const t of r)e=e.add(t);return e}const sC=new qt($e);function aC(){return sC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nf(e)?"-0":e}}function kS(r){return{integerValue:""+r}}function oC(r,e){return MI(e)?kS(e):ug(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(){this._=void 0}}function lC(r,e,t){return r instanceof lf?(function(o,l){const c={fields:{[yS]:{stringValue:gS},[vS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&ig(l)&&(l=Of(l)),l&&(c.fields[_S]=l),{mapValue:c}})(t,e):r instanceof zu?LS(r,e):r instanceof Fu?US(r,e):(function(o,l){const c=PS(o,l),d=f0(c)+f0(o.Ae);return xp(c)&&xp(o.Ae)?kS(d):ug(o.serializer,d)})(r,e)}function uC(r,e,t){return r instanceof zu?LS(r,e):r instanceof Fu?US(r,e):t}function PS(r,e){return r instanceof uf?(function(i){return xp(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class lf extends kf{}class zu extends kf{constructor(e){super(),this.elements=e}}function LS(r,e){const t=jS(e);for(const i of r.elements)t.some((o=>Gr(o,i)))||t.push(i);return{arrayValue:{values:t}}}class Fu extends kf{constructor(e){super(),this.elements=e}}function US(r,e){let t=jS(e);for(const i of r.elements)t=t.filter((o=>!Gr(o,i)));return{arrayValue:{values:t}}}class uf extends kf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function f0(r){return Rt(r.integerValue||r.doubleValue)}function jS(r){return sg(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function cC(r,e){return r.field.isEqual(e.field)&&(function(i,o){return i instanceof zu&&o instanceof zu||i instanceof Fu&&o instanceof Fu?$o(i.elements,o.elements,Gr):i instanceof uf&&o instanceof uf?Gr(i.Ae,o.Ae):i instanceof lf&&o instanceof lf})(r.transform,e.transform)}class hC{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Pf{}function zS(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new cg(r.key,dr.none()):new Qu(r.key,r.data,dr.none());{const t=r.data,i=Cn.empty();let o=new qt(an.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),o=o.add(l)}return new js(r.key,i,new jn(o.toArray()),dr.none())}}function fC(r,e,t){r instanceof Qu?(function(o,l,c){const d=o.value.clone(),p=m0(o.fieldTransforms,l,c.transformResults);d.setAll(p),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):r instanceof js?(function(o,l,c){if(!Fh(o.precondition,l))return void l.convertToUnknownDocument(c.version);const d=m0(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(FS(o)),p.setAll(d),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(r,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Du(r,e,t,i){return r instanceof Qu?(function(l,c,d,p){if(!Fh(l.precondition,c))return d;const g=l.value.clone(),_=p0(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(r,e,t,i):r instanceof js?(function(l,c,d,p){if(!Fh(l.precondition,c))return d;const g=p0(l.fieldTransforms,p,c),_=c.data;return _.setAll(FS(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,c,d){return Fh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(r,e,t)}function dC(r,e){let t=null;for(const i of r.fieldTransforms){const o=e.data.field(i.field),l=PS(i.transform,o||null);l!=null&&(t===null&&(t=Cn.empty()),t.set(i.field,l))}return t||null}function d0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&$o(i,o,((l,c)=>cC(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Qu extends Pf{constructor(e,t,i,o=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class js extends Pf{constructor(e,t,i,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function FS(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function m0(r,e,t){const i=new Map;tt(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],c=l.transform,d=e.data.field(l.field);i.set(l.field,uC(c,d,t[o]))}return i}function p0(r,e,t){const i=new Map;for(const o of r){const l=o.transform,c=t.data.field(o.field);i.set(o.field,lC(l,c,e))}return i}class cg extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mC extends Pf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,t,i,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&fC(l,e,i[o])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Du(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Du(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=MS();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(o.key)?null:d;const p=zS(c,d);p!==null&&i.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(ke.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ke())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,((t,i)=>d0(t,i)))&&$o(this.baseMutations,e.baseMutations,((t,i)=>d0(t,i)))}}class hg{constructor(e,t,i,o){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=o}static from(e,t,i){tt(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let o=(function(){return rC})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,i[c].version);return new hg(e,t,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,We;function _C(r){switch(r){case te.OK:return Oe(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Oe(15467,{code:r})}}function BS(r){if(r===void 0)return Mi("GRPC error has no .code"),te.UNKNOWN;switch(r){case Vt.OK:return te.OK;case Vt.CANCELLED:return te.CANCELLED;case Vt.UNKNOWN:return te.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return te.INTERNAL;case Vt.UNAVAILABLE:return te.UNAVAILABLE;case Vt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Vt.NOT_FOUND:return te.NOT_FOUND;case Vt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Vt.ABORTED:return te.ABORTED;case Vt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Vt.DATA_LOSS:return te.DATA_LOSS;default:return Oe(39323,{code:r})}}(We=Vt||(Vt={}))[We.OK=0]="OK",We[We.CANCELLED=1]="CANCELLED",We[We.UNKNOWN=2]="UNKNOWN",We[We.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",We[We.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",We[We.NOT_FOUND=5]="NOT_FOUND",We[We.ALREADY_EXISTS=6]="ALREADY_EXISTS",We[We.PERMISSION_DENIED=7]="PERMISSION_DENIED",We[We.UNAUTHENTICATED=16]="UNAUTHENTICATED",We[We.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",We[We.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",We[We.ABORTED=10]="ABORTED",We[We.OUT_OF_RANGE=11]="OUT_OF_RANGE",We[We.UNIMPLEMENTED=12]="UNIMPLEMENTED",We[We.INTERNAL=13]="INTERNAL",We[We.UNAVAILABLE=14]="UNAVAILABLE",We[We.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new xs([4294967295,4294967295],0);function g0(r){const e=vC().encode(r),t=new rS;return t.update(e),new Uint8Array(t.digest())}function y0(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new xs([t,i],0),new xs([o,l],0)]}class fg{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new bu(`Invalid padding: ${t}`);if(i<0)throw new bu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new bu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new bu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xs.fromNumber(this.ge)}ye(e,t,i){let o=e.add(t.multiply(xs.fromNumber(i)));return o.compare(EC)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=g0(e),[i,o]=y0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,o,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new fg(l,o,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=g0(e),[i,o]=y0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class bu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,t,i,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const o=new Map;return o.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Lf(ke.min(),o,new vt($e),Pi(),Ke())}}class Yu{constructor(e,t,i,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Yu(i,t,Ke(),Ke(),Ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t,i,o){this.be=e,this.removedTargetIds=t,this.key=i,this.De=o}}class qS{constructor(e,t){this.targetId=e,this.Ce=t}}class HS{constructor(e,t,i=on.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=o}}class _0{constructor(){this.ve=0,this.Fe=v0(),this.Me=on.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ke(),t=Ke(),i=Ke();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:i=i.add(o);break;default:Oe(38017,{changeType:l})}})),new Yu(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=v0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class TC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pi(),this.Je=Nh(),this.He=Nh(),this.Ye=new vt($e)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,i=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Np(l))if(i===0){const c=new Ce(l.path);this.et(t,c,dn.newNoDocument(c,ke.min()))}else tt(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),p=d?this.ct(d,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:l=0}=t;let c,d;try{c=Ms(i).toUint8Array()}catch(p){if(p instanceof pS)return Go("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new fg(c,o,l)}catch(p){return Go(p instanceof bu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let o=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Np(d.target)){const p=new Ce(d.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,dn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=Ke();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new Lf(e,t,this.Ye,this.je,i);return this.je=Pi(),this.Je=Nh(),this.He=Nh(),this.Ye=new vt($e),o}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new _0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new qt($e),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new qt($e),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nh(){return new vt(Ce.comparator)}function v0(){return new vt(Ce.comparator)}const SC={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bC={and:"AND",or:"OR"};class wC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Vp(r,e){return r.useProto3Json||Nf(e)?e:{value:e}}function cf(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GS(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function RC(r,e){return cf(r,e.toTimestamp())}function Fr(r){return tt(!!r,49232),ke.fromTimestamp((function(t){const i=Vs(t);return new mt(i.seconds,i.nanos)})(r))}function dg(r,e){return Mp(r,e).canonicalString()}function Mp(r,e){const t=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function $S(r){const e=dt.fromString(r);return tt(WS(e),10190,{key:e.toString()}),e}function kp(r,e){return dg(r.databaseId,e.path)}function lp(r,e){const t=$S(e);if(t.get(1)!==r.databaseId.projectId)throw new ge(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ge(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new Ce(QS(t))}function KS(r,e){return dg(r.databaseId,e)}function IC(r){const e=$S(r);return e.length===4?dt.emptyPath():QS(e)}function Pp(r){return new dt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function QS(r){return tt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function E0(r,e,t){return{name:kp(r,e),fields:t.value.mapValue.fields}}function CC(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Oe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(tt(_===void 0||typeof _=="string",58123),on.fromBase64String(_||"")):(tt(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),on.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(g){const _=g.code===void 0?te.UNKNOWN:BS(g.code);return new ge(_,g.message||"")})(c);t=new HS(i,o,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const o=lp(r,i.document.name),l=Fr(i.document.updateTime),c=i.document.createTime?Fr(i.document.createTime):ke.min(),d=new Cn({mapValue:{fields:i.document.fields}}),p=dn.newFoundDocument(o,l,c,d),g=i.targetIds||[],_=i.removedTargetIds||[];t=new Bh(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const o=lp(r,i.document),l=i.readTime?Fr(i.readTime):ke.min(),c=dn.newNoDocument(o,l),d=i.removedTargetIds||[];t=new Bh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const o=lp(r,i.document),l=i.removedTargetIds||[];t=new Bh([],l,o,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:o=0,unchangedNames:l}=i,c=new yC(o,l),d=i.targetId;t=new qS(d,c)}}return t}function xC(r,e){let t;if(e instanceof Qu)t={update:E0(r,e.key,e.value)};else if(e instanceof cg)t={delete:kp(r,e.key)};else if(e instanceof js)t={update:E0(r,e.key,e.data),updateMask:UC(e.fieldMask)};else{if(!(e instanceof mC))return Oe(16599,{Vt:e.type});t={verify:kp(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof lf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof zu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Fu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof uf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Oe(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:RC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Oe(27497)})(r,e.precondition)),t}function DC(r,e){return r&&r.length>0?(tt(e!==void 0,14353),r.map((t=>(function(o,l){let c=o.updateTime?Fr(o.updateTime):Fr(l);return c.isEqual(ke.min())&&(c=Fr(l)),new hC(c,o.transformResults||[])})(t,e)))):[]}function NC(r,e){return{documents:[KS(r,e.path)]}}function OC(r,e){const t={structuredQuery:{}},i=e.path;let o;e.collectionGroup!==null?(o=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=KS(r,o);const l=(function(g){if(g.length!==0)return XS(pr.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(A){return{field:ko(A.field),direction:kC(A.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=Vp(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:o}}function VC(r){let e=IC(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let o=null;if(i>0){tt(i===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const A=YS(T);return A instanceof pr&&wS(A)?A.getFilters():[A]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((A=>(function(z){return new ju(Po(z.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(z.direction))})(A)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let A;return A=typeof T=="object"?T.value:T,Nf(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(T){const A=!!T.before,V=T.values||[];return new af(V,A)})(t.startAt));let g=null;return t.endAt&&(g=(function(T){const A=!T.before,V=T.values||[];return new af(V,A)})(t.endAt)),ZI(e,o,c,l,d,"F",p,g)}function MC(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function YS(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Po(t.unaryFilter.field);return kt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Po(t.unaryFilter.field);return kt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Po(t.unaryFilter.field);return kt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Po(t.unaryFilter.field);return kt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(r):r.fieldFilter!==void 0?(function(t){return kt.create(Po(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return pr.create(t.compositeFilter.filters.map((i=>YS(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(t.compositeFilter.op))})(r):Oe(30097,{filter:r})}function kC(r){return SC[r]}function PC(r){return AC[r]}function LC(r){return bC[r]}function ko(r){return{fieldPath:r.canonicalString()}}function Po(r){return an.fromServerFormat(r.fieldPath)}function XS(r){return r instanceof kt?(function(t){if(t.op==="=="){if(o0(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NAN"}};if(a0(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(o0(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NAN"}};if(a0(t.value))return{unaryFilter:{field:ko(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(t.field),op:PC(t.op),value:t.value}}})(r):r instanceof pr?(function(t){const i=t.getFilters().map((o=>XS(o)));return i.length===1?i[0]:{compositeFilter:{op:LC(t.op),filters:i}}})(r):Oe(54877,{filter:r})}function UC(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function WS(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,t,i,o,l=ke.min(),c=ke.min(),d=on.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new ws(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ws(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.yt=e}}function zC(r){const e=VC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?of(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.Cn=new BC}addToCollectionParentIndex(e,t){return this.Cn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Os.min())}updateCollectionGroup(e,t,i){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class BC{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t]||new qt(dt.comparator),l=!o.has(i);return this.index[t]=o.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),o=this.index[t];return o&&o.has(i)}getEntries(e){return(this.index[e]||new qt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ZS=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(ZS,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Yo(0)}static cr(){return new Yo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="LruGarbageCollector",qC=1048576;function A0([r,e],[t,i]){const o=$e(r,t);return o===0?$e(e,i):o}class HC{constructor(e){this.Ir=e,this.buffer=new qt(A0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();A0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class GC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(S0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){nl(t)?ye(S0,"Ignoring IndexedDB error during garbage collection: ",t):await tl(t)}await this.Vr(3e5)}))}}class $C{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return se.resolve(Df.ce);const i=new HC(t);return this.mr.forEachTarget(e,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(T0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,o,l,c,d,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(g=Date.now(),Vo()<=Ge.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(d-c)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function KC(r,e){return new $C(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.changes=new Va((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?se.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,t,i,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=o}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(i=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(i!==null&&Du(i.mutation,o,jn.empty(),mt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Ke()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Ke()){const o=Ea();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,i).next((l=>{let c=Au();return l.forEach(((d,p)=>{c=c.insert(d,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Ea();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Ke())))}populateOverlays(e,t,i){const o=[];return i.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,o){let l=Pi();const c=xu(),d=(function(){return xu()})();return t.forEach(((p,g)=>{const _=i.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof js)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),Du(_.mutation,g,_.mutation.getFieldMask(),mt.now())):c.set(g.key,jn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>d.set(g,new YC(_,c.get(g)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=xu();let o=new vt(((c,d)=>c-d)),l=Ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let _=i.get(p)||jn.empty();_=d.applyToLocalView(g,_),i.set(p,_);const T=(o.get(d.batchId)||Ke()).add(p);o=o.insert(d.batchId,T)}))})).next((()=>{const c=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),g=p.key,_=p.value,T=MS();_.forEach((A=>{if(!l.has(A)){const V=zS(t.get(A),i.get(A));V!==null&&T.set(A,V),l=l.add(A)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,T))}return se.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,o){return(function(c){return Ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,o):this.getDocumentsMatchingCollectionQuery(e,t,i,o)}getNextDocuments(e,t,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,o-l.size):se.resolve(Ea());let d=ku,p=l;return c.next((g=>se.forEach(g,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?se.resolve():this.remoteDocumentCache.getEntry(e,_).next((A=>{p=p.insert(_,A)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ke()))).next((_=>({batchId:d,changes:VS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((i=>{let o=Au();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,o){const l=t.collectionGroup;let c=Au();return this.indexManager.getCollectionParents(e,l).next((d=>se.forEach(d,(p=>{const g=(function(T,A){return new rl(A,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,i,o).next((_=>{_.forEach(((T,A)=>{c=c.insert(T,A)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,o)))).next((c=>{l.forEach(((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,dn.newInvalidDocument(_)))}));let d=Au();return c.forEach(((p,g)=>{const _=l.get(p);_!==void 0&&Du(_.mutation,g,jn.empty(),mt.now()),Mf(t,g)&&(d=d.insert(p,g))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return se.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Fr(o.createTime)}})(t)),se.resolve()}getNamedQuery(e,t){return se.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:zC(o.bundledQuery),readTime:Fr(o.readTime)}})(t)),se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.overlays=new vt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ea();return se.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&i.set(o,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((o,l)=>{this.St(e,t,l)})),se.resolve()}removeOverlaysForBatchId(e,t,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),se.resolve()}getOverlaysForCollection(e,t,i){const o=Ea(),l=t.length+1,c=new Ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>i&&o.set(p.getKey(),p)}return se.resolve(o)}getOverlaysForCollectionGroup(e,t,i,o){let l=new vt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>i){let _=l.get(g.largestBatchId);_===null&&(_=Ea(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const d=Ea(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>d.set(g,_))),!(d.size()>=o)););return se.resolve(d)}St(e,t,i){const o=this.overlays.get(i.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new gC(t,i));let l=this.qr.get(t);l===void 0&&(l=Ke(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.sessionToken=on.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(){this.Qr=new qt(Xt.$r),this.Ur=new qt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new Xt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ce(new dt([])),i=new Xt(t,e),o=new Xt(t,e+1),l=[];return this.Ur.forEachInRange([i,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new dt([])),i=new Xt(t,e),o=new Xt(t,e+1);let l=Ke();return this.Ur.forEachInRange([i,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Xt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||$e(e.Yr,t.Yr)}static Kr(e,t){return $e(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Xt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new pC(l,t,i,o);this.mutationQueue.push(c);for(const d of o)this.Zr=this.Zr.add(new Xt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(c)}lookupMutationBatch(e,t){return se.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,o=this.ei(i),l=o<0?0:o;return se.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?rg:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,o],(c=>{const d=this.Xr(c.Yr);l.push(d)})),se.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new qt($e);return t.forEach((o=>{const l=new Xt(o,0),c=new Xt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{i=i.add(d.Yr)}))})),se.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,o=i.length+1;let l=i;Ce.isDocumentKey(l)||(l=l.child(""));const c=new Xt(new Ce(l),0);let d=new qt($e);return this.Zr.forEachWhile((p=>{const g=p.key.path;return!!i.isPrefixOf(g)&&(g.length===o&&(d=d.add(p.Yr)),!0)}),c),se.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const o=this.Xr(i);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return se.forEach(t.mutations,(o=>{const l=new Xt(o.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new Xt(t,0),o=this.Zr.firstAfterOrEqual(i);return se.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e){this.ri=e,this.docs=(function(){return new vt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,o=this.docs.get(i),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return se.resolve(i?i.document.mutableCopy():dn.newInvalidDocument(t))}getEntries(e,t){let i=Pi();return t.forEach((o=>{const l=this.docs.get(o);i=i.insert(o,l?l.document.mutableCopy():dn.newInvalidDocument(o))})),se.resolve(i)}getDocumentsMatchingQuery(e,t,i,o){let l=Pi();const c=t.path,d=new Ce(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||DI(xI(_),i)<=0||(o.has(_.key)||Mf(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return se.resolve(l)}getAllFromCollectionGroup(e,t,i,o){Oe(9500)}ii(e,t){return se.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new n2(this)}getSize(e){return se.resolve(this.size)}}class n2 extends QC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(i)})),se.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.persistence=e,this.si=new Va((t=>ag(t)),og),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new mg,this.targetCount=0,this.ai=Yo.ur()}forEachTarget(e,t){return this.si.forEach(((i,o)=>t(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),se.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Yo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Pr(t),se.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,i){let o=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),se.waitFor(l).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return se.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),se.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),se.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),se.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return se.resolve(i)}containsKey(e,t){return se.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Df(0),this.li=!1,this.li=!0,this.hi=new JC,this.referenceDelegate=e(this),this.Pi=new r2(this),this.indexManager=new FC,this.remoteDocumentCache=(function(o){return new t2(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new jC(t),this.Ii=new WC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ZC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new e2(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ye("MemoryPersistence","Starting transaction:",e);const o=new i2(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return se.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class i2 extends OI{constructor(e){super(),this.currentSequenceNumber=e}}class pg{constructor(e){this.persistence=e,this.Ri=new mg,this.Vi=null}static mi(e){return new pg(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),se.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),se.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(i=>{const o=Ce.fromPath(i);return this.gi(e,o).next((l=>{l||t.removeEntry(o,ke.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return se.or([()=>se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class hf{constructor(e,t){this.persistence=e,this.pi=new Va((i=>kI(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=KC(this,t)}static mi(e,t){return new hf(e,t)}Ei(){}di(e){return se.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((o=>i+o))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return se.forEach(this.pi,((i,o)=>this.br(e,i,o).next((l=>l?se.resolve():t(o)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((d=>{d||(i++,l.removeEntry(c,ke.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),se.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=jh(e.data.value)),t}br(e,t,i){return se.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return se.resolve(o!==void 0&&o>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,t,i,o){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=o}static As(e,t){let i=Ke(),o=Ke();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new gg(e,t.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Z1()?8:VI(mn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new s2;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,i,o){return i.documentReadCount<this.fs?(Vo()<=Ge.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Mo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(Vo()<=Ge.DEBUG&&ye("QueryEngine","Query:",Mo(t),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(Vo()<=Ge.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Mo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):se.resolve())}ys(e,t){if(h0(t))return se.resolve(null);let i=zr(t);return this.indexManager.getIndexType(e,i).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=of(t,null,"F"),i=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Ke(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((p=>{const g=this.Ds(t,d);return this.Cs(t,g,c,p.readTime)?this.ys(e,of(t,null,"F")):this.vs(e,g,t,p)}))))})))))}ws(e,t,i,o){return h0(t)||o.isEqual(ke.min())?se.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,o)?se.resolve(null):(Vo()<=Ge.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Mo(t)),this.vs(e,c,t,CI(o,ku)).next((d=>d)))}))}Ds(e,t){let i=new qt(NS(e));return t.forEach(((o,l)=>{Mf(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,o){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,i){return Vo()<=Ge.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Mo(t)),this.ps.getDocumentsMatchingQuery(e,t,Os.min(),i)}vs(e,t,i,o){return this.ps.getDocumentsMatchingQuery(e,i,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="LocalStore",o2=3e8;class l2{constructor(e,t,i,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new vt($e),this.xs=new Va((l=>ag(l)),og),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new XC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function u2(r,e,t,i){return new l2(r,e,t,i)}async function eA(r,e){const t=Pe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return t.mutationQueue.getAllMutationBatches(i).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let p=Ke();for(const g of o){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){d.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(i,p).next((g=>({Ls:g,removedBatchIds:c,addedBatchIds:d})))}))}))}function c2(r,e){const t=Pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,p,g,_){const T=g.batch,A=T.keys();let V=se.resolve();return A.forEach((z=>{V=V.next((()=>_.getEntry(p,z))).next((H=>{const U=g.docVersions.get(z);tt(U!==null,48541),H.version.compareTo(U)<0&&(T.applyToRemoteDocument(H,g),H.isValidDocument()&&(H.setReadTime(g.commitVersion),_.addEntry(H)))}))})),V.next((()=>d.mutationQueue.removeMutationBatch(p,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let p=Ke();for(let g=0;g<d.mutationResults.length;++g)d.mutationResults[g].transformResults.length>0&&(p=p.add(d.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(i,o)))}))}function tA(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function h2(r,e){const t=Pe(r),i=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const A=o.get(T);if(!A)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let V=A.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?V=V.withResumeToken(on.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):_.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(_.resumeToken,i)),o=o.insert(T,V),(function(H,U,Q){return H.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-H.snapshotVersion.toMicroseconds()>=o2?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(A,V,_)&&d.push(t.Pi.updateTargetData(l,V))}));let p=Pi(),g=Ke();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(f2(l,c,e.documentUpdates).next((_=>{p=_.ks,g=_.qs}))),!i.isEqual(ke.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return se.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function f2(r,e,t){let i=Ke(),o=Ke();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=Pi();return t.forEach(((d,p)=>{const g=l.get(d);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(ke.min())?(e.removeEntry(d,p.readTime),c=c.insert(d,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(d,p)):ye(yg,"Ignoring outdated watch update for ",d,". Current version:",g.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function d2(r,e){const t=Pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=rg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function m2(r,e){const t=Pe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return t.Pi.getTargetData(i,e).next((l=>l?(o=l,se.resolve(o)):t.Pi.allocateTargetId(i).next((c=>(o=new ws(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=t.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Lp(r,e,t){const i=Pe(r),o=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!nl(c))throw c;ye(yg,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(o.target)}function b0(r,e,t){const i=Pe(r);let o=ke.min(),l=Ke();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,_){const T=Pe(p),A=T.xs.get(_);return A!==void 0?se.resolve(T.Ms.get(A)):T.Pi.getTargetData(g,_)})(i,c,zr(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((p=>{l=p}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?o:ke.min(),t?l:Ke()))).next((d=>(p2(i,eC(e),d),{documents:d,Qs:l})))))}function p2(r,e,t){let i=r.Os.get(e)||ke.min();t.forEach(((o,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}class w0{constructor(){this.activeTargetIds=aC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class g2{constructor(){this.Mo=new w0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new w0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="ConnectivityMonitor";class I0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(R0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(R0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh=null;function Up(){return Oh===null?Oh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Oh++,"0x"+Oh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="RestConnection",_2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class v2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===rf?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(e,t,i,o,l){const c=Up(),d=this.zo(e,t.toUriEncodedString());ye(up,`Sending RPC '${e}' ${c}:`,d,i);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:g}=new URL(d),_=Zo(g);return this.Jo(e,d,p,i,_).then((T=>(ye(up,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Go(up,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,o,l,c){return this.Go(e,t,i,o,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+el})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),i&&i.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const i=_2[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class T2 extends v2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,o,l){const c=Up();return new Promise(((d,p)=>{const g=new iS;g.setWithCredentials(!0),g.listenOnce(sS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Uh.NO_ERROR:const T=g.getResponseJson();ye(cn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case Uh.TIMEOUT:ye(cn,`RPC '${e}' ${c} timed out`),p(new ge(te.DEADLINE_EXCEEDED,"Request time out"));break;case Uh.HTTP_ERROR:const A=g.getStatus();if(ye(cn,`RPC '${e}' ${c} failed with status:`,A,"response text:",g.getResponseText()),A>0){let V=g.getResponseJson();Array.isArray(V)&&(V=V[0]);const z=V?.error;if(z&&z.status&&z.message){const H=(function(Q){const F=Q.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(F)>=0?F:te.UNKNOWN})(z.status);p(new ge(H,z.message))}else p(new ge(te.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new ge(te.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ye(cn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);ye(cn,`RPC '${e}' ${c} sending request:`,o),g.send(t,"POST",_,i,15)}))}T_(e,t,i){const o=Up(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=lS(),d=oS(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,i),p.encodeInitMessageHeaders=!0;const _=l.join("");ye(cn,`Creating RPC '${e}' stream ${o}: ${_}`,p);const T=c.createWebChannel(_,p);this.I_(T);let A=!1,V=!1;const z=new E2({Yo:U=>{V?ye(cn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(A||(ye(cn,`Opening RPC '${e}' stream ${o} transport.`),T.open(),A=!0),ye(cn,`RPC '${e}' stream ${o} sending:`,U),T.send(U))},Zo:()=>T.close()}),H=(U,Q,F)=>{U.listen(Q,(re=>{try{F(re)}catch(_e){setTimeout((()=>{throw _e}),0)}}))};return H(T,Su.EventType.OPEN,(()=>{V||(ye(cn,`RPC '${e}' stream ${o} transport opened.`),z.o_())})),H(T,Su.EventType.CLOSE,(()=>{V||(V=!0,ye(cn,`RPC '${e}' stream ${o} transport closed`),z.a_(),this.E_(T))})),H(T,Su.EventType.ERROR,(U=>{V||(V=!0,Go(cn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),z.a_(new ge(te.UNAVAILABLE,"The operation could not be completed")))})),H(T,Su.EventType.MESSAGE,(U=>{if(!V){const Q=U.data[0];tt(!!Q,16349);const F=Q,re=F?.error||F[0]?.error;if(re){ye(cn,`RPC '${e}' stream ${o} received error:`,re);const _e=re.status;let ae=(function(I){const w=Vt[I];if(w!==void 0)return BS(w)})(_e),Se=re.message;ae===void 0&&(ae=te.INTERNAL,Se="Unknown error status: "+_e+" with message "+re.message),V=!0,z.a_(new ge(ae,Se)),T.close()}else ye(cn,`RPC '${e}' stream ${o} received:`,Q),z.u_(Q)}})),H(d,aS.STAT_EVENT,(U=>{U.stat===Rp.PROXY?ye(cn,`RPC '${e}' stream ${o} detected buffering proxy`):U.stat===Rp.NOPROXY&&ye(cn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{z.__()}),0),z}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function cp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(r){return new wC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,t,i=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-i);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="PersistentStream";class rA{constructor(e,t,i,o,l,c,d,p){this.Mi=e,this.S_=i,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nA(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Mi(t.toString()),Mi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===t&&this.G_(i,o)}),(i=>{e((()=>{const o=new ge(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(C0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(C0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class S2 extends rA{constructor(e,t,i,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=CC(this.serializer,e),i=(function(l){if(!("targetChange"in l))return ke.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?ke.min():c.readTime?Fr(c.readTime):ke.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=Pp(this.serializer),t.addTarget=(function(l,c){let d;const p=c.target;if(d=Np(p)?{documents:NC(l,p)}:{query:OC(l,p).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=GS(l,c.resumeToken);const g=Vp(l,c.expectedCount);g!==null&&(d.expectedCount=g)}else if(c.snapshotVersion.compareTo(ke.min())>0){d.readTime=cf(l,c.snapshotVersion.toTimestamp());const g=Vp(l,c.expectedCount);g!==null&&(d.expectedCount=g)}return d})(this.serializer,e);const i=MC(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=Pp(this.serializer),t.removeTarget=e,this.q_(t)}}class A2 extends rA{constructor(e,t,i,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=DC(e.writeResults,e.commitTime),i=Fr(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Pp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>xC(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{}class w2 extends b2{constructor(e,t,i,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Mp(t,i),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(te.UNKNOWN,l.toString())}))}Ho(e,t,i,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,Mp(t,i),o,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ge(te.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class R2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mi(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da="RemoteStore";class I2{constructor(e,t,i,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Ma(this)&&(ye(Da,"Restarting streams for network reachability change."),await(async function(p){const g=Pe(p);g.Ea.add(4),await Xu(g),g.Ra.set("Unknown"),g.Ea.delete(4),await jf(g)})(this))}))})),this.Ra=new R2(i,o)}}async function jf(r){if(Ma(r))for(const e of r.da)await e(!0)}async function Xu(r){for(const e of r.da)await e(!1)}function iA(r,e){const t=Pe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Tg(t)?Eg(t):il(t).O_()&&vg(t,e))}function _g(r,e){const t=Pe(r),i=il(t);t.Ia.delete(e),i.O_()&&sA(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ma(t)&&t.Ra.set("Unknown"))}function vg(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}il(r).Y_(e)}function sA(r,e){r.Va.Ue(e),il(r).Z_(e)}function Eg(r){r.Va=new TC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),il(r).start(),r.Ra.ua()}function Tg(r){return Ma(r)&&!il(r).x_()&&r.Ia.size>0}function Ma(r){return Pe(r).Ea.size===0}function aA(r){r.Va=void 0}async function C2(r){r.Ra.set("Online")}async function x2(r){r.Ia.forEach(((e,t)=>{vg(r,e)}))}async function D2(r,e){aA(r),Tg(r)?(r.Ra.ha(e),Eg(r)):r.Ra.set("Unknown")}async function N2(r,e,t){if(r.Ra.set("Online"),e instanceof HS&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,c),o.Ia.delete(d),o.Va.removeTarget(d))})(r,e)}catch(i){ye(Da,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ff(r,i)}else if(e instanceof Bh?r.Va.Ze(e):e instanceof qS?r.Va.st(e):r.Va.tt(e),!t.isEqual(ke.min()))try{const i=await tA(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(p.resumeToken,c))}})),d.targetMismatches.forEach(((p,g)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(on.EMPTY_BYTE_STRING,_.snapshotVersion)),sA(l,p);const T=new ws(_.target,p,g,_.sequenceNumber);vg(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(i){ye(Da,"Failed to raise snapshot:",i),await ff(r,i)}}async function ff(r,e,t){if(!nl(e))throw e;r.Ea.add(1),await Xu(r),r.Ra.set("Offline"),t||(t=()=>tA(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ye(Da,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await jf(r)}))}function oA(r,e){return e().catch((t=>ff(r,t,e)))}async function zf(r){const e=Pe(r),t=Ps(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:rg;for(;O2(e);)try{const o=await d2(e.localStore,i);if(o===null){e.Ta.length===0&&t.L_();break}i=o.batchId,V2(e,o)}catch(o){await ff(e,o)}lA(e)&&uA(e)}function O2(r){return Ma(r)&&r.Ta.length<10}function V2(r,e){r.Ta.push(e);const t=Ps(r);t.O_()&&t.X_&&t.ea(e.mutations)}function lA(r){return Ma(r)&&!Ps(r).x_()&&r.Ta.length>0}function uA(r){Ps(r).start()}async function M2(r){Ps(r).ra()}async function k2(r){const e=Ps(r);for(const t of r.Ta)e.ea(t.mutations)}async function P2(r,e,t){const i=r.Ta.shift(),o=hg.from(i,e,t);await oA(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await zf(r)}async function L2(r,e){e&&Ps(r).X_&&await(async function(i,o){if((function(c){return _C(c)&&c!==te.ABORTED})(o.code)){const l=i.Ta.shift();Ps(i).B_(),await oA(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,o))),await zf(i)}})(r,e),lA(r)&&uA(r)}async function x0(r,e){const t=Pe(r);t.asyncQueue.verifyOperationInProgress(),ye(Da,"RemoteStore received new credentials");const i=Ma(t);t.Ea.add(3),await Xu(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await jf(t)}async function U2(r,e){const t=Pe(r);e?(t.Ea.delete(2),await jf(t)):e||(t.Ea.add(2),await Xu(t),t.Ra.set("Unknown"))}function il(r){return r.ma||(r.ma=(function(t,i,o){const l=Pe(t);return l.sa(),new S2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:C2.bind(null,r),t_:x2.bind(null,r),r_:D2.bind(null,r),H_:N2.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Tg(r)?Eg(r):r.Ra.set("Unknown")):(await r.ma.stop(),aA(r))}))),r.ma}function Ps(r){return r.fa||(r.fa=(function(t,i,o){const l=Pe(t);return l.sa(),new A2(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:M2.bind(null,r),r_:L2.bind(null,r),ta:k2.bind(null,r),na:P2.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await zf(r)):(await r.fa.stop(),r.Ta.length>0&&(ye(Da,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,t,i,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=o,this.removalCallback=l,this.deferred=new Di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,o,l){const c=Date.now()+i,d=new Sg(e,t,c,o,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ag(r,e){if(Mi("AsyncQueue",`${e}: ${r}`),nl(r))return new ge(te.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ce.comparator(t.key,i.key):(t,i)=>Ce.comparator(t.key,i.key),this.keyedMap=Au(),this.sortedSet=new vt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=i.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Uo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(){this.ga=new vt(Ce.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Xo{constructor(e,t,i,o,l,c,d,p,g){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,i,o,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new Xo(e,t,Uo.emptySet(t),c,i,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==i[o].type||!t[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class z2{constructor(){this.queries=N0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const o=Pe(t),l=o.queries;o.queries=N0(),l.forEach(((c,d)=>{for(const p of d.Sa)p.onError(i)}))})(this,new ge(te.ABORTED,"Firestore shutting down"))}}function N0(){return new Va((r=>DS(r)),Vf)}async function cA(r,e){const t=Pe(r);let i=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(i=2):(l=new j2,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const d=Ag(c,`Initialization of query '${Mo(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&bg(t)}async function hA(r,e){const t=Pe(r),i=e.query;let o=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function F2(r,e){const t=Pe(r);let i=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(o)&&(i=!0);c.wa=o}}i&&bg(t)}function B2(r,e,t){const i=Pe(r),o=i.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);i.queries.delete(e)}function bg(r){r.Ca.forEach((e=>{e.next()}))}var jp,O0;(O0=jp||(jp={})).Ma="default",O0.Cache="cache";class fA{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const o of e.docChanges)o.type!==3&&i.push(o);e=new Xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==jp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.key=e}}class mA{constructor(e){this.key=e}}class q2{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ke(),this.mutatedKeys=Ke(),this.eu=NS(e),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new D0,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const A=o.get(_),V=Mf(this.query,T)?T:null,z=!!A&&this.mutatedKeys.has(A.key),H=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let U=!1;A&&V?A.data.isEqual(V.data)?z!==H&&(i.track({type:3,doc:V}),U=!0):this.su(A,V)||(i.track({type:2,doc:V}),U=!0,(p&&this.eu(V,p)>0||g&&this.eu(V,g)<0)&&(d=!0)):!A&&V?(i.track({type:0,doc:V}),U=!0):A&&!V&&(i.track({type:1,doc:A}),U=!0,(p||g)&&(d=!0)),U&&(V?(c=c.add(V),l=H?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,T)=>(function(V,z){const H=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:U})}};return H(V)-H(z)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),o=o??!1;const d=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,g=p!==this.Za;return this.Za=p,c.length!==0||g?{snapshot:new Xo(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new D0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ke(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new mA(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new dA(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Xo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const wg="SyncEngine";class H2{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class G2{constructor(e){this.key=e,this.hu=!1}}class $2{constructor(e,t,i,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Va((d=>DS(d)),Vf),this.Iu=new Map,this.Eu=new Set,this.du=new vt(Ce.comparator),this.Au=new Map,this.Ru=new mg,this.Vu={},this.mu=new Map,this.fu=Yo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function K2(r,e,t=!0){const i=EA(r);let o;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await pA(i,e,t,!0),o}async function Q2(r,e){const t=EA(r);await pA(t,e,!0,!1)}async function pA(r,e,t,i){const o=await m2(r.localStore,zr(e)),l=o.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await Y2(r,e,l,c==="current",o.resumeToken)),r.isPrimaryClient&&t&&iA(r.remoteStore,o),d}async function Y2(r,e,t,i,o){r.pu=(T,A,V)=>(async function(H,U,Q,F){let re=U.view.ru(Q);re.Cs&&(re=await b0(H.localStore,U.query,!1).then((({documents:k})=>U.view.ru(k,re))));const _e=F&&F.targetChanges.get(U.targetId),ae=F&&F.targetMismatches.get(U.targetId)!=null,Se=U.view.applyChanges(re,H.isPrimaryClient,_e,ae);return M0(H,U.targetId,Se.au),Se.snapshot})(r,T,A,V);const l=await b0(r.localStore,e,!0),c=new q2(e,l.Qs),d=c.ru(l.documents),p=Yu.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",o),g=c.applyChanges(d,r.isPrimaryClient,p);M0(r,t,g.au);const _=new H2(e,t,c);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),g.snapshot}async function X2(r,e,t){const i=Pe(r),o=i.Tu.get(e),l=i.Iu.get(o.targetId);if(l.length>1)return i.Iu.set(o.targetId,l.filter((c=>!Vf(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await Lp(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),t&&_g(i.remoteStore,o.targetId),zp(i,o.targetId)})).catch(tl)):(zp(i,o.targetId),await Lp(i.localStore,o.targetId,!0))}async function W2(r,e){const t=Pe(r),i=t.Tu.get(e),o=t.Iu.get(i.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),_g(t.remoteStore,i.targetId))}async function Z2(r,e,t){const i=sx(r);try{const o=await(function(c,d){const p=Pe(c),g=mt.now(),_=d.reduce(((V,z)=>V.add(z.key)),Ke());let T,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let z=Pi(),H=Ke();return p.Ns.getEntries(V,_).next((U=>{z=U,z.forEach(((Q,F)=>{F.isValidDocument()||(H=H.add(Q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,z))).next((U=>{T=U;const Q=[];for(const F of d){const re=dC(F,T.get(F.key).overlayedDocument);re!=null&&Q.push(new js(F.key,re,SS(re.value.mapValue),dr.exists(!0)))}return p.mutationQueue.addMutationBatch(V,g,Q,d)})).next((U=>{A=U;const Q=U.applyToLocalDocumentSet(T,H);return p.documentOverlayCache.saveOverlays(V,U.batchId,Q)}))})).then((()=>({batchId:A.batchId,changes:VS(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(o.batchId),(function(c,d,p){let g=c.Vu[c.currentUser.toKey()];g||(g=new vt($e)),g=g.insert(d,p),c.Vu[c.currentUser.toKey()]=g})(i,o.batchId,t),await Wu(i,o.changes),await zf(i.remoteStore)}catch(o){const l=Ag(o,"Failed to persist write");t.reject(l)}}async function gA(r,e){const t=Pe(r);try{const i=await h2(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(tt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?tt(c.hu,14607):o.removedDocuments.size>0&&(tt(c.hu,42227),c.hu=!1))})),await Wu(t,i,e)}catch(i){await tl(i)}}function V0(r,e,t){const i=Pe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const o=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(c,d){const p=Pe(c);p.onlineState=d;let g=!1;p.queries.forEach(((_,T)=>{for(const A of T.Sa)A.va(d)&&(g=!0)})),g&&bg(p)})(i.eventManager,e),o.length&&i.Pu.H_(o),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function J2(r,e,t){const i=Pe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const o=i.Au.get(e),l=o&&o.key;if(l){let c=new vt(Ce.comparator);c=c.insert(l,dn.newNoDocument(l,ke.min()));const d=Ke().add(l),p=new Lf(ke.min(),new Map,new vt($e),c,d);await gA(i,p),i.du=i.du.remove(l),i.Au.delete(e),Rg(i)}else await Lp(i.localStore,e,!1).then((()=>zp(i,e,t))).catch(tl)}async function ex(r,e){const t=Pe(r),i=e.batch.batchId;try{const o=await c2(t.localStore,e);_A(t,i,null),yA(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Wu(t,o)}catch(o){await tl(o)}}async function tx(r,e,t){const i=Pe(r);try{const o=await(function(c,d){const p=Pe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,d).next((T=>(tt(T!==null,37113),_=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,d))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(i.localStore,e);_A(i,e,t),yA(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Wu(i,o)}catch(o){await tl(o)}}function yA(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function _A(r,e,t){const i=Pe(r);let o=i.Vu[i.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),i.Vu[i.currentUser.toKey()]=o}}function zp(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||vA(r,i)}))}function vA(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(_g(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Rg(r))}function M0(r,e,t){for(const i of t)i instanceof dA?(r.Ru.addReference(i.key,e),nx(r,i)):i instanceof mA?(ye(wg,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||vA(r,i.key)):Oe(19791,{wu:i})}function nx(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(ye(wg,"New document in limbo: "+t),r.Eu.add(i),Rg(r))}function Rg(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new Ce(dt.fromString(e)),i=r.fu.next();r.Au.set(i,new G2(t)),r.du=r.du.insert(t,i),iA(r.remoteStore,new ws(zr(lg(t.path)),i,"TargetPurposeLimboResolution",Df.ce))}}async function Wu(r,e,t){const i=Pe(r),o=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,p)=>{c.push(i.pu(p,e,t).then((g=>{if((g||t)&&i.isPrimaryClient){const _=g?!g.fromCache:t?.targetChanges.get(p.targetId)?.current;i.sharedClientState.updateQueryState(p.targetId,_?"current":"not-current")}if(g){o.push(g);const _=gg.As(p.targetId,g);l.push(_)}})))})),await Promise.all(c),i.Pu.H_(o),await(async function(p,g){const _=Pe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>se.forEach(g,(A=>se.forEach(A.Es,(V=>_.persistence.referenceDelegate.addReference(T,A.targetId,V))).next((()=>se.forEach(A.ds,(V=>_.persistence.referenceDelegate.removeReference(T,A.targetId,V)))))))))}catch(T){if(!nl(T))throw T;ye(yg,"Failed to update sequence numbers: "+T)}for(const T of g){const A=T.targetId;if(!T.fromCache){const V=_.Ms.get(A),z=V.snapshotVersion,H=V.withLastLimboFreeSnapshotVersion(z);_.Ms=_.Ms.insert(A,H)}}})(i.localStore,l))}async function rx(r,e){const t=Pe(r);if(!t.currentUser.isEqual(e)){ye(wg,"User change. New user:",e.toKey());const i=await eA(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((p=>{p.reject(new ge(te.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Wu(t,i.Ls)}}function ix(r,e){const t=Pe(r),i=t.Au.get(e);if(i&&i.hu)return Ke().add(i.key);{let o=Ke();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const d=t.Tu.get(c);o=o.unionWith(d.view.nu)}return o}}function EA(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=gA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ix.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J2.bind(null,e),e.Pu.H_=F2.bind(null,e.eventManager),e.Pu.yu=B2.bind(null,e.eventManager),e}function sx(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ex.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tx.bind(null,e),e}class df{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return u2(this.persistence,new a2,e.initialUser,this.serializer)}Cu(e){return new JS(pg.mi,this.serializer)}Du(e){return new g2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}df.provider={build:()=>new df};class ax extends df{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tt(this.persistence.referenceDelegate instanceof hf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new GC(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new JS((i=>hf.mi(i,t)),this.serializer)}}class Fp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>V0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=rx.bind(null,this.syncEngine),await U2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new z2})()}createDatastore(e){const t=Uf(e.databaseInfo.databaseId),i=(function(l){return new T2(l)})(e.databaseInfo);return(function(l,c,d,p){return new w2(l,c,d,p)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,o,l,c,d){return new I2(i,o,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>V0(this.syncEngine,t,0)),(function(){return I0.v()?new I0:new y2})())}createSyncEngine(e,t){return(function(o,l,c,d,p,g,_){const T=new $2(o,l,c,d,p,g);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=Pe(t);ye(Da,"RemoteStore shutting down."),i.Ea.add(5),await Xu(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Fp.provider={build:()=>new Fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="FirestoreClient";class ox{constructor(e,t,i,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=o,this.user=hn.UNAUTHENTICATED,this.clientId=ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{ye(Ls,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(ye(Ls,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ag(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function hp(r,e){r.asyncQueue.verifyOperationInProgress(),ye(Ls,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async o=>{i.isEqual(o)||(await eA(e.localStore,o),i=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function k0(r,e){r.asyncQueue.verifyOperationInProgress();const t=await lx(r);ye(Ls,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>x0(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,o)=>x0(e.remoteStore,o))),r._onlineComponents=e}async function lx(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ye(Ls,"Using user provided OfflineComponentProvider");try{await hp(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Go("Error using user provided cache. Falling back to memory cache: "+t),await hp(r,new df)}}else ye(Ls,"Using default OfflineComponentProvider"),await hp(r,new ax(void 0));return r._offlineComponents}async function SA(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ye(Ls,"Using user provided OnlineComponentProvider"),await k0(r,r._uninitializedComponentsProvider._online)):(ye(Ls,"Using default OnlineComponentProvider"),await k0(r,new Fp))),r._onlineComponents}function ux(r){return SA(r).then((e=>e.syncEngine))}async function AA(r){const e=await SA(r),t=e.eventManager;return t.onListen=K2.bind(null,e.syncEngine),t.onUnlisten=X2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Q2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=W2.bind(null,e.syncEngine),t}function cx(r,e,t={}){const i=new Di;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new TA({next:A=>{_.Nu(),c.enqueueAndForget((()=>hA(l,T)));const V=A.docs.has(d);!V&&A.fromCache?g.reject(new ge(te.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&A.fromCache&&p&&p.source==="server"?g.reject(new ge(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(A)},error:A=>g.reject(A)}),T=new fA(lg(d.path),_,{includeMetadataChanges:!0,qa:!0});return cA(l,T)})(await AA(r),r.asyncQueue,e,t,i))),i.promise}function hx(r,e,t={}){const i=new Di;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,p,g){const _=new TA({next:A=>{_.Nu(),c.enqueueAndForget((()=>hA(l,T))),A.fromCache&&p.source==="server"?g.reject(new ge(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(A)},error:A=>g.reject(A)}),T=new fA(d,_,{includeMetadataChanges:!0,qa:!0});return cA(l,T)})(await AA(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="firestore.googleapis.com",L0=!0;class U0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wA,this.ssl=L0}else this.host=e.host,this.ssl=e.ssl??L0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ZS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new ge(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}RI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bA(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,t,i,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new U0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new U0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new gI;switch(i.type){case"firstParty":return new EI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=P0.get(t);i&&(ye("ComponentProvider","Removing Datastore"),P0.delete(t),i.terminate())})(this),Promise.resolve()}}function fx(r,e,t,i={}){r=ki(r,Ff);const o=Zo(e),l=r._getSettings(),c={...l,emulatorOptions:r._getEmulatorOptions()},d=`${e}:${t}`;o&&(YT(`https://${d}`),XT("Firestore",!0)),l.host!==wA&&l.host!==d&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:d,ssl:o,emulatorOptions:i};if(!Ia(p,c)&&(r._setSettings(p),i.mockUserToken)){let g,_;if(typeof i.mockUserToken=="string")g=i.mockUserToken,_=hn.MOCK_USER;else{g=q1(i.mockUserToken,r._app?.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new ge(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new hn(T)}r._authCredentials=new yI(new cS(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new zs(this.firestore,e,this._query)}}class Lt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Lt(this.firestore,e,this._key)}toJSON(){return{type:Lt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ku(t,Lt._jsonSchema))return new Lt(e,i||null,new Ce(dt.fromString(t.referencePath)))}}Lt._jsonSchemaVersion="firestore/documentReference/1.0",Lt._jsonSchema={type:Pt("string",Lt._jsonSchemaVersion),referencePath:Pt("string")};class Ds extends zs{constructor(e,t,i){super(e,t,lg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Lt(this.firestore,null,new Ce(e))}withConverter(e){return new Ds(this.firestore,e,this._path)}}function fp(r,e,...t){if(r=Wt(r),hS("collection","path",e),r instanceof Ff){const i=dt.fromString(e,...t);return WE(i),new Ds(r,null,i)}{if(!(r instanceof Lt||r instanceof Ds))throw new ge(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(dt.fromString(e,...t));return WE(i),new Ds(r.firestore,null,i)}}function qh(r,e,...t){if(r=Wt(r),arguments.length===1&&(e=ng.newId()),hS("doc","path",e),r instanceof Ff){const i=dt.fromString(e,...t);return XE(i),new Lt(r,null,new Ce(i))}{if(!(r instanceof Lt||r instanceof Ds))throw new ge(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(dt.fromString(e,...t));return XE(i),new Lt(r.firestore,r instanceof Ds?r.converter:null,new Ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="AsyncQueue";class z0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nA(this,"async_queue_retry"),this._c=()=>{const i=cp();i&&ye(j0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=cp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=cp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Di;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!nl(e))throw e;ye(j0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Mi("INTERNAL UNHANDLED ERROR: ",F0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Sg.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Oe(47125,{Pc:F0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function F0(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class sl extends Ff{constructor(e,t,i,o){super(e,t,i,o),this.type="firestore",this._queue=new z0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new z0(e),this._firestoreClient=void 0,await e}}}function dx(r,e){const t=typeof r=="object"?r:eS(),i=typeof r=="string"?r:rf,o=eg(t,"firestore").getImmediate({identifier:i});if(!o._initialized){const l=F1("firestore");l&&fx(o,...l)}return o}function Ig(r){if(r._terminated)throw new ge(te.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||mx(r),r._firestoreClient}function mx(r){const e=r._freezeSettings(),t=(function(o,l,c,d){return new UI(o,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bA(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new ox(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new er(on.fromBase64String(e))}catch(t){throw new ge(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new er(on.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ku(e,er._jsonSchema))return er.fromBase64String(e.bytes)}}er._jsonSchemaVersion="firestore/bytes/1.0",er._jsonSchema={type:Pt("string",er._jsonSchemaVersion),bytes:Pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $e(this._lat,e._lat)||$e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Ku(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:Pt("string",Br._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,o){if(i.length!==o.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ku(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new qr(e.vectorValues);throw new ge(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:Pt("string",qr._jsonSchemaVersion),vectorValues:Pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=/^__.*__$/;class gx{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new js(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qu(e,this.data,t,this.fieldTransforms)}}class RA{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new js(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function IA(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:r})}}class xg{constructor(e,t,i,o,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new xg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return mf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(IA(this.Ac)&&px.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yx{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Uf(e)}Cc(e,t,i,o=!1){return new xg({Ac:e,methodName:t,Dc:i,path:an.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dg(r){const e=r._freezeSettings(),t=Uf(r._databaseId);return new yx(r._databaseId,!!e.ignoreUndefinedProperties,t)}function _x(r,e,t,i,o,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);Ng("Data must be an object, but it was:",c,i);const d=CA(i,c);let p,g;if(l.merge)p=new jn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const A=Bp(e,T,t);if(!c.contains(A))throw new ge(te.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);DA(_,A)||_.push(A)}p=new jn(_),g=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=c.fieldTransforms;return new gx(new Cn(d),p,g)}class qf extends Cg{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qf}}function vx(r,e,t,i){const o=r.Cc(1,e,t);Ng("Data must be an object, but it was:",o,i);const l=[],c=Cn.empty();Us(i,((p,g)=>{const _=Og(e,p,t);g=Wt(g);const T=o.yc(_);if(g instanceof qf)l.push(_);else{const A=Zu(g,T);A!=null&&(l.push(_),c.set(_,A))}}));const d=new jn(l);return new RA(c,d,o.fieldTransforms)}function Ex(r,e,t,i,o,l){const c=r.Cc(1,e,t),d=[Bp(e,i,t)],p=[o];if(l.length%2!=0)throw new ge(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<l.length;A+=2)d.push(Bp(e,l[A])),p.push(l[A+1]);const g=[],_=Cn.empty();for(let A=d.length-1;A>=0;--A)if(!DA(g,d[A])){const V=d[A];let z=p[A];z=Wt(z);const H=c.yc(V);if(z instanceof qf)g.push(V);else{const U=Zu(z,H);U!=null&&(g.push(V),_.set(V,U))}}const T=new jn(g);return new RA(_,T,c.fieldTransforms)}function Tx(r,e,t,i=!1){return Zu(t,r.Cc(i?4:3,e))}function Zu(r,e){if(xA(r=Wt(r)))return Ng("Unsupported field value:",e,r),CA(r,e);if(r instanceof Cg)return(function(i,o){if(!IA(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,o){const l=[];let c=0;for(const d of i){let p=Zu(d,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,o){if((i=Wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return oC(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=mt.fromDate(i);return{timestampValue:cf(o.serializer,l)}}if(i instanceof mt){const l=new mt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cf(o.serializer,l)}}if(i instanceof Br)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof er)return{bytesValue:GS(o.serializer,i._byteString)};if(i instanceof Lt){const l=o.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:dg(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof qr)return(function(c,d){return{mapValue:{fields:{[ES]:{stringValue:TS},[sf]:{arrayValue:{values:c.toArray().map((g=>{if(typeof g!="number")throw d.Sc("VectorValues must only contain numeric values.");return ug(d.serializer,g)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${xf(i)}`)})(r,e)}function CA(r,e){const t={};return mS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(r,((i,o)=>{const l=Zu(o,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function xA(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof mt||r instanceof Br||r instanceof er||r instanceof Lt||r instanceof Cg||r instanceof qr)}function Ng(r,e,t){if(!xA(t)||!fS(t)){const i=xf(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function Bp(r,e,t){if((e=Wt(e))instanceof Bf)return e._internalPath;if(typeof e=="string")return Og(r,e);throw mf("Field path arguments must be of type string or ",r,!1,void 0,t)}const Sx=new RegExp("[~\\*/\\[\\]]");function Og(r,e,t){if(e.search(Sx)>=0)throw mf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Bf(...e.split("."))._internalPath}catch{throw mf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function mf(r,e,t,i,o){const l=i&&!i.isEmpty(),c=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${i}`),c&&(p+=` in document ${o}`),p+=")"),new ge(te.INVALID_ARGUMENT,d+r+p)}function DA(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t,i,o,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Lt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ax(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Ax extends NA{data(){return super.data()}}function Hf(r,e){return typeof e=="string"?Og(r,e):e instanceof Bf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ge(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vg{}class Mg extends Vg{}function B0(r,e,...t){let i=[];e instanceof Vg&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((p=>p instanceof kg)).length,d=l.filter((p=>p instanceof Gf)).length;if(c>1||c>0&&d>0)throw new ge(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)r=o._apply(r);return r}class Gf extends Mg{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Gf(e,t,i)}_apply(e){const t=this._parse(e);return OA(e._query,t),new zs(e.firestore,e.converter,Op(e._query,t))}_parse(e){const t=Dg(e.firestore);return(function(l,c,d,p,g,_,T){let A;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){$0(T,_);const z=[];for(const H of T)z.push(G0(p,l,H));A={arrayValue:{values:z}}}else A=G0(p,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||$0(T,_),A=Tx(d,c,T,_==="in"||_==="not-in");return kt.create(g,_,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wx(r,e,t){const i=e,o=Hf("where",r);return Gf._create(o,i,t)}class kg extends Vg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new kg(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:pr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const d=l.getFlattenedFilters();for(const p of d)OA(c,p),c=Op(c,p)})(e._query,t),new zs(e.firestore,e.converter,Op(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Pg extends Mg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Pg(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new ge(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ju(l,c)})(e._query,this._field,this._direction);return new zs(e.firestore,e.converter,(function(o,l){const c=o.explicitOrderBy.concat([l]);return new rl(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function q0(r,e="asc"){const t=e,i=Hf("orderBy",r);return Pg._create(i,t)}class Lg extends Mg{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Lg(e,t,i)}_apply(e){return new zs(e.firestore,e.converter,of(e._query,this._limit,this._limitType))}}function H0(r){return II("limit",r),Lg._create("limit",r,"F")}function G0(r,e,t){if(typeof(t=Wt(t))=="string"){if(t==="")throw new ge(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xS(e)&&t.indexOf("/")!==-1)throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(dt.fromString(t));if(!Ce.isDocumentKey(i))throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return s0(r,new Ce(i))}if(t instanceof Lt)return s0(r,t._key);throw new ge(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xf(t)}.`)}function $0(r,e){if(!Array.isArray(r)||r.length===0)throw new ge(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function OA(r,e){const t=(function(o,l){for(const c of o)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Rx{convertValue(e,t="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Us(e,((o,l)=>{i[o]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[sf].arrayValue?.values?.map((i=>Rt(i.doubleValue)));return new qr(t)}convertGeoPoint(e){return new Br(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Of(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){const t=Vs(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=dt.fromString(e);tt(WS(i),9688,{name:e});const o=new Lu(i.get(1),i.get(3)),l=new Ce(i.popFirst(5));return o.isEqual(t)||Mi(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class wu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ba extends NA{constructor(e,t,i,o,l,c){super(e,t,i,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Hf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ba._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",ba._jsonSchema={type:Pt("string",ba._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Hh extends ba{data(e={}){return super.data(e)}}class jo{constructor(e,t,i,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new wu(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Hh(this._firestore,this._userDataWriter,i.key,i,new wu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((d=>{const p=new Hh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new wu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const p=new Hh(o._firestore,o._userDataWriter,d.doc.key,d.doc,new wu(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return d.type!==0&&(g=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:Cx(d.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Cx(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(r){r=ki(r,Lt);const e=ki(r.firestore,sl);return cx(Ig(e),r._key).then((t=>Vx(e,r,t)))}jo._jsonSchemaVersion="firestore/querySnapshot/1.0",jo._jsonSchema={type:Pt("string",jo._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class VA extends Rx{constructor(e){super(),this.firestore=e}convertBytes(e){return new er(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Lt(this.firestore,null,t)}}function K0(r){r=ki(r,zs);const e=ki(r.firestore,sl),t=Ig(e),i=new VA(e);return bx(r._query),hx(t,r._query).then((o=>new jo(e,i,r,o)))}function Dx(r,e,t,...i){r=ki(r,Lt);const o=ki(r.firestore,sl),l=Dg(o);let c;return c=typeof(e=Wt(e))=="string"||e instanceof Bf?Ex(l,"updateDoc",r._key,e,t,i):vx(l,"updateDoc",r._key,e),Ug(o,[c.toMutation(r._key,dr.exists(!0))])}function Nx(r){return Ug(ki(r.firestore,sl),[new cg(r._key,dr.none())])}function Ox(r,e){const t=ki(r.firestore,sl),i=qh(r),o=Ix(r.converter,e);return Ug(t,[_x(Dg(r.firestore),"addDoc",i._key,o,r.converter!==null,{}).toMutation(i._key,dr.exists(!1))]).then((()=>i))}function Ug(r,e){return(function(i,o){const l=new Di;return i.asyncQueue.enqueueAndForget((async()=>Z2(await ux(i),o,l))),l.promise})(Ig(r),e)}function Vx(r,e,t){const i=t.docs.get(e._key),o=new VA(r);return new ba(r,o,e._key,i,new wu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){el=o})(Jo),Ho(new Ca("firestore",((i,{instanceIdentifier:o,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new sl(new _I(i.getProvider("auth-internal")),new TI(c,i.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new ge(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lu(g.options.projectId,_)})(c,o),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Cs($E,KE,e),Cs($E,KE,"esm2020")})();var Mx="firebase",kx="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cs(Mx,kx,"app");function MA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Px=MA,kA=new Gu("auth","Firebase",MA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=new Zp("@firebase/auth");function Lx(r,...e){pf.logLevel<=Ge.WARN&&pf.warn(`Auth (${Jo}): ${r}`,...e)}function Gh(r,...e){pf.logLevel<=Ge.ERROR&&pf.error(`Auth (${Jo}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(r,...e){throw zg(r,...e)}function mr(r,...e){return zg(r,...e)}function jg(r,e,t){const i={...Px(),[e]:t};return new Gu("auth","Firebase",i).create(e,{appName:r.name})}function Ni(r){return jg(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ux(r,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&tr(r,"argument-error"),jg(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function zg(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return kA.create(r,...e)}function Ne(r,e,...t){if(!r)throw zg(e,...t)}function Ii(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Gh(e),new Error(e)}function Li(r,e){r||Ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(){return typeof self<"u"&&self.location?.href||""}function jx(){return Q0()==="http:"||Q0()==="https:"}function Q0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jx()||Y1()||"connection"in navigator)?navigator.onLine:!0}function Fx(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t){this.shortDelay=e,this.longDelay=t,Li(t>e,"Short delay should be less than long delay!"),this.isMobile=$1()||X1()}get(){return zx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(r,e){Li(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hx=new Ju(3e4,6e4);function zi(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Fi(r,e,t,i,o={}){return LA(r,o,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=$u({key:r.config.apiKey,...c}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...l};return Q1()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Zo(r.emulatorConfig.host)&&(g.credentials="include"),PA.fetch()(await UA(r,r.config.apiHost,t,d),g)})}async function LA(r,e,t){r._canInitEmulator=!1;const i={...Bx,...e};try{const o=new $x(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Vh(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[p,g]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(r,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Vh(r,"email-already-in-use",c);if(p==="USER_DISABLED")throw Vh(r,"user-disabled",c);const _=i[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw jg(r,_,g);tr(r,_)}}catch(o){if(o instanceof ji)throw o;tr(r,"network-request-failed",{message:String(o)})}}async function ec(r,e,t,i,o={}){const l=await Fi(r,e,t,i,o);return"mfaPendingCredential"in l&&tr(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function UA(r,e,t,i){const o=`${e}${t}?${i}`,l=r,c=l.config.emulator?Fg(r.config,o):`${r.config.apiScheme}://${o}`;return qx.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function Gx(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $x{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(mr(this.auth,"network-request-failed")),Hx.get())})}}function Vh(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const o=mr(r,e,i);return o.customData._tokenResponse=t,o}function Y0(r){return r!==void 0&&r.enterprise!==void 0}class Kx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Gx(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Qx(r,e){return Fi(r,"GET","/v2/recaptchaConfig",zi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function gf(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Xx(r,e=!1){const t=Wt(r),i=await t.getIdToken(e),o=Bg(i);Ne(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:i,authTime:Nu(dp(o.auth_time)),issuedAtTime:Nu(dp(o.iat)),expirationTime:Nu(dp(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function dp(r){return Number(r)*1e3}function Bg(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return Gh("JWT malformed, contained fewer than 3 sections"),null;try{const o=GT(t);return o?JSON.parse(o):(Gh("Failed to decode base64 JWT payload"),null)}catch(o){return Gh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function X0(r){const e=Bg(r);return Ne(e,"internal-error"),Ne(typeof e.exp<"u","internal-error"),Ne(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bu(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof ji&&Wx(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function Wx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nu(this.lastLoginAt),this.creationTime=Nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yf(r){const e=r.auth,t=await r.getIdToken(),i=await Bu(r,gf(e,{idToken:t}));Ne(i?.users.length,e,"internal-error");const o=i.users[0];r._notifyReloadListener(o);const l=o.providerUserInfo?.length?jA(o.providerUserInfo):[],c=eD(r.providerData,l),d=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!c?.length,g=d?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Hp(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,_)}async function Jx(r){const e=Wt(r);await yf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eD(r,e){return[...r.filter(i=>!e.some(o=>o.providerId===i.providerId)),...e]}function jA(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tD(r,e){const t=await LA(r,{},async()=>{const i=$u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,c=await UA(r,o,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:d,body:i};return r.emulatorConfig&&Zo(r.emulatorConfig.host)&&(p.credentials="include"),PA.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nD(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",zi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ne(e.idToken,"internal-error"),Ne(typeof e.idToken<"u","internal-error"),Ne(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):X0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ne(e.length!==0,"internal-error");const t=X0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ne(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:o,expiresIn:l}=await tD(e,t);this.updateTokensAndExpiration(i,o,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:o,expirationTime:l}=t,c=new zo;return i&&(Ne(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),o&&(Ne(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ne(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new zo,this.toJSON())}_performRefresh(){return Ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(r,e){Ne(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class fr{constructor({uid:e,auth:t,stsTokenManager:i,...o}){this.providerId="firebase",this.proactiveRefresh=new Zx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Hp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Bu(this,this.stsTokenManager.getToken(this.auth,e));return Ne(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Xx(this,e)}reload(){return Jx(this)}_assign(e){this!==e&&(Ne(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await yf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(Ni(this.auth));const e=await this.getIdToken();return await Bu(this,Yx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:A,isAnonymous:V,providerData:z,stsTokenManager:H}=t;Ne(T&&H,e,"internal-error");const U=zo.fromJSON(this.name,H);Ne(typeof T=="string",e,"internal-error"),Es(i,e.name),Es(o,e.name),Ne(typeof A=="boolean",e,"internal-error"),Ne(typeof V=="boolean",e,"internal-error"),Es(l,e.name),Es(c,e.name),Es(d,e.name),Es(p,e.name),Es(g,e.name),Es(_,e.name);const Q=new fr({uid:T,auth:e,email:o,emailVerified:A,displayName:i,isAnonymous:V,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:U,createdAt:g,lastLoginAt:_});return z&&Array.isArray(z)&&(Q.providerData=z.map(F=>({...F}))),p&&(Q._redirectEventId=p),Q}static async _fromIdTokenResponse(e,t,i=!1){const o=new zo;o.updateFromServerResponse(t);const l=new fr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:i});return await yf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const o=t.users[0];Ne(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?jA(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,d=new zo;d.updateFromIdToken(i);const p=new fr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Hp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;function Ci(r){Li(r instanceof Function,"Expected a class definition");let e=W0.get(r);return e?(Li(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,W0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}zA.type="NONE";const Z0=zA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(r,e,t){return`firebase:${r}:${e}:${t}`}class Fo{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:o,name:l}=this.auth;this.fullUserKey=$h(this.userKey,o.apiKey,l),this.fullPersistenceKey=$h("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gf(this.auth,{idToken:e}).catch(()=>{});return t?fr._fromGetAccountInfoResponse(this.auth,t,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Fo(Ci(Z0),e,i);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||Ci(Z0);const c=$h(i,e.config.apiKey,e.name);let d=null;for(const g of t)try{const _=await g._get(c);if(_){let T;if(typeof _=="string"){const A=await gf(e,{idToken:_}).catch(()=>{});if(!A)break;T=await fr._fromGetAccountInfoResponse(e,A,_)}else T=fr._fromJSON(e,_);g!==l&&(d=T),l=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Fo(l,e,i):(l=p[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Fo(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($A(e))return"Blackberry";if(KA(e))return"Webos";if(BA(e))return"Safari";if((e.includes("chrome/")||qA(e))&&!e.includes("edge/"))return"Chrome";if(GA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function FA(r=mn()){return/firefox\//i.test(r)}function BA(r=mn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qA(r=mn()){return/crios\//i.test(r)}function HA(r=mn()){return/iemobile/i.test(r)}function GA(r=mn()){return/android/i.test(r)}function $A(r=mn()){return/blackberry/i.test(r)}function KA(r=mn()){return/webos/i.test(r)}function qg(r=mn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function rD(r=mn()){return qg(r)&&!!window.navigator?.standalone}function iD(){return W1()&&document.documentMode===10}function QA(r=mn()){return qg(r)||GA(r)||KA(r)||$A(r)||/windows phone/i.test(r)||HA(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(r,e=[]){let t;switch(r){case"Browser":t=J0(mn());break;case"Worker":t=`${J0(mn())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Jo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const p=e(l);c(p)}catch(p){d(p)}});i.onAbort=t,this.queue.push(i);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aD(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",zi(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=6;class lD{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??oD,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let o=0;o<e.length;o++)i=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,t,i,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eT(this),this.idTokenSubscription=new eT(this),this.beforeStateQueue=new sD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ci(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gf(this,{idToken:e}),i=await fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Un(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(i=d.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ne(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Fx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(Ni(this));const t=e?Wt(e):null;return t&&Ne(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ne(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(Ni(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(Ni(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aD(this),t=new lD(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await nD(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ci(e)||this._popupRedirectResolver;Ne(t,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[Ci(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ne(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,i,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=YA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(Un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Lx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Bi(r){return Wt(r)}class eT{constructor(e){this.auth=e,this.observer=null,this.addObserver=sR(t=>this.observer=t)}get next(){return Ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cD(r){$f=r}function XA(r){return $f.loadJS(r)}function hD(){return $f.recaptchaEnterpriseScript}function fD(){return $f.gapiScript}function dD(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class mD{constructor(){this.enterprise=new pD}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class pD{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const gD="recaptcha-enterprise",WA="NO_RECAPTCHA";class yD{constructor(e){this.type=gD,this.auth=Bi(e)}async verify(e="verify",t=!1){async function i(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{Qx(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const g=new Kx(p);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,c(g.siteKey)}}).catch(p=>{d(p)})})}function o(l,c,d){const p=window.grecaptcha;Y0(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(g=>{c(g)}).catch(()=>{c(WA)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mD().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{i(this.auth).then(d=>{if(!t&&Y0(window.grecaptcha))o(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=hD();p.length!==0&&(p+=d),XA(p).then(()=>{o(d,l,c)}).catch(g=>{c(g)})}}).catch(d=>{c(d)})})}}async function tT(r,e,t,i=!1,o=!1){const l=new yD(r);let c;if(o)c=WA;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,g=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return i?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function _f(r,e,t,i,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await tT(r,e,t,t==="getOobCode");return i(r,l)}else return i(r,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await tT(r,e,t,t==="getOobCode");return i(r,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(r,e){const t=eg(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ia(l,e??{}))return o;tr(o,"already-initialized")}return t.initialize({options:e})}function vD(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ci);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function ED(r,e,t){const i=Bi(r);Ne(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const o=!1,l=ZA(e),{host:c,port:d}=TD(e),p=d===null?"":`:${d}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!i._canInitEmulator){Ne(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ne(Ia(g,i.config.emulator)&&Ia(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=g,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Zo(c)?(YT(`${l}//${c}${p}`),XT("Auth",!0)):SD()}function ZA(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function TD(r){const e=ZA(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){const l=o[1];return{host:l,port:nT(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:nT(c)}}}function nT(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function SD(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ii("not implemented")}_getIdTokenResponse(e){return Ii("not implemented")}_linkToIdToken(e,t){return Ii("not implemented")}_getReauthenticationResolver(e){return Ii("not implemented")}}async function AD(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(r,e){return ec(r,"POST","/v1/accounts:signInWithPassword",zi(r,e))}async function wD(r,e){return Fi(r,"POST","/v1/accounts:sendOobCode",zi(r,e))}async function RD(r,e){return wD(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(r,e){return ec(r,"POST","/v1/accounts:signInWithEmailLink",zi(r,e))}async function CD(r,e){return ec(r,"POST","/v1/accounts:signInWithEmailLink",zi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu extends Hg{constructor(e,t,i,o=null){super("password",i),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new qu(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new qu(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _f(e,t,"signInWithPassword",bD);case"emailLink":return ID(e,{email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _f(e,i,"signUpPassword",AD);case"emailLink":return CD(e,{idToken:t,email:this._email,oobCode:this._password});default:tr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(r,e){return ec(r,"POST","/v1/accounts:signInWithIdp",zi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="http://localhost";class Na extends Hg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Na(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):tr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:o,...l}=t;if(!i||!o)return null;const c=new Na(i,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Bo(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Bo(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bo(e,t)}buildRequest(){const e={requestUri:xD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$u(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ND(r){const e=Eu(Tu(r)).link,t=e?Eu(Tu(e)).deep_link_id:null,i=Eu(Tu(r)).deep_link_id;return(i?Eu(Tu(i)).link:null)||i||t||e||r}class Gg{constructor(e){const t=Eu(Tu(e)),i=t.apiKey??null,o=t.oobCode??null,l=DD(t.mode??null);Ne(i&&o&&l,"argument-error"),this.apiKey=i,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=ND(e);try{return new Gg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(){this.providerId=al.PROVIDER_ID}static credential(e,t){return qu._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Gg.parseLink(t);return Ne(i,"argument-error"),qu._fromEmailAndCode(e,i.code,i.tenantId)}}al.PROVIDER_ID="password";al.EMAIL_PASSWORD_SIGN_IN_METHOD="password";al.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends $g{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts extends tc{constructor(){super("facebook.com")}static credential(e){return Na._fromParams({providerId:Ts.PROVIDER_ID,signInMethod:Ts.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ts.credentialFromTaggedObject(e)}static credentialFromError(e){return Ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ts.credential(e.oauthAccessToken)}catch{return null}}}Ts.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ts.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends tc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Na._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ri.credential(t,i)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss extends tc{constructor(){super("github.com")}static credential(e){return Na._fromParams({providerId:Ss.PROVIDER_ID,signInMethod:Ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ss.credentialFromTaggedObject(e)}static credentialFromError(e){return Ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ss.credential(e.oauthAccessToken)}catch{return null}}}Ss.GITHUB_SIGN_IN_METHOD="github.com";Ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends tc{constructor(){super("twitter.com")}static credential(e,t){return Na._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return As.credential(t,i)}catch{return null}}}As.TWITTER_SIGN_IN_METHOD="twitter.com";As.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OD(r,e){return ec(r,"POST","/v1/accounts:signUp",zi(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,o=!1){const l=await fr._fromIdTokenResponse(e,i,o),c=rT(i);return new Oa({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const o=rT(i);return new Oa({user:e,providerId:o,_tokenResponse:i,operationType:t})}}function rT(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends ji{constructor(e,t,i,o){super(t.code,t.message),this.operationType=i,this.user=o,Object.setPrototypeOf(this,vf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,o){return new vf(e,t,i,o)}}function JA(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?vf._fromErrorAndOperation(r,l,e,i):l})}async function VD(r,e,t=!1){const i=await Bu(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Oa._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD(r,e,t=!1){const{auth:i}=r;if(Un(i.app))return Promise.reject(Ni(i));const o="reauthenticate";try{const l=await Bu(r,JA(i,o,e,r),t);Ne(l.idToken,i,"internal-error");const c=Bg(l.idToken);Ne(c,i,"internal-error");const{sub:d}=c;return Ne(r.uid===d,i,"user-mismatch"),Oa._forOperation(r,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&tr(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eb(r,e,t=!1){if(Un(r.app))return Promise.reject(Ni(r));const i="signIn",o=await JA(r,i,e),l=await Oa._fromIdTokenResponse(r,i,o);return t||await r._updateCurrentUser(l.user),l}async function kD(r,e){return eb(Bi(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(r){const e=Bi(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PD(r,e,t){const i=Bi(r);await _f(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",RD)}async function LD(r,e,t){if(Un(r.app))return Promise.reject(Ni(r));const i=Bi(r),c=await _f(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OD).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&tb(r),p}),d=await Oa._fromIdTokenResponse(i,"signIn",c);return await i._updateCurrentUser(d.user),d}function UD(r,e,t){return Un(r.app)?Promise.reject(Ni(r)):kD(Wt(r),al.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&tb(r),i})}function jD(r,e,t,i){return Wt(r).onIdTokenChanged(e,t,i)}function zD(r,e,t){return Wt(r).beforeAuthStateChanged(e,t)}function FD(r,e,t,i){return Wt(r).onAuthStateChanged(e,t,i)}function BD(r){return Wt(r).signOut()}const Ef="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ef,"1"),this.storage.removeItem(Ef),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=1e3,HD=10;class rb extends nb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),o=this.localCache[t];i!==o&&e(t,o,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,p)=>{this.notifyListeners(c,p)});return}const i=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);iD()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,HD):o()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},qD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rb.type="LOCAL";const GD=rb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib extends nb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ib.type="SESSION";const sb=ib;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const i=new Kf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:o});const d=Array.from(c).map(async g=>g(t.origin,l)),p=await $D(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Kf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kg(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((d,p)=>{const g=Kg("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},i);c={messageChannel:o,onMessage(T){const A=T;if(A.data.eventId===g)switch(A.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(A.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(){return window}function QD(r){Hr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(){return typeof Hr().WorkerGlobalScope<"u"&&typeof Hr().importScripts=="function"}async function YD(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XD(){return navigator?.serviceWorker?.controller||null}function WD(){return ab()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="firebaseLocalStorageDb",ZD=1,Tf="firebaseLocalStorage",lb="fbase_key";class nc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qf(r,e){return r.transaction([Tf],e?"readwrite":"readonly").objectStore(Tf)}function JD(){const r=indexedDB.deleteDatabase(ob);return new nc(r).toPromise()}function Gp(){const r=indexedDB.open(ob,ZD);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Tf,{keyPath:lb})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Tf)?e(i):(i.close(),await JD(),e(await Gp()))})})}async function iT(r,e,t){const i=Qf(r,!0).put({[lb]:e,value:t});return new nc(i).toPromise()}async function eN(r,e){const t=Qf(r,!1).get(e),i=await new nc(t).toPromise();return i===void 0?null:i.value}function sT(r,e){const t=Qf(r,!0).delete(e);return new nc(t).toPromise()}const tN=800,nN=3;class ub{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>nN)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ab()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Kf._getInstance(WD()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await YD(),!this.activeServiceWorker)return;this.sender=new KD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gp();return await iT(e,Ef,"1"),await sT(e,Ef),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>iT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>eN(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Qf(o,!1).getAll();return new nc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const o of Array.from(i))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ub.type="LOCAL";const rN=ub;new Ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(r,e){return e?Ci(e):(Ne(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg extends Hg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function iN(r){return eb(r.auth,new Qg(r),r.bypassAuthState)}function sN(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),MD(t,new Qg(r),r.bypassAuthState)}async function aN(r){const{auth:e,user:t}=r;return Ne(t,e,"internal-error"),VD(t,new Qg(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e,t,i,o,l=!1){this.auth=e,this.resolver=i,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:o,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iN;case"linkViaPopup":case"linkViaRedirect":return aN;case"reauthViaPopup":case"reauthViaRedirect":return sN;default:tr(this.auth,"internal-error")}}resolve(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=new Ju(2e3,1e4);async function lN(r,e,t){if(Un(r.app))return Promise.reject(mr(r,"operation-not-supported-in-this-environment"));const i=Bi(r);Ux(r,e,$g);const o=cb(i,t);return new Ta(i,"signInViaPopup",e,o).executeNotNull()}class Ta extends hb{constructor(e,t,i,o,l){super(e,t,o,l),this.provider=i,this.authWindow=null,this.pollId=null,Ta.currentPopupAction&&Ta.currentPopupAction.cancel(),Ta.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ne(e,this.auth,"internal-error"),e}async onExecution(){Li(this.filter.length===1,"Popup operations only handle one event");const e=Kg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ta.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,oN.get())};e()}}Ta.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="pendingRedirect",Kh=new Map;class cN extends hb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Kh.get(this.auth._key());if(!e){try{const i=await hN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Kh.set(this.auth._key(),e)}return this.bypassAuthState||Kh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hN(r,e){const t=mN(e),i=dN(r);if(!await i._isAvailable())return!1;const o=await i._get(t)==="true";return await i._remove(t),o}function fN(r,e){Kh.set(r._key(),e)}function dN(r){return Ci(r._redirectPersistence)}function mN(r){return $h(uN,r.config.apiKey,r.name)}async function pN(r,e,t=!1){if(Un(r.app))return Promise.reject(Ni(r));const i=Bi(r),o=cb(i,e),c=await new cN(i,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=600*1e3;class yN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_N(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!fb(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(mr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gN&&this.cachedEventUids.clear(),this.cachedEventUids.has(aT(e))}saveEventToCache(e){this.cachedEventUids.add(aT(e)),this.lastProcessedEventTime=Date.now()}}function aT(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function fb({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function _N(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fb(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(r,e={}){return Fi(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TN=/^https?/;async function SN(r){if(r.config.emulator)return;const{authorizedDomains:e}=await vN(r);for(const t of e)try{if(AN(t))return}catch{}tr(r,"unauthorized-domain")}function AN(r){const e=qp(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!TN.test(t))return!1;if(EN.test(r))return i===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=new Ju(3e4,6e4);function oT(){const r=Hr().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function wN(r){return new Promise((e,t)=>{function i(){oT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oT(),t(mr(r,"network-request-failed"))},timeout:bN.get()})}if(Hr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Hr().gapi?.load)i();else{const o=dD("iframefcb");return Hr()[o]=()=>{gapi.load?i():t(mr(r,"network-request-failed"))},XA(`${fD()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Qh=null,e})}let Qh=null;function RN(r){return Qh=Qh||wN(r),Qh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=new Ju(5e3,15e3),CN="__/auth/iframe",xN="emulator/auth/iframe",DN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ON(r){const e=r.config;Ne(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Fg(e,xN):`https://${r.config.authDomain}/${CN}`,i={apiKey:e.apiKey,appName:r.name,v:Jo},o=NN.get(r.config.apiHost);o&&(i.eid=o);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${$u(i).slice(1)}`}async function VN(r){const e=await RN(r),t=Hr().gapi;return Ne(t,r,"internal-error"),e.open({where:document.body,url:ON(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DN,dontclear:!0},i=>new Promise(async(o,l)=>{await i.restyle({setHideOnLeave:!1});const c=mr(r,"network-request-failed"),d=Hr().setTimeout(()=>{l(c)},IN.get());function p(){Hr().clearTimeout(d),o(i)}i.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kN=500,PN=600,LN="_blank",UN="http://localhost";class lT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function jN(r,e,t,i=kN,o=PN){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const p={...MN,width:i.toString(),height:o.toString(),top:l,left:c},g=mn().toLowerCase();t&&(d=qA(g)?LN:t),FA(g)&&(e=e||UN,p.scrollbars="yes");const _=Object.entries(p).reduce((A,[V,z])=>`${A}${V}=${z},`,"");if(rD(g)&&d!=="_self")return zN(e||"",d),new lT(null);const T=window.open(e||"",d,_);Ne(T,r,"popup-blocked");try{T.focus()}catch{}return new lT(T)}function zN(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="__/auth/handler",BN="emulator/auth/handler",qN=encodeURIComponent("fac");async function uT(r,e,t,i,o,l){Ne(r.config.authDomain,r,"auth-domain-config-required"),Ne(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:Jo,eventId:o};if(e instanceof $g){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",iR(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof tc){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}r.tenantId&&(c.tid=r.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const p=await r._getAppCheckToken(),g=p?`#${qN}=${encodeURIComponent(p)}`:"";return`${HN(r)}?${$u(d).slice(1)}${g}`}function HN({config:r}){return r.emulator?Fg(r,BN):`https://${r.authDomain}/${FN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="webStorageSupport";class GN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sb,this._completeRedirectFn=pN,this._overrideRedirectResult=fN}async _openPopup(e,t,i,o){Li(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await uT(e,t,i,qp(),o);return jN(e,l,Kg())}async _openRedirect(e,t,i,o){await this._originValidation(e);const l=await uT(e,t,i,qp(),o);return QD(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Li(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await VN(e),i=new yN(e);return t.register("authEvent",o=>(Ne(o?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mp,{type:mp},o=>{const l=o?.[0]?.[mp];l!==void 0&&t(!!l),tr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=SN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return QA()||BA()||qg()}}const $N=GN;var cT="@firebase/auth",hT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YN(r){Ho(new Ca("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ne(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const p={apiKey:c,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:YA(r)},g=new uD(i,o,l,p);return vD(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ho(new Ca("auth-internal",e=>{const t=Bi(e.getProvider("auth").getImmediate());return(i=>new KN(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cs(cT,hT,QN(r)),Cs(cT,hT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN=300,WN=QT("authIdTokenMaxAge")||XN;let fT=null;const ZN=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>WN)return;const o=t?.token;fT!==o&&(fT=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function JN(r=eS()){const e=eg(r,"auth");if(e.isInitialized())return e.getImmediate();const t=_D(r,{popupRedirectResolver:$N,persistence:[rN,GD,sb]}),i=QT("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=ZN(l.toString());zD(t,c,()=>c(t.currentUser)),jD(t,d=>c(d))}}const o=$T("auth");return o&&ED(t,`http://${o}`),t}function eO(){return document.getElementsByTagName("head")?.[0]??document}cD({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=o=>{const l=mr("internal-error");l.customData=o,t(l)},i.type="text/javascript",i.charset="UTF-8",eO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YN("Browser");const tO={apiKey:"AIzaSyCEcMX_uaGLEjojKsUqrLk9j86gTd2Mwqw",authDomain:"zork-argento.firebaseapp.com",projectId:"zork-argento",storageBucket:"zork-argento.firebasestorage.app",messagingSenderId:"171744483732",appId:"1:171744483732:web:35fce0c41281eda805d781"},db=JT(tO),Io=JN(db),Co=dx(db),xo="adventures";class Mh{static async saveAdventure(e,t){try{const i={...e,userId:t,updatedAt:new Date().toISOString()},o=Object.keys(i).reduce((c,d)=>(i[d]!==void 0&&(c[d]=i[d]),c),{});console.log(" [saveAdventure] Creating new adventure in Firebase:",{userId:t,title:e.title,stepsCount:e.steps?.length,hasConversationId:!!e.conversationId,hasThreadId:!!e.threadId});const l=await Ox(fp(Co,"users",t,xo),o);return console.log(" [saveAdventure] Adventure created with ID:",l.id),l.id}catch(i){throw console.error("Error saving adventure:",i),new Error("Failed to save adventure")}}static async updateAdventure(e,t,i){try{const o=qh(Co,"users",i,xo,e),l={...t,updatedAt:new Date().toISOString()},c=Object.keys(l).reduce((d,p)=>(l[p]!==void 0&&(d[p]=l[p]),d),{});console.log(" [updateAdventure] Sending to Firebase:",{adventureId:e,fields:Object.keys(c),data:c}),await Dx(o,c)}catch(o){throw console.error("Error updating adventure:",o),new Error("Failed to update adventure")}}static async getAdventure(e,t){try{const i=qh(Co,"users",t,xo,e),o=await xx(i);return o.exists()?{id:o.id,...o.data()}:null}catch(i){throw console.error("Error getting adventure:",i),new Error("Failed to get adventure")}}static async getUserAdventures(e,t=10){try{const i=B0(fp(Co,"users",e,xo),q0("updatedAt","desc"),H0(t)),o=await K0(i),l=[];if(o.forEach(g=>{l.push({id:g.id,...g.data()})}),l.length>0)return l;const c=B0(fp(Co,xo),wx("userId","==",e),q0("updatedAt","desc"),H0(t)),d=await K0(c),p=[];return d.forEach(g=>{p.push({id:g.id,...g.data()})}),p}catch(i){throw console.error("Error getting user adventures:",i),new Error("Failed to get user adventures")}}static async deleteAdventure(e,t){try{const i=qh(Co,"users",t,xo,e);await Nx(i)}catch(i){throw console.error("Error deleting adventure:",i),new Error("Failed to delete adventure")}}static async saveAdventureStep(e,t,i,o,l){try{const c={steps:t.steps,state:t.state},d=o||t.conversationId,p=l||t.threadId;d&&(c.conversationId=d),p&&(c.threadId=p),console.log(" [saveAdventureStep] Preparing update:",{adventureId:e,stepsCount:t.steps.length,hasConversationId:!!d,hasThreadId:!!p,conversationId:d,threadId:p}),await this.updateAdventure(e,c,i)}catch(c){throw console.error("Error saving adventure step:",c),new Error("Failed to save adventure step")}}}const Yg=O1((r,e)=>({currentAdventure:null,currentAdventureId:null,currentUserId:null,conversationId:null,threadId:null,isLoading:!1,error:null,isSavingAdventure:!1,isSavingStep:!1,initializeAdventure:t=>{r({currentAdventure:t,currentAdventureId:null,currentUserId:null,conversationId:t.conversationId||null,threadId:t.threadId||null,isLoading:!1,error:null})},appendStep:t=>{const i=e().currentAdventure;if(!i)return;const o=[...i.steps,t],{conversationId:l,threadId:c}=e(),d={...i,steps:o,state:t.stateAfter,conversationId:l,threadId:c};r({currentAdventure:d})},resetAdventure:()=>{r({currentAdventure:null,currentAdventureId:null,currentUserId:null,conversationId:null,threadId:null,isLoading:!1,error:null})},setImageUrlForStep:(t,i)=>{const o=e().currentAdventure;if(!o)return;const l=o.steps.map(c=>c.stepId===t?{...c,imageUrl:i}:c);r({currentAdventure:{...o,steps:l}})},saveAdventure:async t=>{const{currentAdventure:i,isSavingAdventure:o}=e();if(!o){if(!i){r({error:"No adventure to save"});return}r({isLoading:!0,error:null,isSavingAdventure:!0});try{const l=await Mh.saveAdventure(i,t);r({currentAdventureId:l,currentUserId:t,isLoading:!1,isSavingAdventure:!1})}catch(l){r({error:l instanceof Error?l.message:"Failed to save adventure",isLoading:!1,isSavingAdventure:!1})}}},loadAdventure:async(t,i)=>{r({isLoading:!0,error:null});try{const o=await Mh.getAdventure(t,i);r(o?{currentAdventure:o,currentAdventureId:t,currentUserId:i,conversationId:o.conversationId||null,threadId:o.threadId||null,isLoading:!1}:{error:"Adventure not found",isLoading:!1})}catch(o){r({error:o instanceof Error?o.message:"Failed to load adventure",isLoading:!1})}},saveCurrentStep:async()=>{const{currentAdventure:t,currentAdventureId:i,currentUserId:o,conversationId:l,threadId:c,isSavingStep:d}=e();if(console.log(" [saveCurrentStep] Attempting to save step:",{hasAdventure:!!t,adventureId:i,userId:o,conversationId:l,threadId:c,stepsCount:t?.steps?.length,isSavingStep:d}),d){console.log(" [saveCurrentStep] Already saving, skipping...");return}if(!t||!i||!o){console.warn(" [saveCurrentStep] Missing required data:",{hasAdventure:!!t,hasAdventureId:!!i,hasUserId:!!o});return}try{r({isSavingStep:!0}),console.log(" [saveCurrentStep] Saving to Firebase:",{adventureId:i,userId:o,conversationId:l,threadId:c,steps:t.steps.length,lastStep:t.steps[t.steps.length-1]}),await Mh.saveAdventureStep(i,t,o,l,c),console.log(" [saveCurrentStep] Successfully saved step to Firebase"),r({isSavingStep:!1})}catch(p){console.error(" [saveCurrentStep] Error saving step:",p),r({error:p instanceof Error?p.message:"Failed to save step",isSavingStep:!1})}},getUserAdventures:async t=>{r({isLoading:!0,error:null});try{const i=await Mh.getUserAdventures(t);return r({isLoading:!1}),i}catch(i){return r({error:i instanceof Error?i.message:"Failed to get adventures",isLoading:!1}),[]}},setConversationId:t=>{r({conversationId:t});const{currentAdventure:i}=e();i&&r({currentAdventure:{...i,conversationId:t}})},setThreadId:t=>{r({threadId:t});const{currentAdventure:i}=e();i&&r({currentAdventure:{...i,threadId:t}})}}));var pp,dT;function nO(){if(dT)return pp;dT=1;function r(Q){this._maxSize=Q,this.clear()}r.prototype.clear=function(){this._size=0,this._values=Object.create(null)},r.prototype.get=function(Q){return this._values[Q]},r.prototype.set=function(Q,F){return this._size>=this._maxSize&&this.clear(),Q in this._values||this._size++,this._values[Q]=F};var e=/[^.^\]^[]+|(?=\[\]|\.\.)/g,t=/^\d+$/,i=/^\d/,o=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,l=/^\s*(['"]?)(.*?)(\1)\s*$/,c=512,d=new r(c),p=new r(c),g=new r(c);pp={Cache:r,split:T,normalizePath:_,setter:function(Q){var F=_(Q);return p.get(Q)||p.set(Q,function(_e,ae){for(var Se=0,k=F.length,I=_e;Se<k-1;){var w=F[Se];if(w==="__proto__"||w==="constructor"||w==="prototype")return _e;I=I[F[Se++]]}I[F[Se]]=ae})},getter:function(Q,F){var re=_(Q);return g.get(Q)||g.set(Q,function(ae){for(var Se=0,k=re.length;Se<k;)if(ae!=null||!F)ae=ae[re[Se++]];else return;return ae})},join:function(Q){return Q.reduce(function(F,re){return F+(V(re)||t.test(re)?"["+re+"]":(F?".":"")+re)},"")},forEach:function(Q,F,re){A(Array.isArray(Q)?Q:T(Q),F,re)}};function _(Q){return d.get(Q)||d.set(Q,T(Q).map(function(F){return F.replace(l,"$2")}))}function T(Q){return Q.match(e)||[""]}function A(Q,F,re){var _e=Q.length,ae,Se,k,I;for(Se=0;Se<_e;Se++)ae=Q[Se],ae&&(U(ae)&&(ae='"'+ae+'"'),I=V(ae),k=!I&&/^\d+$/.test(ae),F.call(re,ae,I,k,Se,Q))}function V(Q){return typeof Q=="string"&&Q&&["'",'"'].indexOf(Q.charAt(0))!==-1}function z(Q){return Q.match(i)&&!Q.match(t)}function H(Q){return o.test(Q)}function U(Q){return!V(Q)&&(z(Q)||H(Q))}return pp}var wa=nO(),gp,mT;function rO(){if(mT)return gp;mT=1;const r=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2000-\u206f \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\xc0-\xd6\xd8-\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\d*(?:1ST|2ND|3RD|(?![123])\dTH)(?=\b|[a-z_])|\d*(?:1st|2nd|3rd|(?![123])\dth)(?=\b|[A-Z_])|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe2f\u20d0-\u20ff]|\ud83c[\udffb-\udfff])?)*/g,e=_=>_.match(r)||[],t=_=>_[0].toUpperCase()+_.slice(1),i=(_,T)=>e(_).join(T).toLowerCase(),o=_=>e(_).reduce((T,A)=>`${T}${T?A[0].toUpperCase()+A.slice(1).toLowerCase():A.toLowerCase()}`,"");return gp={words:e,upperFirst:t,camelCase:o,pascalCase:_=>t(o(_)),snakeCase:_=>i(_,"_"),kebabCase:_=>i(_,"-"),sentenceCase:_=>t(i(_," ")),titleCase:_=>e(_).map(t).join(" ")},gp}var yp=rO(),kh={exports:{}},pT;function iO(){if(pT)return kh.exports;pT=1,kh.exports=function(o){return r(e(o),o)},kh.exports.array=r;function r(o,l){var c=o.length,d=new Array(c),p={},g=c,_=t(l),T=i(o);for(l.forEach(function(V){if(!T.has(V[0])||!T.has(V[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});g--;)p[g]||A(o[g],g,new Set);return d;function A(V,z,H){if(H.has(V)){var U;try{U=", node was:"+JSON.stringify(V)}catch{U=""}throw new Error("Cyclic dependency"+U)}if(!T.has(V))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(V));if(!p[z]){p[z]=!0;var Q=_.get(V)||new Set;if(Q=Array.from(Q),z=Q.length){H.add(V);do{var F=Q[--z];A(F,T.get(F),H)}while(z);H.delete(V)}d[--c]=V}}}function e(o){for(var l=new Set,c=0,d=o.length;c<d;c++){var p=o[c];l.add(p[0]),l.add(p[1])}return Array.from(l)}function t(o){for(var l=new Map,c=0,d=o.length;c<d;c++){var p=o[c];l.has(p[0])||l.set(p[0],new Set),l.has(p[1])||l.set(p[1],new Set),l.get(p[0]).add(p[1])}return l}function i(o){for(var l=new Map,c=0,d=o.length;c<d;c++)l.set(o[c],c);return l}return kh.exports}var sO=iO();const aO=zT(sO),oO=Object.prototype.toString,lO=Error.prototype.toString,uO=RegExp.prototype.toString,cO=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",hO=/^Symbol\((.*)\)(.*)$/;function fO(r){return r!=+r?"NaN":r===0&&1/r<0?"-0":""+r}function gT(r,e=!1){if(r==null||r===!0||r===!1)return""+r;const t=typeof r;if(t==="number")return fO(r);if(t==="string")return e?`"${r}"`:r;if(t==="function")return"[Function "+(r.name||"anonymous")+"]";if(t==="symbol")return cO.call(r).replace(hO,"Symbol($1)");const i=oO.call(r).slice(8,-1);return i==="Date"?isNaN(r.getTime())?""+r:r.toISOString(r):i==="Error"||r instanceof Error?"["+lO.call(r)+"]":i==="RegExp"?uO.call(r):null}function Ns(r,e){let t=gT(r,e);return t!==null?t:JSON.stringify(r,function(i,o){let l=gT(this[i],e);return l!==null?l:o},2)}function mb(r){return r==null?[]:[].concat(r)}let pb,gb,yb,dO=/\$\{\s*(\w+)\s*\}/g;pb=Symbol.toStringTag;class yT{constructor(e,t,i,o){this.name=void 0,this.message=void 0,this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=void 0,this.inner=void 0,this[pb]="Error",this.name="ValidationError",this.value=t,this.path=i,this.type=o,this.errors=[],this.inner=[],mb(e).forEach(l=>{if(fn.isError(l)){this.errors.push(...l.errors);const c=l.inner.length?l.inner:[l];this.inner.push(...c)}else this.errors.push(l)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0]}}gb=Symbol.hasInstance;yb=Symbol.toStringTag;class fn extends Error{static formatError(e,t){const i=t.label||t.path||"this";return t=Object.assign({},t,{path:i,originalPath:t.path}),typeof e=="string"?e.replace(dO,(o,l)=>Ns(t[l])):typeof e=="function"?e(t):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,t,i,o,l){const c=new yT(e,t,i,o);if(l)return c;super(),this.value=void 0,this.path=void 0,this.type=void 0,this.params=void 0,this.errors=[],this.inner=[],this[yb]="Error",this.name=c.name,this.message=c.message,this.type=c.type,this.value=c.value,this.path=c.path,this.errors=c.errors,this.inner=c.inner,Error.captureStackTrace&&Error.captureStackTrace(this,fn)}static[gb](e){return yT[Symbol.hasInstance](e)||super[Symbol.hasInstance](e)}}let Lr={default:"${path} is invalid",required:"${path} is a required field",defined:"${path} must be defined",notNull:"${path} cannot be null",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:r,type:e,value:t,originalValue:i})=>{const o=i!=null&&i!==t?` (cast from the value \`${Ns(i,!0)}\`).`:".";return e!=="mixed"?`${r} must be a \`${e}\` type, but the final value was: \`${Ns(t,!0)}\``+o:`${r} must match the configured type. The validated value was: \`${Ns(t,!0)}\``+o}},wn={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",datetime:"${path} must be a valid ISO date-time",datetime_precision:"${path} must be a valid ISO date-time with a sub-second precision of exactly ${precision} digits",datetime_offset:'${path} must be a valid ISO date-time with UTC "Z" timezone',trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},mO={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},$p={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},pO={isValue:"${path} field must be ${value}"},Yh={noUnknown:"${path} field has unspecified keys: ${unknown}",exact:"${path} object contains unknown properties: ${properties}"},gO={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must have ${length} items"},yO={notType:r=>{const{path:e,value:t,spec:i}=r,o=i.types.length;if(Array.isArray(t)){if(t.length<o)return`${e} tuple value has too few items, expected a length of ${o} but got ${t.length} for value: \`${Ns(t,!0)}\``;if(t.length>o)return`${e} tuple value has too many items, expected a length of ${o} but got ${t.length} for value: \`${Ns(t,!0)}\``}return fn.formatError(Lr.notType,r)}};Object.assign(Object.create(null),{mixed:Lr,string:wn,number:mO,date:$p,object:Yh,array:gO,boolean:pO,tuple:yO});const Xg=r=>r&&r.__isYupSchema__;class Sf{static fromOptions(e,t){if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:i,then:o,otherwise:l}=t,c=typeof i=="function"?i:(...d)=>d.every(p=>p===i);return new Sf(e,(d,p)=>{var g;let _=c(...d)?o:l;return(g=_?.(p))!=null?g:p})}constructor(e,t){this.fn=void 0,this.refs=e,this.refs=e,this.fn=t}resolve(e,t){let i=this.refs.map(l=>l.getValue(t?.value,t?.parent,t?.context)),o=this.fn(i,e,t);if(o===void 0||o===e)return e;if(!Xg(o))throw new TypeError("conditions must return a schema object");return o.resolve(t)}}const Ph={context:"$",value:"."};class ka{constructor(e,t={}){if(this.key=void 0,this.isContext=void 0,this.isValue=void 0,this.isSibling=void 0,this.path=void 0,this.getter=void 0,this.map=void 0,typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Ph.context,this.isValue=this.key[0]===Ph.value,this.isSibling=!this.isContext&&!this.isValue;let i=this.isContext?Ph.context:this.isValue?Ph.value:"";this.path=this.key.slice(i.length),this.getter=this.path&&wa.getter(this.path,!0),this.map=t.map}getValue(e,t,i){let o=this.isContext?i:this.isValue?e:t;return this.getter&&(o=this.getter(o||{})),this.map&&(o=this.map(o)),o}cast(e,t){return this.getValue(e,t?.parent,t?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}ka.prototype.__isYupRef=!0;const Sa=r=>r==null;function Do(r){function e({value:t,path:i="",options:o,originalValue:l,schema:c},d,p){const{name:g,test:_,params:T,message:A,skipAbsent:V}=r;let{parent:z,context:H,abortEarly:U=c.spec.abortEarly,disableStackTrace:Q=c.spec.disableStackTrace}=o;const F={value:t,parent:z,context:H};function re(x={}){const D=_b(Object.assign({value:t,originalValue:l,label:c.spec.label,path:x.path||i,spec:c.spec,disableStackTrace:x.disableStackTrace||Q},T,x.params),F),R=new fn(fn.formatError(x.message||A,D),t,D.path,x.type||g,D.disableStackTrace);return R.params=D,R}const _e=U?d:p;let ae={path:i,parent:z,type:g,from:o.from,createError:re,resolve(x){return vb(x,F)},options:o,originalValue:l,schema:c};const Se=x=>{fn.isError(x)?_e(x):x?p(null):_e(re())},k=x=>{fn.isError(x)?_e(x):d(x)};if(V&&Sa(t))return Se(!0);let w;try{var O;if(w=_.call(ae,t,ae),typeof((O=w)==null?void 0:O.then)=="function"){if(o.sync)throw new Error(`Validation test of type: "${ae.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`);return Promise.resolve(w).then(Se,k)}}catch(x){k(x);return}Se(w)}return e.OPTIONS=r,e}function _b(r,e){if(!r)return r;for(const t of Object.keys(r))r[t]=vb(r[t],e);return r}function vb(r,e){return ka.isRef(r)?r.getValue(e.value,e.parent,e.context):r}function _O(r,e,t,i=t){let o,l,c;return e?(wa.forEach(e,(d,p,g)=>{let _=p?d.slice(1,d.length-1):d;r=r.resolve({context:i,parent:o,value:t});let T=r.type==="tuple",A=g?parseInt(_,10):0;if(r.innerType||T){if(T&&!g)throw new Error(`Yup.reach cannot implicitly index into a tuple type. the path part "${c}" must contain an index to the tuple element, e.g. "${c}[0]"`);if(t&&A>=t.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${d}, in the path: ${e}. because there is no value at that index. `);o=t,t=t&&t[A],r=T?r.spec.types[A]:r.innerType}if(!g){if(!r.fields||!r.fields[_])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${c} which is a type: "${r.type}")`);o=t,t=t&&t[_],r=r.fields[_]}l=_,c=p?"["+d+"]":"."+d}),{schema:r,parent:o,parentPath:l}):{parent:o,parentPath:e,schema:r}}class Af extends Set{describe(){const e=[];for(const t of this.values())e.push(ka.isRef(t)?t.describe():t);return e}resolveAll(e){let t=[];for(const i of this.values())t.push(e(i));return t}clone(){return new Af(this.values())}merge(e,t){const i=this.clone();return e.forEach(o=>i.add(o)),t.forEach(o=>i.delete(o)),i}}function Lo(r,e=new Map){if(Xg(r)||!r||typeof r!="object")return r;if(e.has(r))return e.get(r);let t;if(r instanceof Date)t=new Date(r.getTime()),e.set(r,t);else if(r instanceof RegExp)t=new RegExp(r),e.set(r,t);else if(Array.isArray(r)){t=new Array(r.length),e.set(r,t);for(let i=0;i<r.length;i++)t[i]=Lo(r[i],e)}else if(r instanceof Map){t=new Map,e.set(r,t);for(const[i,o]of r.entries())t.set(i,Lo(o,e))}else if(r instanceof Set){t=new Set,e.set(r,t);for(const i of r)t.add(Lo(i,e))}else if(r instanceof Object){t={},e.set(r,t);for(const[i,o]of Object.entries(r))t[i]=Lo(o,e)}else throw Error(`Unable to clone ${r}`);return t}function vO(r){if(!(r!=null&&r.length))return;const e=[];let t="",i=!1,o=!1;for(let l=0;l<r.length;l++){const c=r[l];if(c==="["&&!o){t&&(e.push(...t.split(".").filter(Boolean)),t=""),i=!0;continue}if(c==="]"&&!o){t&&(/^\d+$/.test(t)?e.push(t):e.push(t.replace(/^"|"$/g,"")),t=""),i=!1;continue}if(c==='"'){o=!o;continue}if(c==="."&&!i&&!o){t&&(e.push(t),t="");continue}t+=c}return t&&e.push(...t.split(".").filter(Boolean)),e}function EO(r,e){const t=e?`${e}.${r.path}`:r.path;return r.errors.map(i=>({message:i,path:vO(t)}))}function Eb(r,e){var t;if(!((t=r.inner)!=null&&t.length)&&r.errors.length)return EO(r,e);const i=e?`${e}.${r.path}`:r.path;return r.inner.flatMap(o=>Eb(o,i))}class $r{constructor(e){this.type=void 0,this.deps=[],this.tests=void 0,this.transforms=void 0,this.conditions=[],this._mutate=void 0,this.internalTests={},this._whitelist=new Af,this._blacklist=new Af,this.exclusiveTests=Object.create(null),this._typeCheck=void 0,this.spec=void 0,this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Lr.notType)}),this.type=e.type,this._typeCheck=e.check,this.spec=Object.assign({strip:!1,strict:!1,abortEarly:!0,recursive:!0,disableStackTrace:!1,nullable:!1,optional:!0,coerce:!0},e?.spec),this.withMutation(t=>{t.nonNullable()})}get _type(){return this.type}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeCheck=this._typeCheck,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.internalTests=Object.assign({},this.internalTests),t.exclusiveTests=Object.assign({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=Lo(Object.assign({},this.spec,e)),t}label(e){let t=this.clone();return t.spec.label=e,t}meta(...e){if(e.length===0)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let i=e(this);return this._mutate=t,i}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,i=e.clone();const o=Object.assign({},t.spec,i.spec);return i.spec=o,i.internalTests=Object.assign({},t.internalTests,i.internalTests),i._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),i._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),i.tests=t.tests,i.exclusiveTests=t.exclusiveTests,i.withMutation(l=>{e.tests.forEach(c=>{l.test(c.OPTIONS)})}),i.transforms=[...t.transforms,...i.transforms],i}isType(e){return e==null?!!(this.spec.nullable&&e===null||this.spec.optional&&e===void 0):this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let i=t.conditions;t=t.clone(),t.conditions=[],t=i.reduce((o,l)=>l.resolve(o,e),t),t=t.resolve(e)}return t}resolveOptions(e){var t,i,o,l;return Object.assign({},e,{from:e.from||[],strict:(t=e.strict)!=null?t:this.spec.strict,abortEarly:(i=e.abortEarly)!=null?i:this.spec.abortEarly,recursive:(o=e.recursive)!=null?o:this.spec.recursive,disableStackTrace:(l=e.disableStackTrace)!=null?l:this.spec.disableStackTrace})}cast(e,t={}){let i=this.resolve(Object.assign({value:e},t)),o=t.assert==="ignore-optionality",l=i._cast(e,t);if(t.assert!==!1&&!i.isType(l)){if(o&&Sa(l))return l;let c=Ns(e),d=Ns(l);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${i.type}". 

attempted value: ${c} 
`+(d!==c?`result of cast: ${d}`:""))}return l}_cast(e,t){let i=e===void 0?e:this.transforms.reduce((o,l)=>l.call(this,o,e,this),e);return i===void 0&&(i=this.getDefault(t)),i}_validate(e,t={},i,o){let{path:l,originalValue:c=e,strict:d=this.spec.strict}=t,p=e;d||(p=this._cast(p,Object.assign({assert:!1},t)));let g=[];for(let _ of Object.values(this.internalTests))_&&g.push(_);this.runTests({path:l,value:p,originalValue:c,options:t,tests:g},i,_=>{if(_.length)return o(_,p);this.runTests({path:l,value:p,originalValue:c,options:t,tests:this.tests},i,o)})}runTests(e,t,i){let o=!1,{tests:l,value:c,originalValue:d,path:p,options:g}=e,_=H=>{o||(o=!0,t(H,c))},T=H=>{o||(o=!0,i(H,c))},A=l.length,V=[];if(!A)return T([]);let z={value:c,originalValue:d,path:p,options:g,schema:this};for(let H=0;H<l.length;H++){const U=l[H];U(z,_,function(F){F&&(Array.isArray(F)?V.push(...F):V.push(F)),--A<=0&&T(V)})}}asNestedTest({key:e,index:t,parent:i,parentPath:o,originalParent:l,options:c}){const d=e??t;if(d==null)throw TypeError("Must include `key` or `index` for nested validations");const p=typeof d=="number";let g=i[d];const _=Object.assign({},c,{strict:!0,parent:i,value:g,originalValue:l[d],key:void 0,[p?"index":"key"]:d,path:p||d.includes(".")?`${o||""}[${p?d:`"${d}"`}]`:(o?`${o}.`:"")+e});return(T,A,V)=>this.resolve(_)._validate(g,_,A,V)}validate(e,t){var i;let o=this.resolve(Object.assign({},t,{value:e})),l=(i=t?.disableStackTrace)!=null?i:o.spec.disableStackTrace;return new Promise((c,d)=>o._validate(e,t,(p,g)=>{fn.isError(p)&&(p.value=g),d(p)},(p,g)=>{p.length?d(new fn(p,g,void 0,void 0,l)):c(g)}))}validateSync(e,t){var i;let o=this.resolve(Object.assign({},t,{value:e})),l,c=(i=t?.disableStackTrace)!=null?i:o.spec.disableStackTrace;return o._validate(e,Object.assign({},t,{sync:!0}),(d,p)=>{throw fn.isError(d)&&(d.value=p),d},(d,p)=>{if(d.length)throw new fn(d,e,void 0,void 0,c);l=p}),l}isValid(e,t){return this.validate(e,t).then(()=>!0,i=>{if(fn.isError(i))return!1;throw i})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(i){if(fn.isError(i))return!1;throw i}}_getDefault(e){let t=this.spec.default;return t==null?t:typeof t=="function"?t.call(this,e):Lo(t)}getDefault(e){return this.resolve(e||{})._getDefault(e)}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){return this.clone({strict:e})}nullability(e,t){const i=this.clone({nullable:e});return i.internalTests.nullable=Do({message:t,name:"nullable",test(o){return o===null?this.schema.spec.nullable:!0}}),i}optionality(e,t){const i=this.clone({optional:e});return i.internalTests.optionality=Do({message:t,name:"optionality",test(o){return o===void 0?this.schema.spec.optional:!0}}),i}optional(){return this.optionality(!0)}defined(e=Lr.defined){return this.optionality(!1,e)}nullable(){return this.nullability(!0)}nonNullable(e=Lr.notNull){return this.nullability(!1,e)}required(e=Lr.required){return this.clone().withMutation(t=>t.nonNullable(e).defined(e))}notRequired(){return this.clone().withMutation(e=>e.nullable().optional())}transform(e){let t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(e.length===1?typeof e[0]=="function"?t={test:e[0]}:t=e[0]:e.length===2?t={name:e[0],test:e[1]}:t={name:e[0],message:e[1],test:e[2]},t.message===void 0&&(t.message=Lr.default),typeof t.test!="function")throw new TypeError("`test` is a required parameters");let i=this.clone(),o=Do(t),l=t.exclusive||t.name&&i.exclusiveTests[t.name]===!0;if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(i.exclusiveTests[t.name]=!!t.exclusive),i.tests=i.tests.filter(c=>!(c.OPTIONS.name===t.name&&(l||c.OPTIONS.test===o.OPTIONS.test))),i.tests.push(o),i}when(e,t){!Array.isArray(e)&&typeof e!="string"&&(t=e,e=".");let i=this.clone(),o=mb(e).map(l=>new ka(l));return o.forEach(l=>{l.isSibling&&i.deps.push(l.key)}),i.conditions.push(typeof t=="function"?new Sf(o,t):Sf.fromOptions(o,t)),i}typeError(e){let t=this.clone();return t.internalTests.typeError=Do({message:e,name:"typeError",skipAbsent:!0,test(i){return this.schema._typeCheck(i)?!0:this.createError({params:{type:this.schema.type}})}}),t}oneOf(e,t=Lr.oneOf){let i=this.clone();return e.forEach(o=>{i._whitelist.add(o),i._blacklist.delete(o)}),i.internalTests.whiteList=Do({message:t,name:"oneOf",skipAbsent:!0,test(o){let l=this.schema._whitelist,c=l.resolveAll(this.resolve);return c.includes(o)?!0:this.createError({params:{values:Array.from(l).join(", "),resolved:c}})}}),i}notOneOf(e,t=Lr.notOneOf){let i=this.clone();return e.forEach(o=>{i._blacklist.add(o),i._whitelist.delete(o)}),i.internalTests.blacklist=Do({message:t,name:"notOneOf",test(o){let l=this.schema._blacklist,c=l.resolveAll(this.resolve);return c.includes(o)?this.createError({params:{values:Array.from(l).join(", "),resolved:c}}):!0}}),i}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(e){const t=(e?this.resolve(e):this).clone(),{label:i,meta:o,optional:l,nullable:c}=t.spec;return{meta:o,label:i,optional:l,nullable:c,default:t.getDefault(e),type:t.type,oneOf:t._whitelist.describe(),notOneOf:t._blacklist.describe(),tests:t.tests.filter((p,g,_)=>_.findIndex(T=>T.OPTIONS.name===p.OPTIONS.name)===g).map(p=>{const g=p.OPTIONS.params&&e?_b(Object.assign({},p.OPTIONS.params),e):p.OPTIONS.params;return{name:p.OPTIONS.name,params:g}})}}get"~standard"(){const e=this;return{version:1,vendor:"yup",async validate(i){try{return{value:await e.validate(i,{abortEarly:!1})}}catch(o){if(o instanceof fn)return{issues:Eb(o)};throw o}}}}}$r.prototype.__isYupSchema__=!0;for(const r of["validate","validateSync"])$r.prototype[`${r}At`]=function(e,t,i={}){const{parent:o,parentPath:l,schema:c}=_O(this,e,t,i.context);return c[r](o&&o[l],Object.assign({},i,{parent:o,path:e}))};for(const r of["equals","is"])$r.prototype[r]=$r.prototype.oneOf;for(const r of["not","nope"])$r.prototype[r]=$r.prototype.notOneOf;const TO=/^(\d{4}|[+-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,.](\d{1,}))?)?(?:(Z)|([+-])(\d{2})(?::?(\d{2}))?)?)?$/;function SO(r){const e=Kp(r);if(!e)return Date.parse?Date.parse(r):Number.NaN;if(e.z===void 0&&e.plusMinus===void 0)return new Date(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond).valueOf();let t=0;return e.z!=="Z"&&e.plusMinus!==void 0&&(t=e.hourOffset*60+e.minuteOffset,e.plusMinus==="+"&&(t=0-t)),Date.UTC(e.year,e.month,e.day,e.hour,e.minute+t,e.second,e.millisecond)}function Kp(r){var e,t;const i=TO.exec(r);return i?{year:bi(i[1]),month:bi(i[2],1)-1,day:bi(i[3],1),hour:bi(i[4]),minute:bi(i[5]),second:bi(i[6]),millisecond:i[7]?bi(i[7].substring(0,3)):0,precision:(e=(t=i[7])==null?void 0:t.length)!=null?e:void 0,z:i[8]||void 0,plusMinus:i[9]||void 0,hourOffset:bi(i[10]),minuteOffset:bi(i[11])}:null}function bi(r,e=0){return Number(r)||e}let AO=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,bO=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,wO=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,RO="^\\d{4}-\\d{2}-\\d{2}",IO="\\d{2}:\\d{2}:\\d{2}",CO="(([+-]\\d{2}(:?\\d{2})?)|Z)",xO=new RegExp(`${RO}T${IO}(\\.\\d+)?${CO}$`),DO=r=>Sa(r)||r===r.trim(),NO={}.toString();function Ra(){return new Tb}class Tb extends $r{constructor(){super({type:"string",check(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}}),this.withMutation(()=>{this.transform((e,t,i)=>{if(!i.spec.coerce||i.isType(e)||Array.isArray(e))return e;const o=e!=null&&e.toString?e.toString():e;return o===NO?e:o})})}required(e){return super.required(e).withMutation(t=>t.test({message:e||Lr.required,name:"required",skipAbsent:!0,test:i=>!!i.length}))}notRequired(){return super.notRequired().withMutation(e=>(e.tests=e.tests.filter(t=>t.OPTIONS.name!=="required"),e))}length(e,t=wn.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},skipAbsent:!0,test(i){return i.length===this.resolve(e)}})}min(e,t=wn.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(i){return i.length>=this.resolve(e)}})}max(e,t=wn.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},skipAbsent:!0,test(i){return i.length<=this.resolve(e)}})}matches(e,t){let i=!1,o,l;return t&&(typeof t=="object"?{excludeEmptyString:i=!1,message:o,name:l}=t:o=t),this.test({name:l||"matches",message:o||wn.matches,params:{regex:e},skipAbsent:!0,test:c=>c===""&&i||c.search(e)!==-1})}email(e=wn.email){return this.matches(AO,{name:"email",message:e,excludeEmptyString:!0})}url(e=wn.url){return this.matches(bO,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=wn.uuid){return this.matches(wO,{name:"uuid",message:e,excludeEmptyString:!1})}datetime(e){let t="",i,o;return e&&(typeof e=="object"?{message:t="",allowOffset:i=!1,precision:o=void 0}=e:t=e),this.matches(xO,{name:"datetime",message:t||wn.datetime,excludeEmptyString:!0}).test({name:"datetime_offset",message:t||wn.datetime_offset,params:{allowOffset:i},skipAbsent:!0,test:l=>{if(!l||i)return!0;const c=Kp(l);return c?!!c.z:!1}}).test({name:"datetime_precision",message:t||wn.datetime_precision,params:{precision:o},skipAbsent:!0,test:l=>{if(!l||o==null)return!0;const c=Kp(l);return c?c.precision===o:!1}})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=wn.trim){return this.transform(t=>t!=null?t.trim():t).test({message:e,name:"trim",test:DO})}lowercase(e=wn.lowercase){return this.transform(t=>Sa(t)?t:t.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>Sa(t)||t===t.toLowerCase()})}uppercase(e=wn.uppercase){return this.transform(t=>Sa(t)?t:t.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,skipAbsent:!0,test:t=>Sa(t)||t===t.toUpperCase()})}}Ra.prototype=Tb.prototype;let OO=new Date(""),VO=r=>Object.prototype.toString.call(r)==="[object Date]";class Wg extends $r{constructor(){super({type:"date",check(e){return VO(e)&&!isNaN(e.getTime())}}),this.withMutation(()=>{this.transform((e,t,i)=>!i.spec.coerce||i.isType(e)||e===null?e:(e=SO(e),isNaN(e)?Wg.INVALID_DATE:new Date(e)))})}prepareParam(e,t){let i;if(ka.isRef(e))i=e;else{let o=this.cast(e);if(!this._typeCheck(o))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);i=o}return i}min(e,t=$p.min){let i=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},skipAbsent:!0,test(o){return o>=this.resolve(i)}})}max(e,t=$p.max){let i=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},skipAbsent:!0,test(o){return o<=this.resolve(i)}})}}Wg.INVALID_DATE=OO;function MO(r,e=[]){let t=[],i=new Set,o=new Set(e.map(([c,d])=>`${c}-${d}`));function l(c,d){let p=wa.split(c)[0];i.add(p),o.has(`${d}-${p}`)||t.push([d,p])}for(const c of Object.keys(r)){let d=r[c];i.add(c),ka.isRef(d)&&d.isSibling?l(d.path,c):Xg(d)&&"deps"in d&&d.deps.forEach(p=>l(p,c))}return aO.array(Array.from(i),t).reverse()}function _T(r,e){let t=1/0;return r.some((i,o)=>{var l;if((l=e.path)!=null&&l.includes(i))return t=o,!0}),t}function Sb(r){return(e,t)=>_T(r,e)-_T(r,t)}const kO=(r,e,t)=>{if(typeof r!="string")return r;let i=r;try{i=JSON.parse(r)}catch{}return t.isType(i)?i:r};function Xh(r){if("fields"in r){const e={};for(const[t,i]of Object.entries(r.fields))e[t]=Xh(i);return r.setFields(e)}if(r.type==="array"){const e=r.optional();return e.innerType&&(e.innerType=Xh(e.innerType)),e}return r.type==="tuple"?r.optional().clone({types:r.spec.types.map(Xh)}):"optional"in r?r.optional():r}const PO=(r,e)=>{const t=[...wa.normalizePath(e)];if(t.length===1)return t[0]in r;let i=t.pop(),o=wa.getter(wa.join(t),!0)(r);return!!(o&&i in o)};let vT=r=>Object.prototype.toString.call(r)==="[object Object]";function ET(r,e){let t=Object.keys(r.fields);return Object.keys(e).filter(i=>t.indexOf(i)===-1)}const LO=Sb([]);function Yf(r){return new Ab(r)}class Ab extends $r{constructor(e){super({type:"object",check(t){return vT(t)||typeof t=="function"}}),this.fields=Object.create(null),this._sortErrors=LO,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{e&&this.shape(e)})}_cast(e,t={}){var i;let o=super._cast(e,t);if(o===void 0)return this.getDefault(t);if(!this._typeCheck(o))return o;let l=this.fields,c=(i=t.stripUnknown)!=null?i:this.spec.noUnknown,d=[].concat(this._nodes,Object.keys(o).filter(T=>!this._nodes.includes(T))),p={},g=Object.assign({},t,{parent:p,__validating:t.__validating||!1}),_=!1;for(const T of d){let A=l[T],V=T in o;if(A){let z,H=o[T];g.path=(t.path?`${t.path}.`:"")+T,A=A.resolve({value:H,context:t.context,parent:p});let U=A instanceof $r?A.spec:void 0,Q=U?.strict;if(U!=null&&U.strip){_=_||T in o;continue}z=!t.__validating||!Q?A.cast(o[T],g):o[T],z!==void 0&&(p[T]=z)}else V&&!c&&(p[T]=o[T]);(V!==T in p||p[T]!==o[T])&&(_=!0)}return _?p:o}_validate(e,t={},i,o){let{from:l=[],originalValue:c=e,recursive:d=this.spec.recursive}=t;t.from=[{schema:this,value:c},...l],t.__validating=!0,t.originalValue=c,super._validate(e,t,i,(p,g)=>{if(!d||!vT(g)){o(p,g);return}c=c||g;let _=[];for(let T of this._nodes){let A=this.fields[T];!A||ka.isRef(A)||_.push(A.asNestedTest({options:t,key:T,parent:g,parentPath:t.path,originalParent:c}))}this.runTests({tests:_,value:g,originalValue:c,options:t},i,T=>{o(T.sort(this._sortErrors).concat(p),g)})})}clone(e){const t=super.clone(e);return t.fields=Object.assign({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),i=t.fields;for(let[o,l]of Object.entries(this.fields)){const c=i[o];i[o]=c===void 0?l:c}return t.withMutation(o=>o.setFields(i,[...this._excludedEdges,...e._excludedEdges]))}_getDefault(e){if("default"in this.spec)return super._getDefault(e);if(!this._nodes.length)return;let t={};return this._nodes.forEach(i=>{var o;const l=this.fields[i];let c=e;(o=c)!=null&&o.value&&(c=Object.assign({},c,{parent:c.value,value:c.value[i]})),t[i]=l&&"getDefault"in l?l.getDefault(c):void 0}),t}setFields(e,t){let i=this.clone();return i.fields=e,i._nodes=MO(e,t),i._sortErrors=Sb(Object.keys(e)),t&&(i._excludedEdges=t),i}shape(e,t=[]){return this.clone().withMutation(i=>{let o=i._excludedEdges;return t.length&&(Array.isArray(t[0])||(t=[t]),o=[...i._excludedEdges,...t]),i.setFields(Object.assign(i.fields,e),o)})}partial(){const e={};for(const[t,i]of Object.entries(this.fields))e[t]="optional"in i&&i.optional instanceof Function?i.optional():i;return this.setFields(e)}deepPartial(){return Xh(this)}pick(e){const t={};for(const i of e)this.fields[i]&&(t[i]=this.fields[i]);return this.setFields(t,this._excludedEdges.filter(([i,o])=>e.includes(i)&&e.includes(o)))}omit(e){const t=[];for(const i of Object.keys(this.fields))e.includes(i)||t.push(i);return this.pick(t)}from(e,t,i){let o=wa.getter(e,!0);return this.transform(l=>{if(!l)return l;let c=l;return PO(l,e)&&(c=Object.assign({},l),i||delete c[e],c[t]=o(l)),c})}json(){return this.transform(kO)}exact(e){return this.test({name:"exact",exclusive:!0,message:e||Yh.exact,test(t){if(t==null)return!0;const i=ET(this.schema,t);return i.length===0||this.createError({params:{properties:i.join(", ")}})}})}stripUnknown(){return this.clone({noUnknown:!0})}noUnknown(e=!0,t=Yh.noUnknown){typeof e!="boolean"&&(t=e,e=!0);let i=this.test({name:"noUnknown",exclusive:!0,message:t,test(o){if(o==null)return!0;const l=ET(this.schema,o);return!e||l.length===0||this.createError({params:{unknown:l.join(", ")}})}});return i.spec.noUnknown=e,i}unknown(e=!0,t=Yh.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>{if(!t)return t;const i={};for(const o of Object.keys(t))i[e(o)]=t[o];return i})}camelCase(){return this.transformKeys(yp.camelCase)}snakeCase(){return this.transformKeys(yp.snakeCase)}constantCase(){return this.transformKeys(e=>yp.snakeCase(e).toUpperCase())}describe(e){const t=(e?this.resolve(e):this).clone(),i=super.describe(e);i.fields={};for(const[l,c]of Object.entries(t.fields)){var o;let d=e;(o=d)!=null&&o.value&&(d=Object.assign({},d,{parent:d.value,value:d.value[l]})),i.fields[l]=c.describe(d)}return i}}Yf.prototype=Ab.prototype;const bb=Z.createContext(void 0),UO=()=>{const r=Z.useContext(bb);if(r===void 0)throw new Error("useAuthContext must be used within an AuthProvider");return r},jO=r=>({id:r.uid,email:r.email||"",name:r.displayName||r.email?.split("@")[0]||"User",photoURL:r.photoURL||void 0}),zO=({children:r})=>{const[e,t]=Z.useState({user:null,isAuthenticated:!1,isLoading:!0});Z.useEffect(()=>{const g=FD(Io,_=>{t(_?{user:jO(_),isAuthenticated:!0,isLoading:!1}:{user:null,isAuthenticated:!1,isLoading:!1})});return()=>g()},[]);const i=(g,_)=>{const T=new fn(_);return T.path=g,T},p={...e,login:async g=>{try{return t(_=>({..._,isLoading:!0})),await UD(Io,g.email,g.password),{success:!0}}catch{throw t(T=>({...T,isLoading:!1})),i("password","Che, esas credenciales no estn bien. Fijate el email y la contrasea")}},signup:async g=>{try{return t(_=>({..._,isLoading:!0})),await LD(Io,g.email,g.password),{success:!0}}catch(_){t(A=>({...A,isLoading:!1}));let T;switch(_.code){case"auth/email-already-in-use":T=i("email","Che, ya hay una cuenta con ese email");break;case"auth/invalid-email":T=i("email","Ese email no parece vlido, eh");break;case"auth/weak-password":T=i("password","La contrasea est muy dbil. Tiene que tener al menos 6 caracteres");break;case"auth/operation-not-allowed":T=i("email","El registro con email no est habilitado");break;case"auth/network-request-failed":T=i("email","Error de conexin. Fijate tu internet, che");break;default:T=i("email","Error al crear la cuenta. Prob de nuevo, dale")}throw T}},logout:async()=>{try{await BD(Io)}catch(g){console.error("Logout error:",g)}},resetPassword:async g=>{try{return t(_=>({..._,isLoading:!0})),await PD(Io,g),t(_=>({..._,isLoading:!1})),{success:!0}}catch(_){t(A=>({...A,isLoading:!1}));let T;switch(_.code){case"auth/invalid-email":T=i("email","Ese email no parece vlido, eh");break;case"auth/user-not-found":T=i("email","Si existe, te mandamos un correo para resetear");break;case"auth/too-many-requests":T=i("email","Demasiados intentos. Prob ms tarde");break;case"auth/network-request-failed":T=i("email","Error de conexin. Fijate tu internet, che");break;default:T=i("email","No pudimos enviar el correo. Prob de nuevo")}throw T}},loginWithGoogle:async()=>{try{t(_=>({..._,isLoading:!0}));const g=new Ri;return await lN(Io,g),t(_=>({..._,isLoading:!1})),{success:!0}}catch(g){t(T=>({...T,isLoading:!1}));let _;switch(g.code){case"auth/popup-blocked":_=i("email","El popup fue bloqueado. Permitilo y prob de nuevo");break;case"auth/popup-closed-by-user":_=i("email","Cerraste el popup. Intent de nuevo");break;case"auth/cancelled-popup-request":_=i("email","Se cancel el popup. Prob otra vez");break;case"auth/network-request-failed":_=i("email","Error de conexin. Fijate tu internet, che");break;default:_=i("email","No pudimos iniciar con Google. Prob de nuevo")}throw _}}};return L.jsx(bb.Provider,{value:p,children:r})},Fs=()=>UO();var rc=r=>r.type==="checkbox",Aa=r=>r instanceof Date,vn=r=>r==null;const wb=r=>typeof r=="object";var It=r=>!vn(r)&&!Array.isArray(r)&&wb(r)&&!Aa(r),FO=r=>It(r)&&r.target?rc(r.target)?r.target.checked:r.target.value:r,BO=r=>r.substring(0,r.search(/\.\d+(\.|$)/))||r,qO=(r,e)=>r.has(BO(e)),HO=r=>{const e=r.constructor&&r.constructor.prototype;return It(e)&&e.hasOwnProperty("isPrototypeOf")},Zg=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Yt(r){let e;const t=Array.isArray(r),i=typeof FileList<"u"?r instanceof FileList:!1;if(r instanceof Date)e=new Date(r);else if(!(Zg&&(r instanceof Blob||i))&&(t||It(r)))if(e=t?[]:Object.create(Object.getPrototypeOf(r)),!t&&!HO(r))e=r;else for(const o in r)r.hasOwnProperty(o)&&(e[o]=Yt(r[o]));else return r;return e}var Xf=r=>/^\w*$/.test(r),Mt=r=>r===void 0,Jg=r=>Array.isArray(r)?r.filter(Boolean):[],ey=r=>Jg(r.replace(/["|']|\]/g,"").split(/\.|\[/)),Ee=(r,e,t)=>{if(!e||!It(r))return t;const i=(Xf(e)?[e]:ey(e)).reduce((o,l)=>vn(o)?o:o[l],r);return Mt(i)||i===r?Mt(r[e])?t:r[e]:i},Ur=r=>typeof r=="boolean",ht=(r,e,t)=>{let i=-1;const o=Xf(e)?[e]:ey(e),l=o.length,c=l-1;for(;++i<l;){const d=o[i];let p=t;if(i!==c){const g=r[d];p=It(g)||Array.isArray(g)?g:isNaN(+o[i+1])?{}:[]}if(d==="__proto__"||d==="constructor"||d==="prototype")return;r[d]=p,r=r[d]}};const TT={BLUR:"blur",FOCUS_OUT:"focusout"},cr={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},wi={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},GO=rn.createContext(null);GO.displayName="HookFormContext";var $O=(r,e,t,i=!0)=>{const o={defaultValues:e._defaultValues};for(const l in r)Object.defineProperty(o,l,{get:()=>{const c=l;return e._proxyFormState[c]!==cr.all&&(e._proxyFormState[c]=!i||cr.all),r[c]}});return o};const KO=typeof window<"u"?rn.useLayoutEffect:rn.useEffect;var jr=r=>typeof r=="string",QO=(r,e,t,i,o)=>jr(r)?(i&&e.watch.add(r),Ee(t,r,o)):Array.isArray(r)?r.map(l=>(i&&e.watch.add(l),Ee(t,l))):(i&&(e.watchAll=!0),t),Qp=r=>vn(r)||!wb(r);function bs(r,e,t=new WeakSet){if(Qp(r)||Qp(e))return r===e;if(Aa(r)&&Aa(e))return r.getTime()===e.getTime();const i=Object.keys(r),o=Object.keys(e);if(i.length!==o.length)return!1;if(t.has(r)||t.has(e))return!0;t.add(r),t.add(e);for(const l of i){const c=r[l];if(!o.includes(l))return!1;if(l!=="ref"){const d=e[l];if(Aa(c)&&Aa(d)||It(c)&&It(d)||Array.isArray(c)&&Array.isArray(d)?!bs(c,d,t):c!==d)return!1}}return!0}var Rb=(r,e,t,i,o)=>e?{...t[r],types:{...t[r]&&t[r].types?t[r].types:{},[i]:o||!0}}:{},Ou=r=>Array.isArray(r)?r:[r],ST=()=>{let r=[];return{get observers(){return r},next:o=>{for(const l of r)l.next&&l.next(o)},subscribe:o=>(r.push(o),{unsubscribe:()=>{r=r.filter(l=>l!==o)}}),unsubscribe:()=>{r=[]}}},Rn=r=>It(r)&&!Object.keys(r).length,ty=r=>r.type==="file",hr=r=>typeof r=="function",bf=r=>{if(!Zg)return!1;const e=r?r.ownerDocument:0;return r instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Ib=r=>r.type==="select-multiple",ny=r=>r.type==="radio",YO=r=>ny(r)||rc(r),_p=r=>bf(r)&&r.isConnected;function XO(r,e){const t=e.slice(0,-1).length;let i=0;for(;i<t;)r=Mt(r)?i++:r[e[i++]];return r}function WO(r){for(const e in r)if(r.hasOwnProperty(e)&&!Mt(r[e]))return!1;return!0}function Ot(r,e){const t=Array.isArray(e)?e:Xf(e)?[e]:ey(e),i=t.length===1?r:XO(r,t),o=t.length-1,l=t[o];return i&&delete i[l],o!==0&&(It(i)&&Rn(i)||Array.isArray(i)&&WO(i))&&Ot(r,t.slice(0,-1)),r}var Cb=r=>{for(const e in r)if(hr(r[e]))return!0;return!1};function wf(r,e={}){const t=Array.isArray(r);if(It(r)||t)for(const i in r)Array.isArray(r[i])||It(r[i])&&!Cb(r[i])?(e[i]=Array.isArray(r[i])?[]:{},wf(r[i],e[i])):vn(r[i])||(e[i]=!0);return e}function xb(r,e,t){const i=Array.isArray(r);if(It(r)||i)for(const o in r)Array.isArray(r[o])||It(r[o])&&!Cb(r[o])?Mt(e)||Qp(t[o])?t[o]=Array.isArray(r[o])?wf(r[o],[]):{...wf(r[o])}:xb(r[o],vn(e)?{}:e[o],t[o]):t[o]=!bs(r[o],e[o]);return t}var yu=(r,e)=>xb(r,e,wf(e));const AT={value:!1,isValid:!1},bT={value:!0,isValid:!0};var Db=r=>{if(Array.isArray(r)){if(r.length>1){const e=r.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:e,isValid:!!e.length}}return r[0].checked&&!r[0].disabled?r[0].attributes&&!Mt(r[0].attributes.value)?Mt(r[0].value)||r[0].value===""?bT:{value:r[0].value,isValid:!0}:bT:AT}return AT},Nb=(r,{valueAsNumber:e,valueAsDate:t,setValueAs:i})=>Mt(r)?r:e?r===""?NaN:r&&+r:t&&jr(r)?new Date(r):i?i(r):r;const wT={isValid:!1,value:null};var Ob=r=>Array.isArray(r)?r.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,wT):wT;function RT(r){const e=r.ref;return ty(e)?e.files:ny(e)?Ob(r.refs).value:Ib(e)?[...e.selectedOptions].map(({value:t})=>t):rc(e)?Db(r.refs).value:Nb(Mt(e.value)?r.ref.value:e.value,r)}var ZO=(r,e,t,i)=>{const o={};for(const l of r){const c=Ee(e,l);c&&ht(o,l,c._f)}return{criteriaMode:t,names:[...r],fields:o,shouldUseNativeValidation:i}},Rf=r=>r instanceof RegExp,_u=r=>Mt(r)?r:Rf(r)?r.source:It(r)?Rf(r.value)?r.value.source:r.value:r,IT=r=>({isOnSubmit:!r||r===cr.onSubmit,isOnBlur:r===cr.onBlur,isOnChange:r===cr.onChange,isOnAll:r===cr.all,isOnTouch:r===cr.onTouched});const CT="AsyncFunction";var JO=r=>!!r&&!!r.validate&&!!(hr(r.validate)&&r.validate.constructor.name===CT||It(r.validate)&&Object.values(r.validate).find(e=>e.constructor.name===CT)),eV=r=>r.mount&&(r.required||r.min||r.max||r.maxLength||r.minLength||r.pattern||r.validate),xT=(r,e,t)=>!t&&(e.watchAll||e.watch.has(r)||[...e.watch].some(i=>r.startsWith(i)&&/^\.\w+/.test(r.slice(i.length))));const Vu=(r,e,t,i)=>{for(const o of t||Object.keys(r)){const l=Ee(r,o);if(l){const{_f:c,...d}=l;if(c){if(c.refs&&c.refs[0]&&e(c.refs[0],o)&&!i)return!0;if(c.ref&&e(c.ref,c.name)&&!i)return!0;if(Vu(d,e))break}else if(It(d)&&Vu(d,e))break}}};function DT(r,e,t){const i=Ee(r,t);if(i||Xf(t))return{error:i,name:t};const o=t.split(".");for(;o.length;){const l=o.join("."),c=Ee(e,l),d=Ee(r,l);if(c&&!Array.isArray(c)&&t!==l)return{name:t};if(d&&d.type)return{name:l,error:d};if(d&&d.root&&d.root.type)return{name:`${l}.root`,error:d.root};o.pop()}return{name:t}}var tV=(r,e,t,i)=>{t(r);const{name:o,...l}=r;return Rn(l)||Object.keys(l).length>=Object.keys(e).length||Object.keys(l).find(c=>e[c]===(!i||cr.all))},nV=(r,e,t)=>!r||!e||r===e||Ou(r).some(i=>i&&(t?i===e:i.startsWith(e)||e.startsWith(i))),rV=(r,e,t,i,o)=>o.isOnAll?!1:!t&&o.isOnTouch?!(e||r):(t?i.isOnBlur:o.isOnBlur)?!r:(t?i.isOnChange:o.isOnChange)?r:!0,iV=(r,e)=>!Jg(Ee(r,e)).length&&Ot(r,e),sV=(r,e,t)=>{const i=Ou(Ee(r,t));return ht(i,"root",e[t]),ht(r,t,i),r},Wh=r=>jr(r);function NT(r,e,t="validate"){if(Wh(r)||Array.isArray(r)&&r.every(Wh)||Ur(r)&&!r)return{type:t,message:Wh(r)?r:"",ref:e}}var No=r=>It(r)&&!Rf(r)?r:{value:r,message:""},OT=async(r,e,t,i,o,l)=>{const{ref:c,refs:d,required:p,maxLength:g,minLength:_,min:T,max:A,pattern:V,validate:z,name:H,valueAsNumber:U,mount:Q}=r._f,F=Ee(t,H);if(!Q||e.has(H))return{};const re=d?d[0]:c,_e=D=>{o&&re.reportValidity&&(re.setCustomValidity(Ur(D)?"":D||""),re.reportValidity())},ae={},Se=ny(c),k=rc(c),I=Se||k,w=(U||ty(c))&&Mt(c.value)&&Mt(F)||bf(c)&&c.value===""||F===""||Array.isArray(F)&&!F.length,O=Rb.bind(null,H,i,ae),x=(D,R,Re,Ae=wi.maxLength,$=wi.minLength)=>{const le=D?R:Re;ae[H]={type:D?Ae:$,message:le,ref:c,...O(D?Ae:$,le)}};if(l?!Array.isArray(F)||!F.length:p&&(!I&&(w||vn(F))||Ur(F)&&!F||k&&!Db(d).isValid||Se&&!Ob(d).isValid)){const{value:D,message:R}=Wh(p)?{value:!!p,message:p}:No(p);if(D&&(ae[H]={type:wi.required,message:R,ref:re,...O(wi.required,R)},!i))return _e(R),ae}if(!w&&(!vn(T)||!vn(A))){let D,R;const Re=No(A),Ae=No(T);if(!vn(F)&&!isNaN(F)){const $=c.valueAsNumber||F&&+F;vn(Re.value)||(D=$>Re.value),vn(Ae.value)||(R=$<Ae.value)}else{const $=c.valueAsDate||new Date(F),le=M=>new Date(new Date().toDateString()+" "+M),Te=c.type=="time",Fe=c.type=="week";jr(Re.value)&&F&&(D=Te?le(F)>le(Re.value):Fe?F>Re.value:$>new Date(Re.value)),jr(Ae.value)&&F&&(R=Te?le(F)<le(Ae.value):Fe?F<Ae.value:$<new Date(Ae.value))}if((D||R)&&(x(!!D,Re.message,Ae.message,wi.max,wi.min),!i))return _e(ae[H].message),ae}if((g||_)&&!w&&(jr(F)||l&&Array.isArray(F))){const D=No(g),R=No(_),Re=!vn(D.value)&&F.length>+D.value,Ae=!vn(R.value)&&F.length<+R.value;if((Re||Ae)&&(x(Re,D.message,R.message),!i))return _e(ae[H].message),ae}if(V&&!w&&jr(F)){const{value:D,message:R}=No(V);if(Rf(D)&&!F.match(D)&&(ae[H]={type:wi.pattern,message:R,ref:c,...O(wi.pattern,R)},!i))return _e(R),ae}if(z){if(hr(z)){const D=await z(F,t),R=NT(D,re);if(R&&(ae[H]={...R,...O(wi.validate,R.message)},!i))return _e(R.message),ae}else if(It(z)){let D={};for(const R in z){if(!Rn(D)&&!i)break;const Re=NT(await z[R](F,t),re,R);Re&&(D={...Re,...O(R,Re.message)},_e(Re.message),i&&(ae[H]=D))}if(!Rn(D)&&(ae[H]={ref:re,...D},!i))return ae}}return _e(!0),ae};const aV={mode:cr.onSubmit,reValidateMode:cr.onChange,shouldFocusError:!0};function oV(r={}){let e={...aV,...r},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:hr(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1},i={},o=It(e.defaultValues)||It(e.values)?Yt(e.defaultValues||e.values)||{}:{},l=e.shouldUnregister?{}:Yt(o),c={action:!1,mount:!1,watch:!1},d={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,g=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let T={..._};const A={array:ST(),state:ST()},V=e.criteriaMode===cr.all,z=N=>K=>{clearTimeout(g),g=setTimeout(N,K)},H=async N=>{if(!e.disabled&&(_.isValid||T.isValid||N)){const K=e.resolver?Rn((await k()).errors):await w(i,!0);K!==t.isValid&&A.state.next({isValid:K})}},U=(N,K)=>{!e.disabled&&(_.isValidating||_.validatingFields||T.isValidating||T.validatingFields)&&((N||Array.from(d.mount)).forEach(J=>{J&&(K?ht(t.validatingFields,J,K):Ot(t.validatingFields,J))}),A.state.next({validatingFields:t.validatingFields,isValidating:!Rn(t.validatingFields)}))},Q=(N,K=[],J,pe,fe=!0,ce=!0)=>{if(pe&&J&&!e.disabled){if(c.action=!0,ce&&Array.isArray(Ee(i,N))){const me=J(Ee(i,N),pe.argA,pe.argB);fe&&ht(i,N,me)}if(ce&&Array.isArray(Ee(t.errors,N))){const me=J(Ee(t.errors,N),pe.argA,pe.argB);fe&&ht(t.errors,N,me),iV(t.errors,N)}if((_.touchedFields||T.touchedFields)&&ce&&Array.isArray(Ee(t.touchedFields,N))){const me=J(Ee(t.touchedFields,N),pe.argA,pe.argB);fe&&ht(t.touchedFields,N,me)}(_.dirtyFields||T.dirtyFields)&&(t.dirtyFields=yu(o,l)),A.state.next({name:N,isDirty:x(N,K),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else ht(l,N,K)},F=(N,K)=>{ht(t.errors,N,K),A.state.next({errors:t.errors})},re=N=>{t.errors=N,A.state.next({errors:t.errors,isValid:!1})},_e=(N,K,J,pe)=>{const fe=Ee(i,N);if(fe){const ce=Ee(l,N,Mt(J)?Ee(o,N):J);Mt(ce)||pe&&pe.defaultChecked||K?ht(l,N,K?ce:RT(fe._f)):Re(N,ce),c.mount&&H()}},ae=(N,K,J,pe,fe)=>{let ce=!1,me=!1;const be={name:N};if(!e.disabled){if(!J||pe){(_.isDirty||T.isDirty)&&(me=t.isDirty,t.isDirty=be.isDirty=x(),ce=me!==be.isDirty);const je=bs(Ee(o,N),K);me=!!Ee(t.dirtyFields,N),je?Ot(t.dirtyFields,N):ht(t.dirtyFields,N,!0),be.dirtyFields=t.dirtyFields,ce=ce||(_.dirtyFields||T.dirtyFields)&&me!==!je}if(J){const je=Ee(t.touchedFields,N);je||(ht(t.touchedFields,N,J),be.touchedFields=t.touchedFields,ce=ce||(_.touchedFields||T.touchedFields)&&je!==J)}ce&&fe&&A.state.next(be)}return ce?be:{}},Se=(N,K,J,pe)=>{const fe=Ee(t.errors,N),ce=(_.isValid||T.isValid)&&Ur(K)&&t.isValid!==K;if(e.delayError&&J?(p=z(()=>F(N,J)),p(e.delayError)):(clearTimeout(g),p=null,J?ht(t.errors,N,J):Ot(t.errors,N)),(J?!bs(fe,J):fe)||!Rn(pe)||ce){const me={...pe,...ce&&Ur(K)?{isValid:K}:{},errors:t.errors,name:N};t={...t,...me},A.state.next(me)}},k=async N=>{U(N,!0);const K=await e.resolver(l,e.context,ZO(N||d.mount,i,e.criteriaMode,e.shouldUseNativeValidation));return U(N),K},I=async N=>{const{errors:K}=await k(N);if(N)for(const J of N){const pe=Ee(K,J);pe?ht(t.errors,J,pe):Ot(t.errors,J)}else t.errors=K;return K},w=async(N,K,J={valid:!0})=>{for(const pe in N){const fe=N[pe];if(fe){const{_f:ce,...me}=fe;if(ce){const be=d.array.has(ce.name),je=fe._f&&JO(fe._f);je&&_.validatingFields&&U([pe],!0);const rt=await OT(fe,d.disabled,l,V,e.shouldUseNativeValidation&&!K,be);if(je&&_.validatingFields&&U([pe]),rt[ce.name]&&(J.valid=!1,K))break;!K&&(Ee(rt,ce.name)?be?sV(t.errors,rt,ce.name):ht(t.errors,ce.name,rt[ce.name]):Ot(t.errors,ce.name))}!Rn(me)&&await w(me,K,J)}}return J.valid},O=()=>{for(const N of d.unMount){const K=Ee(i,N);K&&(K._f.refs?K._f.refs.every(J=>!_p(J)):!_p(K._f.ref))&&Et(N)}d.unMount=new Set},x=(N,K)=>!e.disabled&&(N&&K&&ht(l,N,K),!bs(M(),o)),D=(N,K,J)=>QO(N,d,{...c.mount?l:Mt(K)?o:jr(N)?{[N]:K}:K},J,K),R=N=>Jg(Ee(c.mount?l:o,N,e.shouldUnregister?Ee(o,N,[]):[])),Re=(N,K,J={})=>{const pe=Ee(i,N);let fe=K;if(pe){const ce=pe._f;ce&&(!ce.disabled&&ht(l,N,Nb(K,ce)),fe=bf(ce.ref)&&vn(K)?"":K,Ib(ce.ref)?[...ce.ref.options].forEach(me=>me.selected=fe.includes(me.value)):ce.refs?rc(ce.ref)?ce.refs.forEach(me=>{(!me.defaultChecked||!me.disabled)&&(Array.isArray(fe)?me.checked=!!fe.find(be=>be===me.value):me.checked=fe===me.value||!!fe)}):ce.refs.forEach(me=>me.checked=me.value===fe):ty(ce.ref)?ce.ref.value="":(ce.ref.value=fe,ce.ref.type||A.state.next({name:N,values:Yt(l)})))}(J.shouldDirty||J.shouldTouch)&&ae(N,fe,J.shouldTouch,J.shouldDirty,!0),J.shouldValidate&&Fe(N)},Ae=(N,K,J)=>{for(const pe in K){if(!K.hasOwnProperty(pe))return;const fe=K[pe],ce=N+"."+pe,me=Ee(i,ce);(d.array.has(N)||It(fe)||me&&!me._f)&&!Aa(fe)?Ae(ce,fe,J):Re(ce,fe,J)}},$=(N,K,J={})=>{const pe=Ee(i,N),fe=d.array.has(N),ce=Yt(K);ht(l,N,ce),fe?(A.array.next({name:N,values:Yt(l)}),(_.isDirty||_.dirtyFields||T.isDirty||T.dirtyFields)&&J.shouldDirty&&A.state.next({name:N,dirtyFields:yu(o,l),isDirty:x(N,ce)})):pe&&!pe._f&&!vn(ce)?Ae(N,ce,J):Re(N,ce,J),xT(N,d)&&A.state.next({...t,name:N}),A.state.next({name:c.mount?N:void 0,values:Yt(l)})},le=async N=>{c.mount=!0;const K=N.target;let J=K.name,pe=!0;const fe=Ee(i,J),ce=je=>{pe=Number.isNaN(je)||Aa(je)&&isNaN(je.getTime())||bs(je,Ee(l,J,je))},me=IT(e.mode),be=IT(e.reValidateMode);if(fe){let je,rt;const Yr=K.type?RT(fe._f):FO(N),Fn=N.type===TT.BLUR||N.type===TT.FOCUS_OUT,Xr=!eV(fe._f)&&!e.resolver&&!Ee(t.errors,J)&&!fe._f.deps||rV(Fn,Ee(t.touchedFields,J),t.isSubmitted,be,me),rr=xT(J,d,Fn);ht(l,J,Yr),Fn?(!K||!K.readOnly)&&(fe._f.onBlur&&fe._f.onBlur(N),p&&p(0)):fe._f.onChange&&fe._f.onChange(N);const ir=ae(J,Yr,Fn),xn=!Rn(ir)||rr;if(!Fn&&A.state.next({name:J,type:N.type,values:Yt(l)}),Xr)return(_.isValid||T.isValid)&&(e.mode==="onBlur"?Fn&&H():Fn||H()),xn&&A.state.next({name:J,...rr?{}:ir});if(!Fn&&rr&&A.state.next({...t}),e.resolver){const{errors:Wr}=await k([J]);if(ce(Yr),pe){const Zr=DT(t.errors,i,J),Gi=DT(Wr,i,Zr.name||J);je=Gi.error,J=Gi.name,rt=Rn(Wr)}}else U([J],!0),je=(await OT(fe,d.disabled,l,V,e.shouldUseNativeValidation))[J],U([J]),ce(Yr),pe&&(je?rt=!1:(_.isValid||T.isValid)&&(rt=await w(i,!0)));pe&&(fe._f.deps&&Fe(fe._f.deps),Se(J,rt,je,ir))}},Te=(N,K)=>{if(Ee(t.errors,K)&&N.focus)return N.focus(),1},Fe=async(N,K={})=>{let J,pe;const fe=Ou(N);if(e.resolver){const ce=await I(Mt(N)?N:fe);J=Rn(ce),pe=N?!fe.some(me=>Ee(ce,me)):J}else N?(pe=(await Promise.all(fe.map(async ce=>{const me=Ee(i,ce);return await w(me&&me._f?{[ce]:me}:me)}))).every(Boolean),!(!pe&&!t.isValid)&&H()):pe=J=await w(i);return A.state.next({...!jr(N)||(_.isValid||T.isValid)&&J!==t.isValid?{}:{name:N},...e.resolver||!N?{isValid:J}:{},errors:t.errors}),K.shouldFocus&&!pe&&Vu(i,Te,N?fe:d.mount),pe},M=N=>{const K={...c.mount?l:o};return Mt(N)?K:jr(N)?Ee(K,N):N.map(J=>Ee(K,J))},oe=(N,K)=>({invalid:!!Ee((K||t).errors,N),isDirty:!!Ee((K||t).dirtyFields,N),error:Ee((K||t).errors,N),isValidating:!!Ee(t.validatingFields,N),isTouched:!!Ee((K||t).touchedFields,N)}),de=N=>{N&&Ou(N).forEach(K=>Ot(t.errors,K)),A.state.next({errors:N?t.errors:{}})},ue=(N,K,J)=>{const pe=(Ee(i,N,{_f:{}})._f||{}).ref,fe=Ee(t.errors,N)||{},{ref:ce,message:me,type:be,...je}=fe;ht(t.errors,N,{...je,...K,ref:pe}),A.state.next({name:N,errors:t.errors,isValid:!1}),J&&J.shouldFocus&&pe&&pe.focus&&pe.focus()},Ie=(N,K)=>hr(N)?A.state.subscribe({next:J=>"values"in J&&N(D(void 0,K),J)}):D(N,K,!0),Le=N=>A.state.subscribe({next:K=>{nV(N.name,K.name,N.exact)&&tV(K,N.formState||_,Tn,N.reRenderRoot)&&N.callback({values:{...l},...t,...K,defaultValues:o})}}).unsubscribe,Ve=N=>(c.mount=!0,T={...T,...N.formState},Le({...N,formState:T})),Et=(N,K={})=>{for(const J of N?Ou(N):d.mount)d.mount.delete(J),d.array.delete(J),K.keepValue||(Ot(i,J),Ot(l,J)),!K.keepError&&Ot(t.errors,J),!K.keepDirty&&Ot(t.dirtyFields,J),!K.keepTouched&&Ot(t.touchedFields,J),!K.keepIsValidating&&Ot(t.validatingFields,J),!e.shouldUnregister&&!K.keepDefaultValue&&Ot(o,J);A.state.next({values:Yt(l)}),A.state.next({...t,...K.keepDirty?{isDirty:x()}:{}}),!K.keepIsValid&&H()},nt=({disabled:N,name:K})=>{(Ur(N)&&c.mount||N||d.disabled.has(K))&&(N?d.disabled.add(K):d.disabled.delete(K))},En=(N,K={})=>{let J=Ee(i,N);const pe=Ur(K.disabled)||Ur(e.disabled);return ht(i,N,{...J||{},_f:{...J&&J._f?J._f:{ref:{name:N}},name:N,mount:!0,...K}}),d.mount.add(N),J?nt({disabled:Ur(K.disabled)?K.disabled:e.disabled,name:N}):_e(N,!0,K.value),{...pe?{disabled:K.disabled||e.disabled}:{},...e.progressive?{required:!!K.required,min:_u(K.min),max:_u(K.max),minLength:_u(K.minLength),maxLength:_u(K.maxLength),pattern:_u(K.pattern)}:{},name:N,onChange:le,onBlur:le,ref:fe=>{if(fe){En(N,K),J=Ee(i,N);const ce=Mt(fe.value)&&fe.querySelectorAll&&fe.querySelectorAll("input,select,textarea")[0]||fe,me=YO(ce),be=J._f.refs||[];if(me?be.find(je=>je===ce):ce===J._f.ref)return;ht(i,N,{_f:{...J._f,...me?{refs:[...be.filter(_p),ce,...Array.isArray(Ee(o,N))?[{}]:[]],ref:{type:ce.type,name:N}}:{ref:ce}}}),_e(N,!1,void 0,ce)}else J=Ee(i,N,{}),J._f&&(J._f.mount=!1),(e.shouldUnregister||K.shouldUnregister)&&!(qO(d.array,N)&&c.action)&&d.unMount.add(N)}}},zn=()=>e.shouldFocusError&&Vu(i,Te,d.mount),nr=N=>{Ur(N)&&(A.state.next({disabled:N}),Vu(i,(K,J)=>{const pe=Ee(i,J);pe&&(K.disabled=pe._f.disabled||N,Array.isArray(pe._f.refs)&&pe._f.refs.forEach(fe=>{fe.disabled=pe._f.disabled||N}))},0,!1))},_r=(N,K)=>async J=>{let pe;J&&(J.preventDefault&&J.preventDefault(),J.persist&&J.persist());let fe=Yt(l);if(A.state.next({isSubmitting:!0}),e.resolver){const{errors:ce,values:me}=await k();t.errors=ce,fe=Yt(me)}else await w(i);if(d.disabled.size)for(const ce of d.disabled)Ot(fe,ce);if(Ot(t.errors,"root"),Rn(t.errors)){A.state.next({errors:{}});try{await N(fe,J)}catch(ce){pe=ce}}else K&&await K({...t.errors},J),zn(),setTimeout(zn);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Rn(t.errors)&&!pe,submitCount:t.submitCount+1,errors:t.errors}),pe)throw pe},Qr=(N,K={})=>{Ee(i,N)&&(Mt(K.defaultValue)?$(N,Yt(Ee(o,N))):($(N,K.defaultValue),ht(o,N,Yt(K.defaultValue))),K.keepTouched||Ot(t.touchedFields,N),K.keepDirty||(Ot(t.dirtyFields,N),t.isDirty=K.defaultValue?x(N,Yt(Ee(o,N))):x()),K.keepError||(Ot(t.errors,N),_.isValid&&H()),A.state.next({...t}))},vr=(N,K={})=>{const J=N?Yt(N):o,pe=Yt(J),fe=Rn(N),ce=fe?o:pe;if(K.keepDefaultValues||(o=J),!K.keepValues){if(K.keepDirtyValues){const me=new Set([...d.mount,...Object.keys(yu(o,l))]);for(const be of Array.from(me))Ee(t.dirtyFields,be)?ht(ce,be,Ee(l,be)):$(be,Ee(ce,be))}else{if(Zg&&Mt(N))for(const me of d.mount){const be=Ee(i,me);if(be&&be._f){const je=Array.isArray(be._f.refs)?be._f.refs[0]:be._f.ref;if(bf(je)){const rt=je.closest("form");if(rt){rt.reset();break}}}}if(K.keepFieldsRef)for(const me of d.mount)$(me,Ee(ce,me));else i={}}l=e.shouldUnregister?K.keepDefaultValues?Yt(o):{}:Yt(ce),A.array.next({values:{...ce}}),A.state.next({values:{...ce}})}d={mount:K.keepDirtyValues?d.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},c.mount=!_.isValid||!!K.keepIsValid||!!K.keepDirtyValues,c.watch=!!e.shouldUnregister,A.state.next({submitCount:K.keepSubmitCount?t.submitCount:0,isDirty:fe?!1:K.keepDirty?t.isDirty:!!(K.keepDefaultValues&&!bs(N,o)),isSubmitted:K.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:fe?{}:K.keepDirtyValues?K.keepDefaultValues&&l?yu(o,l):t.dirtyFields:K.keepDefaultValues&&N?yu(o,N):K.keepDirty?t.dirtyFields:{},touchedFields:K.keepTouched?t.touchedFields:{},errors:K.keepErrors?t.errors:{},isSubmitSuccessful:K.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},qi=(N,K)=>vr(hr(N)?N(l):N,K),Pa=(N,K={})=>{const J=Ee(i,N),pe=J&&J._f;if(pe){const fe=pe.refs?pe.refs[0]:pe.ref;fe.focus&&(fe.focus(),K.shouldSelect&&hr(fe.select)&&fe.select())}},Tn=N=>{t={...t,...N}},Hi={control:{register:En,unregister:Et,getFieldState:oe,handleSubmit:_r,setError:ue,_subscribe:Le,_runSchema:k,_focusError:zn,_getWatch:D,_getDirty:x,_setValid:H,_setFieldArray:Q,_setDisabledField:nt,_setErrors:re,_getFieldArray:R,_reset:vr,_resetDefaultValues:()=>hr(e.defaultValues)&&e.defaultValues().then(N=>{qi(N,e.resetOptions),A.state.next({isLoading:!1})}),_removeUnmounted:O,_disableForm:nr,_subjects:A,_proxyFormState:_,get _fields(){return i},get _formValues(){return l},get _state(){return c},set _state(N){c=N},get _defaultValues(){return o},get _names(){return d},set _names(N){d=N},get _formState(){return t},get _options(){return e},set _options(N){e={...e,...N}}},subscribe:Ve,trigger:Fe,register:En,handleSubmit:_r,watch:Ie,setValue:$,getValues:M,reset:qi,resetField:Qr,clearErrors:de,unregister:Et,setError:ue,setFocus:Pa,getFieldState:oe};return{...Hi,formControl:Hi}}function ry(r={}){const e=rn.useRef(void 0),t=rn.useRef(void 0),[i,o]=rn.useState({isDirty:!1,isValidating:!1,isLoading:hr(r.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1,isReady:!1,defaultValues:hr(r.defaultValues)?void 0:r.defaultValues});if(!e.current)if(r.formControl)e.current={...r.formControl,formState:i},r.defaultValues&&!hr(r.defaultValues)&&r.formControl.reset(r.defaultValues,r.resetOptions);else{const{formControl:c,...d}=oV(r);e.current={...d,formState:i}}const l=e.current.control;return l._options=r,KO(()=>{const c=l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0});return o(d=>({...d,isReady:!0})),l._formState.isReady=!0,c},[l]),rn.useEffect(()=>l._disableForm(r.disabled),[l,r.disabled]),rn.useEffect(()=>{r.mode&&(l._options.mode=r.mode),r.reValidateMode&&(l._options.reValidateMode=r.reValidateMode)},[l,r.mode,r.reValidateMode]),rn.useEffect(()=>{r.errors&&(l._setErrors(r.errors),l._focusError())},[l,r.errors]),rn.useEffect(()=>{r.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,r.shouldUnregister]),rn.useEffect(()=>{if(l._proxyFormState.isDirty){const c=l._getDirty();c!==i.isDirty&&l._subjects.state.next({isDirty:c})}},[l,i.isDirty]),rn.useEffect(()=>{r.values&&!bs(r.values,t.current)?(l._reset(r.values,{keepFieldsRef:!0,...l._options.resetOptions}),t.current=r.values,o(c=>({...c}))):l._resetDefaultValues()},[l,r.values]),rn.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),e.current.formState=$O(i,l),e.current}const VT=(r,e,t)=>{if(r&&"reportValidity"in r){const i=Ee(t,e);r.setCustomValidity(i&&i.message||""),r.reportValidity()}},Vb=(r,e)=>{for(const t in e.fields){const i=e.fields[t];i&&i.ref&&"reportValidity"in i.ref?VT(i.ref,t,r):i&&i.refs&&i.refs.forEach(o=>VT(o,t,r))}},lV=(r,e)=>{e.shouldUseNativeValidation&&Vb(r,e);const t={};for(const i in r){const o=Ee(e.fields,i),l=Object.assign(r[i]||{},{ref:o&&o.ref});if(uV(e.names||Object.keys(r),i)){const c=Object.assign({},Ee(t,i));ht(c,"root",l),ht(t,i,c)}else ht(t,i,l)}return t},uV=(r,e)=>{const t=MT(e);return r.some(i=>MT(i).match(`^${t}\\.\\d+`))};function MT(r){return r.replace(/\]|\[/g,"")}function iy(r,e,t){return t===void 0&&(t={}),function(i,o,l){try{return Promise.resolve((function(c,d){try{var p=(e?.context,Promise.resolve(r[t.mode==="sync"?"validateSync":"validate"](i,Object.assign({abortEarly:!1},e,{context:o}))).then(function(g){return l.shouldUseNativeValidation&&Vb({},l),{values:t.raw?Object.assign({},i):g,errors:{}}}))}catch(g){return d(g)}return p&&p.then?p.then(void 0,d):p})(0,function(c){if(!c.inner)throw c;return{values:{},errors:lV((d=c,p=!l.shouldUseNativeValidation&&l.criteriaMode==="all",(d.inner||[]).reduce(function(g,_){if(g[_.path]||(g[_.path]={message:_.message,type:_.type}),p){var T=g[_.path].types,A=T&&T[_.type];g[_.path]=Rb(_.path,p,g,_.type,A?[].concat(A,_.message):_.message)}return g},{})),l)};var d,p}))}catch(c){return Promise.reject(c)}}}const cV=Yf({email:Ra().required("Che, pon tu email").email("Ese email no parece vlido, dale"),password:Ra().required("La contrasea tambin, eh")}),hV=Yf({name:Ra().required("Dale, contanos cmo te llams").min(2,"El nombre tiene que tener al menos 2 letras, che"),email:Ra().required("El email tambin, dale").email("Ese email no parece vlido, eh"),password:Ra().required("Una contrasea copada, por favor").min(6,"La contrasea tiene que tener al menos 6 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/,"La contrasea tiene que tener al menos una mayscula, una minscula y un nmero, che")}),fV=Yf({email:Ra().required("Che, pon tu email").email("Ese email no parece vlido, dale")});/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var kT="popstate";function dV(r={}){function e(i,o){let{pathname:l,search:c,hash:d}=i.location;return Yp("",{pathname:l,search:c,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){return typeof o=="string"?o:Hu(o)}return pV(e,t,null,r)}function yt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function gr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function mV(){return Math.random().toString(36).substring(2,10)}function PT(r,e){return{usr:r.state,key:r.key,idx:e}}function Yp(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?ol(e):e,state:t,key:e&&e.key||i||mV()}}function Hu({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function ol(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function pV(r,e,t,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,c=o.history,d="POP",p=null,g=_();g==null&&(g=0,c.replaceState({...c.state,idx:g},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let U=_(),Q=U==null?null:U-g;g=U,p&&p({action:d,location:H.location,delta:Q})}function A(U,Q){d="PUSH";let F=Yp(H.location,U,Q);g=_()+1;let re=PT(F,g),_e=H.createHref(F);try{c.pushState(re,"",_e)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(_e)}l&&p&&p({action:d,location:H.location,delta:1})}function V(U,Q){d="REPLACE";let F=Yp(H.location,U,Q);g=_();let re=PT(F,g),_e=H.createHref(F);c.replaceState(re,"",_e),l&&p&&p({action:d,location:H.location,delta:0})}function z(U){return gV(U)}let H={get action(){return d},get location(){return r(o,c)},listen(U){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(kT,T),p=U,()=>{o.removeEventListener(kT,T),p=null}},createHref(U){return e(o,U)},createURL:z,encodeLocation(U){let Q=z(U);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:A,replace:V,go(U){return c.go(U)}};return H}function gV(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),yt(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Hu(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function Mb(r,e,t="/"){return yV(r,e,t,!1)}function yV(r,e,t,i){let o=typeof e=="string"?ol(e):e,l=Ui(o.pathname||"/",t);if(l==null)return null;let c=kb(r);_V(c);let d=null;for(let p=0;d==null&&p<c.length;++p){let g=xV(l);d=IV(c[p],g,i)}return d}function kb(r,e=[],t=[],i="",o=!1){let l=(c,d,p=o,g)=>{let _={relativePath:g===void 0?c.path||"":g,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&p)return;yt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let T=Oi([i,_.relativePath]),A=t.concat(_);c.children&&c.children.length>0&&(yt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),kb(c.children,e,A,T,p)),!(c.path==null&&!c.index)&&e.push({path:T,score:wV(T,c.index),routesMeta:A})};return r.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let p of Pb(c.path))l(c,d,!0,p)}),e}function Pb(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let c=Pb(i.join("/")),d=[];return d.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...c),d.map(p=>r.startsWith("/")&&p===""?"/":p)}function _V(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:RV(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var vV=/^:[\w-]+$/,EV=3,TV=2,SV=1,AV=10,bV=-2,LT=r=>r==="*";function wV(r,e){let t=r.split("/"),i=t.length;return t.some(LT)&&(i+=bV),e&&(i+=TV),t.filter(o=>!LT(o)).reduce((o,l)=>o+(vV.test(l)?EV:l===""?SV:AV),i)}function RV(r,e){return r.length===e.length&&r.slice(0,-1).every((i,o)=>i===e[o])?r[r.length-1]-e[e.length-1]:0}function IV(r,e,t=!1){let{routesMeta:i}=r,o={},l="/",c=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=If({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),A=p.route;if(!T&&g&&t&&!i[i.length-1].route.index&&(T=If({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!T)return null;Object.assign(o,T.params),c.push({params:o,pathname:Oi([l,T.pathname]),pathnameBase:VV(Oi([l,T.pathnameBase])),route:A}),T.pathnameBase!=="/"&&(l=Oi([l,T.pathnameBase]))}return c}function If(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=CV(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:i.reduce((g,{paramName:_,isOptional:T},A)=>{if(_==="*"){let z=d[A]||"";c=l.slice(0,l.length-z.length).replace(/(.)\/+$/,"$1")}const V=d[A];return T&&!V?g[_]=void 0:g[_]=(V||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:r}}function CV(r,e=!1,t=!0){gr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function xV(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Ui(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function DV(r,e="/"){let{pathname:t,search:i="",hash:o=""}=typeof r=="string"?ol(r):r;return{pathname:t?t.startsWith("/")?t:NV(t,e):e,search:MV(i),hash:kV(o)}}function NV(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function vp(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function OV(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function sy(r){let e=OV(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function ay(r,e,t,i=!1){let o;typeof r=="string"?o=ol(r):(o={...r},yt(!o.pathname||!o.pathname.includes("?"),vp("?","pathname","search",o)),yt(!o.pathname||!o.pathname.includes("#"),vp("#","pathname","hash",o)),yt(!o.search||!o.search.includes("#"),vp("#","search","hash",o)));let l=r===""||o.pathname==="",c=l?"/":o.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let A=c.split("/");for(;A[0]==="..";)A.shift(),T-=1;o.pathname=A.join("/")}d=T>=0?e[T]:"/"}let p=DV(o,d),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}var Oi=r=>r.join("/").replace(/\/\/+/g,"/"),VV=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),MV=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,kV=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function PV(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Lb=["POST","PUT","PATCH","DELETE"];new Set(Lb);var LV=["GET",...Lb];new Set(LV);var ll=Z.createContext(null);ll.displayName="DataRouter";var Wf=Z.createContext(null);Wf.displayName="DataRouterState";Z.createContext(!1);var Ub=Z.createContext({isTransitioning:!1});Ub.displayName="ViewTransition";var UV=Z.createContext(new Map);UV.displayName="Fetchers";var jV=Z.createContext(null);jV.displayName="Await";var yr=Z.createContext(null);yr.displayName="Navigation";var ic=Z.createContext(null);ic.displayName="Location";var Kr=Z.createContext({outlet:null,matches:[],isDataRoute:!1});Kr.displayName="Route";var oy=Z.createContext(null);oy.displayName="RouteError";function zV(r,{relative:e}={}){yt(ul(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=Z.useContext(yr),{hash:o,pathname:l,search:c}=sc(r,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Oi([t,l])),i.createHref({pathname:d,search:c,hash:o})}function ul(){return Z.useContext(ic)!=null}function Bs(){return yt(ul(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(ic).location}var jb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zb(r){Z.useContext(yr).static||Z.useLayoutEffect(r)}function cl(){let{isDataRoute:r}=Z.useContext(Kr);return r?JV():FV()}function FV(){yt(ul(),"useNavigate() may be used only in the context of a <Router> component.");let r=Z.useContext(ll),{basename:e,navigator:t}=Z.useContext(yr),{matches:i}=Z.useContext(Kr),{pathname:o}=Bs(),l=JSON.stringify(sy(i)),c=Z.useRef(!1);return zb(()=>{c.current=!0}),Z.useCallback((p,g={})=>{if(gr(c.current,jb),!c.current)return;if(typeof p=="number"){t.go(p);return}let _=ay(p,JSON.parse(l),o,g.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Oi([e,_.pathname])),(g.replace?t.replace:t.push)(_,g.state,g)},[e,t,l,o,r])}Z.createContext(null);function sc(r,{relative:e}={}){let{matches:t}=Z.useContext(Kr),{pathname:i}=Bs(),o=JSON.stringify(sy(t));return Z.useMemo(()=>ay(r,JSON.parse(o),i,e==="path"),[r,o,i,e])}function BV(r,e){return Fb(r,e)}function Fb(r,e,t,i,o){yt(ul(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=Z.useContext(yr),{matches:c}=Z.useContext(Kr),d=c[c.length-1],p=d?d.params:{},g=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let F=T&&T.path||"";Bb(g,!T||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let A=Bs(),V;if(e){let F=typeof e=="string"?ol(e):e;yt(_==="/"||F.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${F.pathname}" was given in the \`location\` prop.`),V=F}else V=A;let z=V.pathname||"/",H=z;if(_!=="/"){let F=_.replace(/^\//,"").split("/");H="/"+z.replace(/^\//,"").split("/").slice(F.length).join("/")}let U=Mb(r,{pathname:H});gr(T||U!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),gr(U==null||U[U.length-1].route.element!==void 0||U[U.length-1].route.Component!==void 0||U[U.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=KV(U&&U.map(F=>Object.assign({},F,{params:Object.assign({},p,F.params),pathname:Oi([_,l.encodeLocation?l.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?_:Oi([_,l.encodeLocation?l.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),c,t,i,o);return e&&Q?Z.createElement(ic.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...V},navigationType:"POP"}},Q):Q}function qV(){let r=ZV(),e=PV(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:l},"ErrorBoundary")," or"," ",Z.createElement("code",{style:l},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},e),t?Z.createElement("pre",{style:o},t):null,c)}var HV=Z.createElement(qV,null),GV=class extends Z.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?Z.createElement(Kr.Provider,{value:this.props.routeContext},Z.createElement(oy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function $V({routeContext:r,match:e,children:t}){let i=Z.useContext(ll);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),Z.createElement(Kr.Provider,{value:r},t)}function KV(r,e=[],t=null,i=null,o=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,c=t?.errors;if(c!=null){let g=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);yt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,p=-1;if(t)for(let g=0;g<l.length;g++){let _=l[g];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=g),_.route.id){let{loaderData:T,errors:A}=t,V=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!A||A[_.route.id]===void 0);if(_.route.lazy||V){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,_,T)=>{let A,V=!1,z=null,H=null;t&&(A=c&&_.route.id?c[_.route.id]:void 0,z=_.route.errorElement||HV,d&&(p<0&&T===0?(Bb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),V=!0,H=null):p===T&&(V=!0,H=_.route.hydrateFallbackElement||null)));let U=e.concat(l.slice(0,T+1)),Q=()=>{let F;return A?F=z:V?F=H:_.route.Component?F=Z.createElement(_.route.Component,null):_.route.element?F=_.route.element:F=g,Z.createElement($V,{match:_,routeContext:{outlet:g,matches:U,isDataRoute:t!=null},children:F})};return t&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?Z.createElement(GV,{location:t.location,revalidation:t.revalidation,component:z,error:A,children:Q(),routeContext:{outlet:null,matches:U,isDataRoute:!0},unstable_onError:i}):Q()},null)}function ly(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QV(r){let e=Z.useContext(ll);return yt(e,ly(r)),e}function YV(r){let e=Z.useContext(Wf);return yt(e,ly(r)),e}function XV(r){let e=Z.useContext(Kr);return yt(e,ly(r)),e}function uy(r){let e=XV(r),t=e.matches[e.matches.length-1];return yt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function WV(){return uy("useRouteId")}function ZV(){let r=Z.useContext(oy),e=YV("useRouteError"),t=uy("useRouteError");return r!==void 0?r:e.errors?.[t]}function JV(){let{router:r}=QV("useNavigate"),e=uy("useNavigate"),t=Z.useRef(!1);return zb(()=>{t.current=!0}),Z.useCallback(async(o,l={})=>{gr(t.current,jb),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var UT={};function Bb(r,e,t){!e&&!UT[r]&&(UT[r]=!0,gr(!1,t))}Z.memo(eM);function eM({routes:r,future:e,state:t,unstable_onError:i}){return Fb(r,void 0,t,i,e)}function Oo({to:r,replace:e,state:t,relative:i}){yt(ul(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=Z.useContext(yr);gr(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=Z.useContext(Kr),{pathname:c}=Bs(),d=cl(),p=ay(r,sy(l),c,i==="path"),g=JSON.stringify(p);return Z.useEffect(()=>{d(JSON.parse(g),{replace:e,state:t,relative:i})},[d,g,i,e,t]),null}function va(r){yt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tM({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:o,static:l=!1}){yt(!ul(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=r.replace(/^\/*/,"/"),d=Z.useMemo(()=>({basename:c,navigator:o,static:l,future:{}}),[c,o,l]);typeof t=="string"&&(t=ol(t));let{pathname:p="/",search:g="",hash:_="",state:T=null,key:A="default"}=t,V=Z.useMemo(()=>{let z=Ui(p,c);return z==null?null:{location:{pathname:z,search:g,hash:_,state:T,key:A},navigationType:i}},[c,p,g,_,T,A,i]);return gr(V!=null,`<Router basename="${c}"> is not able to match the URL "${p}${g}${_}" because it does not start with the basename, so the <Router> won't render anything.`),V==null?null:Z.createElement(yr.Provider,{value:d},Z.createElement(ic.Provider,{children:e,value:V}))}function nM({children:r,location:e}){return BV(Xp(r),e)}function Xp(r,e=[]){let t=[];return Z.Children.forEach(r,(i,o)=>{if(!Z.isValidElement(i))return;let l=[...e,o];if(i.type===Z.Fragment){t.push.apply(t,Xp(i.props.children,l));return}yt(i.type===va,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),yt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Xp(i.props.children,l)),t.push(c)}),t}var Zh="get",Jh="application/x-www-form-urlencoded";function Zf(r){return r!=null&&typeof r.tagName=="string"}function rM(r){return Zf(r)&&r.tagName.toLowerCase()==="button"}function iM(r){return Zf(r)&&r.tagName.toLowerCase()==="form"}function sM(r){return Zf(r)&&r.tagName.toLowerCase()==="input"}function aM(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function oM(r,e){return r.button===0&&(!e||e==="_self")&&!aM(r)}var Lh=null;function lM(){if(Lh===null)try{new FormData(document.createElement("form"),0),Lh=!1}catch{Lh=!0}return Lh}var uM=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ep(r){return r!=null&&!uM.has(r)?(gr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jh}"`),null):r}function cM(r,e){let t,i,o,l,c;if(iM(r)){let d=r.getAttribute("action");i=d?Ui(d,e):null,t=r.getAttribute("method")||Zh,o=Ep(r.getAttribute("enctype"))||Jh,l=new FormData(r)}else if(rM(r)||sM(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||d.getAttribute("action");if(i=p?Ui(p,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||Zh,o=Ep(r.getAttribute("formenctype"))||Ep(d.getAttribute("enctype"))||Jh,l=new FormData(d,r),!lM()){let{name:g,type:_,value:T}=r;if(_==="image"){let A=g?`${g}.`:"";l.append(`${A}x`,"0"),l.append(`${A}y`,"0")}else g&&l.append(g,T)}}else{if(Zf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Zh,i=null,o=Jh,c=r}return l&&o==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cy(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function hM(r,e,t){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Ui(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function fM(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dM(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function mM(r,e,t){let i=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await fM(l,t);return c.links?c.links():[]}return[]}));return _M(i.flat(1).filter(dM).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function jT(r,e,t,i,o,l){let c=(p,g)=>t[g]?p.route.id!==t[g].route.id:!0,d=(p,g)=>t[g].pathname!==p.pathname||t[g].route.path?.endsWith("*")&&t[g].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,g)=>c(p,g)||d(p,g)):l==="data"?e.filter((p,g)=>{let _=i.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(c(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function pM(r,e,{includeHydrateFallback:t}={}){return gM(r.map(i=>{let o=e.routes[i.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function gM(r){return[...new Set(r)]}function yM(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function _M(r,e){let t=new Set;return new Set(e),r.reduce((i,o)=>{let l=JSON.stringify(yM(o));return t.has(l)||(t.add(l),i.push({key:l,link:o})),i},[])}function qb(){let r=Z.useContext(ll);return cy(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function vM(){let r=Z.useContext(Wf);return cy(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var hy=Z.createContext(void 0);hy.displayName="FrameworkContext";function Hb(){let r=Z.useContext(hy);return cy(r,"You must render this element inside a <HydratedRouter> element"),r}function EM(r,e){let t=Z.useContext(hy),[i,o]=Z.useState(!1),[l,c]=Z.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,A=Z.useRef(null);Z.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let H=Q=>{Q.forEach(F=>{c(F.isIntersecting)})},U=new IntersectionObserver(H,{threshold:.5});return A.current&&U.observe(A.current),()=>{U.disconnect()}}},[r]),Z.useEffect(()=>{if(i){let H=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(H)}}},[i]);let V=()=>{o(!0)},z=()=>{o(!1),c(!1)};return t?r!=="intent"?[l,A,{}]:[l,A,{onFocus:vu(d,V),onBlur:vu(p,z),onMouseEnter:vu(g,V),onMouseLeave:vu(_,z),onTouchStart:vu(T,V)}]:[!1,A,{}]}function vu(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function TM({page:r,...e}){let{router:t}=qb(),i=Z.useMemo(()=>Mb(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?Z.createElement(AM,{page:r,matches:i,...e}):null}function SM(r){let{manifest:e,routeModules:t}=Hb(),[i,o]=Z.useState([]);return Z.useEffect(()=>{let l=!1;return mM(r,e,t).then(c=>{l||o(c)}),()=>{l=!0}},[r,e,t]),i}function AM({page:r,matches:e,...t}){let i=Bs(),{manifest:o,routeModules:l}=Hb(),{basename:c}=qb(),{loaderData:d,matches:p}=vM(),g=Z.useMemo(()=>jT(r,e,p,o,i,"data"),[r,e,p,o,i]),_=Z.useMemo(()=>jT(r,e,p,o,i,"assets"),[r,e,p,o,i]),T=Z.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let z=new Set,H=!1;if(e.forEach(Q=>{let F=o.routes[Q.route.id];!F||!F.hasLoader||(!g.some(re=>re.route.id===Q.route.id)&&Q.route.id in d&&l[Q.route.id]?.shouldRevalidate||F.hasClientLoader?H=!0:z.add(Q.route.id))}),z.size===0)return[];let U=hM(r,c,"data");return H&&z.size>0&&U.searchParams.set("_routes",e.filter(Q=>z.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[U.pathname+U.search]},[c,d,i,o,g,e,r,l]),A=Z.useMemo(()=>pM(_,o),[_,o]),V=SM(_);return Z.createElement(Z.Fragment,null,T.map(z=>Z.createElement("link",{key:z,rel:"prefetch",as:"fetch",href:z,...t})),A.map(z=>Z.createElement("link",{key:z,rel:"modulepreload",href:z,...t})),V.map(({key:z,link:H})=>Z.createElement("link",{key:z,nonce:t.nonce,...H})))}function bM(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Gb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Gb&&(window.__reactRouterVersion="7.9.1")}catch{}function wM({basename:r,children:e,window:t}){let i=Z.useRef();i.current==null&&(i.current=dV({window:t,v5Compat:!0}));let o=i.current,[l,c]=Z.useState({action:o.action,location:o.location}),d=Z.useCallback(p=>{Z.startTransition(()=>c(p))},[c]);return Z.useLayoutEffect(()=>o.listen(d),[o,d]),Z.createElement(tM,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var $b=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wo=Z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:o,reloadDocument:l,replace:c,state:d,target:p,to:g,preventScrollReset:_,viewTransition:T,...A},V){let{basename:z}=Z.useContext(yr),H=typeof g=="string"&&$b.test(g),U,Q=!1;if(typeof g=="string"&&H&&(U=g,Gb))try{let w=new URL(window.location.href),O=g.startsWith("//")?new URL(w.protocol+g):new URL(g),x=Ui(O.pathname,z);O.origin===w.origin&&x!=null?g=x+O.search+O.hash:Q=!0}catch{gr(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=zV(g,{relative:o}),[re,_e,ae]=EM(i,A),Se=xM(g,{replace:c,state:d,target:p,preventScrollReset:_,relative:o,viewTransition:T});function k(w){e&&e(w),w.defaultPrevented||Se(w)}let I=Z.createElement("a",{...A,...ae,href:U||F,onClick:Q||l?e:k,ref:bM(V,_e),target:p,"data-discover":!H&&t==="render"?"true":void 0});return re&&!H?Z.createElement(Z.Fragment,null,I,Z.createElement(TM,{page:F})):I});Wo.displayName="Link";var RM=Z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:o=!1,style:l,to:c,viewTransition:d,children:p,...g},_){let T=sc(c,{relative:g.relative}),A=Bs(),V=Z.useContext(Wf),{navigator:z,basename:H}=Z.useContext(yr),U=V!=null&&MM(T)&&d===!0,Q=z.encodeLocation?z.encodeLocation(T).pathname:T.pathname,F=A.pathname,re=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;t||(F=F.toLowerCase(),re=re?re.toLowerCase():null,Q=Q.toLowerCase()),re&&H&&(re=Ui(re,H)||re);const _e=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let ae=F===Q||!o&&F.startsWith(Q)&&F.charAt(_e)==="/",Se=re!=null&&(re===Q||!o&&re.startsWith(Q)&&re.charAt(Q.length)==="/"),k={isActive:ae,isPending:Se,isTransitioning:U},I=ae?e:void 0,w;typeof i=="function"?w=i(k):w=[i,ae?"active":null,Se?"pending":null,U?"transitioning":null].filter(Boolean).join(" ");let O=typeof l=="function"?l(k):l;return Z.createElement(Wo,{...g,"aria-current":I,className:w,ref:_,style:O,to:c,viewTransition:d},typeof p=="function"?p(k):p)});RM.displayName="NavLink";var IM=Z.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:o,state:l,method:c=Zh,action:d,onSubmit:p,relative:g,preventScrollReset:_,viewTransition:T,...A},V)=>{let z=OM(),H=VM(d,{relative:g}),U=c.toLowerCase()==="get"?"get":"post",Q=typeof d=="string"&&$b.test(d),F=re=>{if(p&&p(re),re.defaultPrevented)return;re.preventDefault();let _e=re.nativeEvent.submitter,ae=_e?.getAttribute("formmethod")||c;z(_e||re.currentTarget,{fetcherKey:e,method:ae,navigate:t,replace:o,state:l,relative:g,preventScrollReset:_,viewTransition:T})};return Z.createElement("form",{ref:V,method:U,action:H,onSubmit:i?p:F,...A,"data-discover":!Q&&r==="render"?"true":void 0})});IM.displayName="Form";function CM(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kb(r){let e=Z.useContext(ll);return yt(e,CM(r)),e}function xM(r,{target:e,replace:t,state:i,preventScrollReset:o,relative:l,viewTransition:c}={}){let d=cl(),p=Bs(),g=sc(r,{relative:l});return Z.useCallback(_=>{if(oM(_,e)){_.preventDefault();let T=t!==void 0?t:Hu(p)===Hu(g);d(r,{replace:T,state:i,preventScrollReset:o,relative:l,viewTransition:c})}},[p,d,g,t,i,e,r,o,l,c])}var DM=0,NM=()=>`__${String(++DM)}__`;function OM(){let{router:r}=Kb("useSubmit"),{basename:e}=Z.useContext(yr),t=WV();return Z.useCallback(async(i,o={})=>{let{action:l,method:c,encType:d,formData:p,body:g}=cM(i,e);if(o.navigate===!1){let _=o.fetcherKey||NM();await r.fetch(_,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function VM(r,{relative:e}={}){let{basename:t}=Z.useContext(yr),i=Z.useContext(Kr);yt(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...sc(r||".",{relative:e})},c=Bs();if(r==null){l.search=c.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(_=>_==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Oi([t,l.pathname])),Hu(l)}function MM(r,{relative:e}={}){let t=Z.useContext(Ub);yt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Kb("useViewTransitionState"),o=sc(r,{relative:e});if(!t.isTransitioning)return!1;let l=Ui(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=Ui(t.nextLocation.pathname,i)||t.nextLocation.pathname;return If(o.pathname,c)!=null||If(o.pathname,l)!=null}const kM=()=>{const{login:r,isLoading:e}=Fs(),t=cl(),i=ry({resolver:iy(cV),mode:"onChange",defaultValues:{email:"",password:""}}),o=async l=>{try{(await r(l)).success&&t("/home")}catch(c){c&&typeof c=="object"&&"path"in c&&"message"in c&&i.setError(c.path,{type:"manual",message:c.message})}};return{...i,onSubmit:i.handleSubmit(o),isLoading:e,isSubmitting:i.formState.isSubmitting}},PM=()=>{const{signup:r,isLoading:e}=Fs(),t=cl(),i=ry({resolver:iy(hV),mode:"onChange",defaultValues:{name:"",email:"",password:""}}),o=async l=>{try{(await r(l)).success&&t("/home")}catch(c){c&&typeof c=="object"&&"path"in c&&"message"in c&&i.setError(c.path,{type:"manual",message:c.message})}};return{...i,onSubmit:i.handleSubmit(o),isLoading:e,isSubmitting:i.formState.isSubmitting}},LM=()=>{const{resetPassword:r,isLoading:e}=Fs(),t=ry({resolver:iy(fV),mode:"onChange",defaultValues:{email:""}}),i=async o=>{try{await r(o.email)}catch(l){l&&typeof l=="object"&&"path"in l&&"message"in l&&t.setError(l.path,{type:"manual",message:l.message})}};return{...t,onSubmit:t.handleSubmit(i),isLoading:e,isSubmitting:t.formState.isSubmitting}},UM=({onSelectAdventure:r})=>{const{user:e}=Fs(),{getUserAdventures:t,loadAdventure:i,isLoading:o}=Yg(),[l,c]=Z.useState([]),d=Z.useCallback(async()=>{if(e?.id)try{const _=await t(e.id);c(_)}catch(_){console.error("Error loading adventures:",_)}},[e?.id,t]);Z.useEffect(()=>{e?.id&&d()},[e?.id,d]);const p=async _=>{_.id&&e?.id&&(await i(_.id,e.id),r?.(_))},g=_=>new Date(_).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return o?L.jsx("div",{className:"flex justify-center items-center p-8",children:L.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"})}):l.length===0?L.jsxs("div",{className:"text-center p-8 text-gray-400",children:[L.jsx("p",{children:"No tienes aventuras guardadas an."}),L.jsx("p",{className:"text-sm mt-2",children:"Comienza una nueva aventura para verla aqu!"})]}):L.jsxs("div",{className:"space-y-4",children:[L.jsx("h3",{className:"text-lg font-semibold text-amber-400 mb-4",children:"Tus Aventuras"}),l.map(_=>L.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 hover:border-amber-600 transition-colors",children:[L.jsxs("div",{className:"flex justify-between items-start mb-2",children:[L.jsx("h4",{className:"font-medium text-white",children:_.title}),L.jsx("span",{className:"text-xs text-gray-400 capitalize",children:_.genre})]}),L.jsxs("p",{className:"text-sm text-gray-300 mb-2",children:[_.steps.length," paso",_.steps.length!==1?"s":""]}),L.jsxs("div",{className:"flex justify-between items-center",children:[L.jsx("span",{className:"text-xs text-gray-500",children:_.updatedAt?g(_.updatedAt):g(_.createdAt)}),L.jsx(xi,{onClick:()=>p(_),variant:"secondary",size:"sm",children:"Continuar"})]})]},_.id))]})},qo=({name:r,type:e="text",label:t,placeholder:i,icon:o,error:l,register:c,required:d=!1})=>L.jsx(FT,{type:e,label:t,placeholder:i,icon:o,error:l?.message,required:d,...c(r)}),jM=()=>{const{register:r,onSubmit:e,formState:{errors:t},isLoading:i,isSubmitting:o}=kM(),{loginWithGoogle:l}=Fs();return L.jsxs("div",{className:"login-screen glass-effect",children:[L.jsxs("div",{className:"text-center mb-6",children:[L.jsx("h1",{className:"gradient-text",children:"Che, volviste!"}),L.jsx("p",{className:"text-secondary",children:"Entr a tu cuenta, dale"})]}),L.jsxs("form",{onSubmit:e,className:"space-y-4",children:[L.jsx(qo,{name:"email",type:"email",label:"Email",placeholder:"Pon tu email ac",icon:"",error:t.email,register:r,required:!0}),L.jsx(qo,{name:"password",type:"password",label:"Contrasea",placeholder:"Tu contrasea, por favor",icon:"",error:t.password,register:r,required:!0}),L.jsx(xi,{type:"submit",disabled:i||o,size:"lg",children:i||o?"Entrando...":"Entrar"}),L.jsxs(xi,{onClick:l,variant:"google",disabled:i||o,size:"lg",className:"mt-2",children:[L.jsxs("svg",{className:"google-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[L.jsx("path",{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12
            s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C33.64,6.053,29.082,4,24,4C12.955,4,4,12.955,4,24
            s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`}),L.jsx("path",{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,16.108,18.961,13,24,13c3.059,0,5.842,1.154,7.961,3.039
            l5.657-5.657C33.64,6.053,29.082,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`}),L.jsx("path",{fill:"#4CAF50",d:`M24,44c5.167,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36
            c-5.188,0-9.594-3.317-11.258-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`}),L.jsx("path",{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.093,5.571
            c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`})]}),"Continuar con Google"]})]}),L.jsxs("div",{className:"form-links",children:[L.jsxs("p",{children:["No tens cuenta? ",L.jsx(Wo,{to:"/signup",children:"Cre una ac"})]}),L.jsxs("p",{className:"mt-2",children:["Te olvidaste la contrasea? ",L.jsx(Wo,{to:"/forgot-password",children:"Recuperala ac"})]})]})]})},zM=()=>{const{register:r,onSubmit:e,formState:{errors:t},isLoading:i,isSubmitting:o}=PM();return L.jsxs("div",{className:"signup-screen glass-effect",children:[L.jsxs("div",{className:"text-center mb-6",children:[L.jsx("h1",{className:"gradient-text",children:"Dale, sumate!"}),L.jsx("p",{className:"text-secondary",children:"Cre tu cuenta y empez la aventura"})]}),L.jsxs("form",{onSubmit:e,className:"space-y-4",children:[L.jsx(qo,{name:"name",type:"text",label:"Nombre completo",placeholder:"Cmo te llams vos",icon:"",error:t.name,register:r,required:!0}),L.jsx(qo,{name:"email",type:"email",label:"Email",placeholder:"Tu email, dale",icon:"",error:t.email,register:r,required:!0}),L.jsx(qo,{name:"password",type:"password",label:"Contrasea",placeholder:"Una contrasea copada, eh",icon:"",error:t.password,register:r,required:!0}),L.jsx(xi,{type:"submit",disabled:i||o,size:"lg",children:i||o?"Creando cuenta...":"Crear cuenta"})]}),L.jsx("div",{className:"form-links",children:L.jsxs("p",{children:["Ya tens cuenta? ",L.jsx(Wo,{to:"/login",children:"Entr ac"})]})})]})},FM=()=>{const{register:r,onSubmit:e,formState:{errors:t,isSubmitSuccessful:i},isLoading:o,isSubmitting:l}=LM(),[c,d]=Z.useState(!1),p=async g=>{g.preventDefault(),await e(g),d(!0)};return L.jsxs("div",{className:"login-screen glass-effect",children:[L.jsxs("div",{className:"text-center mb-6",children:[L.jsx("h1",{className:"gradient-text",children:"Recuperar contrasea"}),L.jsx("p",{className:"text-secondary",children:"Te mandamos un mail si el usuario existe"})]}),L.jsxs("form",{onSubmit:p,className:"space-y-4",children:[L.jsx(qo,{name:"email",type:"email",label:"Email",placeholder:"Pon tu email ac",icon:"",error:t.email,register:r,required:!0}),L.jsx(xi,{type:"submit",disabled:o||l,size:"lg",children:o||l?"Enviando...":"Enviar enlace"})]}),(i||c)&&L.jsx("div",{className:"mt-4 text-green-500 text-center",children:"Si el email existe, te mandamos un enlace para resetear la contrasea."}),L.jsx("div",{className:"form-links mt-4",children:L.jsxs("p",{children:["Te acordaste? ",L.jsx(Wo,{to:"/login",children:"Volver a iniciar sesin"})]})})]})},BM=(r,e)=>`Sos un generador de aventuras tipo Zork. Devolv SOLO un JSON vlido y nada ms, sin explicaciones, sin markdown.

Requisitos del objeto JSON:
- Campos a nivel raz: version, adventureId, title, genre, language, createdAt, seed, state, steps
- language siempre "es" y todo el texto en espaol.
- createdAt y los timestamps en formato ISO 8601.
- seed nmero entero.
- state es un snapshot con: location, inventory[], stats{salud, lucidez}, flags{}, objetivos[].
- steps es un array con al menos 1 elemento (el paso inicial).
- Cada step tiene: stepId, turnIndex, timestamp, playerInput (null en el primer paso), narrative, imagePrompt, imageSeed, imageUrl (null si no est), suggestedActions[], stateAfter (snapshot completo).
- stepId y turnIndex comienzan en 0 y se incrementan por paso.

Instrucciones de contenido:
- Us la descripcin del usuario para definir ttulo, gnero, ubicacin inicial y objetivo inicial.
- El primer step debe presentar la escena inicial y terminar con una pregunta al jugador.
- suggestedActions con 3 a 5 acciones cortas.
- imagePrompt detallado, estilo ilustracin cinematogrfica de fantasa, conciso.
- imageSeed entero, imageUrl null en el primer paso.
- state y stateAfter del primer step deben coincidir.

Parmetros:
- seed: ${Math.floor(Math.random()*1e6)}
- descripcin_del_usuario: "${r}"
`,Qb=async(r,e,t,i)=>{try{const o=await fetch("https://zork-argento-api.onrender.com/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:r,...e?{conversationId:e}:{},...i?{threadId:i}:{},...t?{step:t}:{}})});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();console.log("API response:",l);const c=l&&typeof l=="object"?l:{},d="data"in c?c.data:c,p=d?.message??d?.response,g=p??c.message??c.response??"No response received",_=typeof g=="string"?g:JSON.stringify(g),T=d?.conversationId??c.conversationId,A=d?.threadId??c.threadId,V=d?.timestamp??c.timestamp;return{message:_,success:!0,payload:p,conversationId:T,threadId:A,timestamp:V}}catch(o){return console.error("Error calling chat API:",o),{message:"Error al conectar con el servidor. Intent de nuevo.",success:!1}}},qM=()=>{const{user:r,logout:e}=Fs(),t=cl(),[i,o]=Z.useState(""),[l,c]=Z.useState(!1),[d,p]=Z.useState(""),{initializeAdventure:g,setConversationId:_,setThreadId:T}=Yg(),A=()=>{e()},V=()=>{const U=Date.now().toString(36),Q=Math.random().toString(36).substring(2,9);return`${U}${Q}`},z=async()=>{if(i.trim()){c(!0),p("");try{const U=V();_(U);const Q=BM(i.trim()),F=await Qb(Q,U);if(F.success){const re=F.payload,_e=F.message;try{let ae=null;if(re&&typeof re=="object"?ae=re:typeof _e=="string"&&(ae=JSON.parse(_e)),ae&&ae.steps&&ae.steps.length>0)ae.conversationId=U,F.threadId&&(ae.threadId=F.threadId,T(F.threadId)),g(ae),p(`Aventura "${ae.title||"Sin ttulo"}" creada! Hac clic en "Empezar aventura" para comenzar.`);else throw new Error("Invalid adventure structure")}catch(ae){console.error("Invalid adventure JSON from API:",ae),p("Error al procesar la aventura generada. Intent de nuevo.")}}else p("Error al generar la aventura. Intent de nuevo.")}catch(U){console.error("Error generating adventure:",U),p("Error al conectar con el servidor. Intent de nuevo.")}finally{c(!1)}}},H=U=>{U.key==="Enter"&&!U.shiftKey&&(U.preventDefault(),z())};return L.jsxs("div",{className:"home-screen",children:[L.jsxs("header",{className:"home-header glass-effect",children:[L.jsxs("div",{children:[L.jsx("h1",{className:"gradient-text",children:"Bienvenido a Zork Argento!"}),L.jsx("p",{className:"text-secondary",children:"Tu aventura te est esperando, che"})]}),L.jsx("div",{className:"user-info",children:L.jsx(BT,{userName:r?.name||"Usuario",onLogout:A})})]}),L.jsxs("main",{className:"home-content",children:[L.jsxs("div",{className:"chat-interface",children:[L.jsxs("div",{className:"chat-header",children:[L.jsx("h2",{children:"Cre tu aventura"}),L.jsx("p",{className:"text-secondary",children:"Contanos qu aventura quers vivir"})]}),L.jsxs("div",{className:"chat-container",children:[d&&L.jsxs("div",{className:"response-container",style:{display:"flex",flexDirection:"column",gap:"1rem",padding:"1rem"},children:[L.jsx("div",{className:"response-header",children:L.jsx("h3",{children:"Tu aventura generada:"})}),L.jsx("div",{className:"response-content",children:L.jsx("p",{children:d})}),L.jsxs("div",{className:"response-actions",style:{display:"flex",gap:"1rem",flexDirection:"column"},children:[L.jsx(xi,{onClick:()=>t("/chat"),variant:"primary",className:"start-adventure-button",children:"Empezar aventura!"}),L.jsx(xi,{onClick:()=>{p(""),o("")},variant:"secondary",className:"new-adventure-button",children:"Crear otra aventura"})]})]}),l&&L.jsx("div",{className:"loading-container",children:L.jsxs("div",{className:"loading-content",children:[L.jsx("div",{className:"loading-spinner"}),L.jsx("p",{children:"Generando tu aventura..."})]})}),L.jsx("div",{className:"chat-input-container",children:L.jsxs("div",{className:"chat-input-wrapper",children:[L.jsx("textarea",{className:"chat-input",placeholder:"Contanos tu aventura... (ej: 'Una aventura pica en un castillo embrujado donde tengo que rescatar a un dragn')",value:i,onChange:U=>o(U.target.value),onKeyPress:H,rows:3,disabled:l}),L.jsx(xi,{onClick:z,disabled:l,className:"send-button",variant:"primary",children:l?"Generando...":"Dale, cre el Zork!"})]})})]})]}),L.jsxs("div",{className:"features",children:[L.jsx("div",{children:L.jsx("h2",{children:"Mis Zorks "})}),L.jsx(UM,{onSelectAdventure:()=>t("/chat")})]})]})]})},HM=()=>{const{user:r,logout:e}=Fs(),t=cl(),{currentAdventure:i,currentAdventureId:o,appendStep:l,saveAdventure:c,saveCurrentStep:d,conversationId:p,setConversationId:g,threadId:_,setThreadId:T,resetAdventure:A}=Yg(),[V,z]=Z.useState(""),[H,U]=Z.useState(!1),Q=Z.useRef(null),F=Z.useRef(null),re=w=>{const O=w?new Date(w):new Date;return isNaN(O.getTime())?new Date:O},_e=()=>{Q.current?.scrollIntoView({behavior:"smooth"})};Z.useEffect(()=>{i||t("/home")},[i,t]),Z.useEffect(()=>{(async()=>{i&&!o&&r?.id&&(console.log(" [ChatScreen] Saving new adventure to Firebase..."),await c(r.id))})()},[i,o,r?.id,c]),Z.useEffect(()=>{_e()},[i?.steps]);const ae=async()=>{if(!V.trim()||H||!i)return;const w=V.trim(),O=i.steps||[],x=O[O.length-1],D=x?x.stepId+1:0,R=x?x.turnIndex+1:0;z(""),U(!0);try{const Re=await Qb(w,p||void 0,{stepId:D,turnIndex:R},_||void 0);if(Re.success){Re.conversationId&&!p&&g(Re.conversationId),Re.threadId&&!_&&T(Re.threadId);try{const Ae=Re.payload??(typeof Re.message=="string"?JSON.parse(Re.message):Re.message);let $=null;if(Ae&&typeof Ae=="object")if(Array.isArray(Ae.steps)){const le=Ae.steps;$=le[le.length-1]??null}else("stepId"in Ae||"narrative"in Ae)&&($=Ae);if($&&$.narrative){const le={stepId:typeof $.stepId=="number"?$.stepId:D,turnIndex:typeof $.turnIndex=="number"?$.turnIndex:R,timestamp:typeof $.timestamp=="string"?$.timestamp:new Date().toISOString(),playerInput:typeof $.playerInput=="string"?$.playerInput:w,narrative:$.narrative,imagePrompt:$.imagePrompt??"fantasy illustration, cinematic, high detail",imageSeed:$.imageSeed??Math.floor(Math.random()*1e6),imageUrl:$.imageUrl??null,suggestedActions:Array.isArray($.suggestedActions)?$.suggestedActions:[],stateAfter:$.stateAfter??i.state};l(le),console.log(" [ChatScreen] Step appended, attempting to save...",{currentAdventureId:o,userId:r?.id,stepId:le.stepId,totalSteps:i.steps.length+1}),!o&&r?.id&&(console.log(" [ChatScreen] No adventureId yet, saving adventure first..."),await c(r.id),console.log(" [ChatScreen] Adventure saved")),r?.id?await d():console.warn(" [ChatScreen] Could not save step - missing userId")}else{console.error("Invalid or missing narrative in step from API:",Ae);const le={stepId:D,turnIndex:R,timestamp:new Date().toISOString(),playerInput:w,narrative:"Algo sali mal con la respuesta del servidor. Por favor, intent de nuevo.",imagePrompt:"error illustration",imageSeed:0,imageUrl:null,suggestedActions:["Intentar de nuevo"],stateAfter:i.state};l(le),!o&&r?.id&&await c(r.id),r?.id&&await d()}}catch(Ae){console.error("Error parsing step JSON from API:",Ae,"Raw response:",Re.message);const $={stepId:D,turnIndex:R,timestamp:new Date().toISOString(),playerInput:w,narrative:"Error al procesar la respuesta. Por favor, intent de nuevo.",imagePrompt:"error illustration",imageSeed:0,imageUrl:null,suggestedActions:["Reintentar"],stateAfter:i.state};l($),!o&&r?.id&&await c(r.id),r?.id&&await d()}}else{const Ae={stepId:D,turnIndex:R,timestamp:new Date().toISOString(),playerInput:w,narrative:Re.message||"Error al conectar con el servidor. Intent de nuevo.",imagePrompt:"error illustration",imageSeed:0,imageUrl:null,suggestedActions:[],stateAfter:i.state};l(Ae),!o&&r?.id&&await c(r.id),r?.id&&await d()}}catch(Re){console.error("Error sending message:",Re);const Ae={stepId:D,turnIndex:R,timestamp:new Date().toISOString(),playerInput:w,narrative:"Error de conexin. Por favor, verific tu conexin a internet e intent de nuevo.",imagePrompt:"error illustration",imageSeed:0,imageUrl:null,suggestedActions:[],stateAfter:i.state};l(Ae),!o&&r?.id&&await c(r.id),r?.id&&await d()}finally{U(!1)}},Se=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),ae())},k=()=>{e()},I=()=>{A(),t("/home")};return L.jsxs("div",{className:"chat-screen",children:[L.jsx("header",{style:{margin:"1rem 2rem"},className:"home-header glass-effect",children:L.jsxs("div",{className:"header-content",children:[L.jsx("div",{className:"header-title",children:L.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[L.jsx("button",{onClick:I,className:"back-button",style:{background:"none",border:"none",fontSize:"2.5rem",cursor:"pointer",color:"inherit",padding:"0.5rem",borderRadius:"50%",transition:"background-color 0.2s ease"},onMouseEnter:w=>w.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)",onMouseLeave:w=>w.currentTarget.style.backgroundColor="transparent",children:""}),L.jsxs("div",{children:[L.jsx("h1",{children:" Zork Argento"}),L.jsx("p",{children:"Aventura de texto interactiva"})]})]})}),L.jsx(BT,{userName:r?.name||"Usuario",onLogout:k})]})}),L.jsx("main",{className:"chat-main",children:L.jsxs("div",{className:"chat-container-full",children:[L.jsxs("div",{className:"messages-container",children:[(i?.steps||[]).slice().sort((w,O)=>(w.stepId??0)-(O.stepId??0)).map((w,O)=>{const x=typeof w.stepId=="number"?w.stepId:O,D=typeof w.turnIndex=="number"?w.turnIndex:O;return L.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:[w.playerInput&&L.jsx("div",{className:"message-wrapper user-message-wrapper",children:L.jsxs("div",{className:"message-content-wrapper",children:[L.jsx("div",{className:"message-avatar",children:L.jsx("span",{className:"avatar-text",children:"Vos"})}),L.jsxs("div",{className:"message-bubble",children:[L.jsx("div",{className:"message-text",children:w.playerInput}),L.jsx("div",{className:"message-timestamp",children:re(w.timestamp).toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit"})})]})]})}),L.jsx("div",{className:"message-wrapper assistant-message-wrapper",children:L.jsxs("div",{className:"message-content-wrapper",children:[L.jsx("div",{className:"message-avatar",children:L.jsx("span",{className:"avatar-icon",children:""})}),L.jsxs("div",{className:"message-bubble",children:[L.jsx("div",{className:"message-text",children:w.narrative}),w.suggestedActions&&w.suggestedActions.length>0&&L.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[L.jsx("div",{style:{fontSize:"0.85rem",opacity:.7,fontWeight:"bold"},children:" Acciones sugeridas:"}),L.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:w.suggestedActions.map((R,Re)=>L.jsx("button",{onClick:()=>!H&&z(R),disabled:H,style:{padding:"0.4rem 0.8rem",fontSize:"0.85rem",backgroundColor:"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.4)",borderRadius:"1rem",color:"inherit",cursor:H?"not-allowed":"pointer",transition:"all 0.2s ease",opacity:H?.5:1},onMouseEnter:Ae=>{H||(Ae.currentTarget.style.backgroundColor="rgba(139, 92, 246, 0.3)",Ae.currentTarget.style.transform="translateY(-2px)")},onMouseLeave:Ae=>{Ae.currentTarget.style.backgroundColor="rgba(139, 92, 246, 0.2)",Ae.currentTarget.style.transform="translateY(0)"},children:R},`action-${x}-${Re}`))})]}),w.stateAfter&&L.jsxs("div",{style:{marginTop:"1rem",paddingTop:"1rem",borderTop:"1px solid rgba(255, 255, 255, 0.1)",fontSize:"0.8rem",opacity:.6,display:"flex",flexDirection:"column",gap:"0.3rem"},children:[L.jsxs("div",{children:[L.jsx("strong",{children:" Ubicacin:"})," ",w.stateAfter.location]}),w.stateAfter.inventory&&w.stateAfter.inventory.length>0&&L.jsxs("div",{children:[L.jsx("strong",{children:" Inventario:"})," ",w.stateAfter.inventory.join(", ")]}),L.jsxs("div",{children:[L.jsx("strong",{children:" Salud:"})," ",w.stateAfter.stats.salud," |",L.jsx("strong",{children:"  Lucidez:"})," ",w.stateAfter.stats.lucidez]})]}),L.jsx("div",{className:"message-timestamp",children:re(w.timestamp).toLocaleTimeString("es-AR",{hour:"2-digit",minute:"2-digit"})})]})]})})]},`step-${x}-${D}`)}),H&&L.jsx("div",{className:"message-wrapper assistant-message-wrapper",children:L.jsxs("div",{className:"message-content-wrapper",children:[L.jsx("div",{className:"message-avatar",children:L.jsx("span",{className:"avatar-icon",children:""})}),L.jsx("div",{className:"message-bubble",children:L.jsxs("div",{className:"typing-indicator",children:[L.jsxs("div",{className:"typing-dots",children:[L.jsx("span",{}),L.jsx("span",{}),L.jsx("span",{})]}),L.jsx("span",{className:"typing-text",children:"El juego est pensando..."})]})})]})}),L.jsx("div",{ref:Q})]}),L.jsx("div",{className:"input-container",children:L.jsxs("div",{className:"input-wrapper",children:[L.jsx("textarea",{ref:F,className:"chat-input-field",placeholder:"Escrib tu comando... (ej: 'mirar alrededor', 'ir norte', 'abrir puerta')",value:V,onChange:w=>z(w.target.value),onKeyPress:Se,rows:1,disabled:H}),L.jsx(xi,{onClick:ae,disabled:!V.trim()||H,className:"send-button-chat",variant:"primary",children:L.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[L.jsx("path",{d:"m22 2-7 20-4-9-9-4z"}),L.jsx("path",{d:"M22 2 11 13"})]})})]})})]})})]})},GM=()=>{const{isAuthenticated:r}=Fs();return L.jsx(wM,{children:L.jsxs(nM,{children:[L.jsx(va,{path:"/login",element:r?L.jsx(Oo,{to:"/home",replace:!0}):L.jsx(jM,{})}),L.jsx(va,{path:"/signup",element:r?L.jsx(Oo,{to:"/home",replace:!0}):L.jsx(zM,{})}),L.jsx(va,{path:"/forgot-password",element:r?L.jsx(Oo,{to:"/home",replace:!0}):L.jsx(FM,{})}),L.jsx(va,{path:"/home",element:r?L.jsx(qM,{}):L.jsx(Oo,{to:"/login",replace:!0})}),L.jsx(va,{path:"/chat",element:r?L.jsx(HM,{}):L.jsx(Oo,{to:"/login",replace:!0})}),L.jsx(va,{path:"/",element:L.jsx(Oo,{to:r?"/home":"/login",replace:!0})})]})})};function $M(){return L.jsx(zO,{children:L.jsx("div",{className:"app-container",children:L.jsx(GM,{})})})}C1.createRoot(document.getElementById("root")).render(L.jsx(Z.StrictMode,{children:L.jsx($M,{})}));
